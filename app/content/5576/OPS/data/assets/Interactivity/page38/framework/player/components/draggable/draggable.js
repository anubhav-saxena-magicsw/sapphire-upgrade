define(["marionette","player/base/base-item-comp","jqueryTouchPunch"],function(t,o){var i=o.extend({template:_.template(""),dId:void 0,containmentDiv:void 0,originalPos:void 0,currentPos:void 0,initialize:function(t){if("#"!=t.elementId.toString().charAt(0))throw new Error("Error : Please pass some valid id selector");this.dId=t.elementId.toString(),void 0!==t.containment&&"#"==t.containment.toString().charAt(0)&&(this.containmentDiv=$(t.containment.toString())),this._makeDraggable(),void 0!==t&&void 0!==t.updatedScale&&this.setStageScaleValue(t.updatedScale)},onPlayerResizeEvent:function(){this.handleScaling()}});return i.prototype._makeDraggable=function(){var t=this;setTimeout(function(){$(t.dId).css("position","relative")},0),$(this.dId).draggable({start:function(o,i){t.start={};var e={event:o,ui:i};t.customEventDispatcher("start",t,e),void 0===t.originalPos&&(t.originalPos={left:i.originalPosition.left,top:i.originalPosition.top}),t.currentPos={left:i.position.left,top:i.position.top},t.start.x=o.clientX,t.start.y=o.clientY},drag:function(o,i){var e,n,r,a={event:o,ui:i};e=i.originalPosition.left+(o.clientX-t.start.x)/t.getStageScaleValue(),n=i.originalPosition.top+(o.clientY-t.start.y)/t.getStageScaleValue(),r=t.containementCordinates(),e<r.left?e=r.left:e>r.right&&(e=r.right),n<r.top?n=r.top:n>r.bottom&&(n=r.bottom),i.position.left=e,i.position.top=n,t.customEventDispatcher("drag",t,a),t.currentPos={left:e,top:n}},stop:function(o,i){var e={event:o,ui:i};t.customEventDispatcher("stop",t,e),t.currentPos={left:i.position.left,top:i.position.top}}})},i.prototype.containementCordinates=function(){var t,o,i,e,n=this;return n.containmentDiv&&(t=0,o=0,i=t+this.containmentDiv.width()-$(this.dId).width(),e=o+this.containmentDiv.height()-$(this.dId).height()),{left:t,top:o,right:i,bottom:e}},i.prototype.revertBack=function(){var t=this;$(this.dId).animate({left:t.originalPos.left,top:t.originalPos.top},{complete:function(o){t.customEventDispatcher("revertComplete",t,o)},progress:function(o){t.customEventDispatcher("revertProgress",t,o)}})},i.prototype.setOriginalPosition=function(t){parseFloat(t.left)!==isNaN&&parseFloat(t.top)!==isNaN&&(this.originalPos={},this.originalPos.left=parseFloat(t.left),this.originalPos.top=parseFloat(t.top))},i.prototype.setCurrentPositionToOriginalPosition=function(){void 0!==this.currentPos&&(this.originalPos=this.currentPos)},i.prototype.enable=function(){$(this.dId).draggable("enable")},i.prototype.disable=function(){$(this.dId).draggable("disable")},i.prototype.handleScaling=function(){},i.prototype.Super=o,i.prototype.destroy=function(){return $(this.dId).draggable("destroy"),this.Super.prototype.destroy(!0)},i});