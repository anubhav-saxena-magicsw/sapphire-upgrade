define(["marionette","player/editor/base-editor"],function(t,e){var a;return a=e.extend({defaultCompData:{},componentHTMLDiv:void 0}),a.prototype.getComponent=function(t){this.componentHTMLDiv=$(t),this.createCompData($(t))},a.prototype.createCompData=function(t){this.prepareDefaultData(t,this.onDefaultDataCreationComplete,this)},a.prototype.onDefaultDataCreationComplete=function(t,e){t.defaultCompData=e,void 0!==t.defaultCompData.tableData?t.getTableData():1===t.componentHTMLDiv.find("itemRenderer").length&&t.loadRenderer()},a.prototype.getTableData=function(){var t=this;Data_Loader.on(Data_Loader.DATA_LOAD_SUCCESS,$.proxy(t.successHandler,t)),Data_Loader.on(Data_Loader.DATA_LOAD_FAILED,$.proxy(t.errorHandler,t)),Data_Loader.load({url:t.defaultCompData.tableData,dataType:"xml",contentType:"application/xml",returnType:"json",scope:t})},a.prototype.successHandler=function(t){Data_Loader.off(Data_Loader.DATA_LOAD_SUCCESS),Data_Loader.off(Data_Loader.DATA_LOAD_FAILED),this.defaultCompData.tableData=t,1===this.componentHTMLDiv.find("itemRenderer").length?this.loadRenderer():this.prepareDataForTable(this.defaultCompData)},a.prototype.errorHandler=function(){Data_Loader.off(Data_Loader.DATA_LOAD_SUCCESS),Data_Loader.off(Data_Loader.DATA_LOAD_FAILED)},a.prototype.loadRenderer=function(){var t,e,a=$(this.componentHTMLDiv.find("itemRenderer")[0]),o=this;e=this.prepareDefaultData(a),t=a.text(),require([t],function(t){o.prepareDataForTable(t,e)})},a.prototype.prepareDataForTable=function(t,e){void 0!==t&&void 0!==e&&(this.defaultCompData.itemRendererClassName=e.className,this.defaultCompData.itemRenderer=t),this.createComponent(this.componentHTMLDiv)},a.prototype.onComponentCreationComplete=function(t){this.objComp=t,this.objComp.defaultData=this.defaultCompData,this.componentCreated()},a.prototype.destroy=function(){return a.__super__.destroy(!0,this)},a});