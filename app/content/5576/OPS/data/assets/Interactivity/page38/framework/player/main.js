!function(t,e){function i(t){var e=t.length,i=re.type(t);return re.isWindow(t)?!1:1===t.nodeType&&e?!0:"array"===i||"function"!==i&&(0===e||"number"==typeof e&&e>0&&e-1 in t)}function n(t){var e=fe[t]={};return re.each(t.match(ae)||[],function(t,i){e[i]=!0}),e}function o(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=re.expando+Math.random()}function r(t,i,n){var o;if(n===e&&1===t.nodeType)if(o="data-"+i.replace(ye,"-$1").toLowerCase(),n=t.getAttribute(o),"string"==typeof n){try{n="true"===n?!0:"false"===n?!1:"null"===n?null:+n+""===n?+n:ve.test(n)?JSON.parse(n):n}catch(r){}ge.set(t,i,n)}else n=e;return n}function s(){return!0}function a(){return!1}function l(){try{return q.activeElement}catch(t){}}function c(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}function h(t,e,i){if(re.isFunction(e))return re.grep(t,function(t,n){return!!e.call(t,n,t)!==i});if(e.nodeType)return re.grep(t,function(t){return t===e!==i});if("string"==typeof e){if(Ie.test(e))return re.filter(e,t,i);e=re.filter(e,t)}return re.grep(t,function(t){return ee.call(e,t)>=0!==i})}function u(t,e){return re.nodeName(t,"table")&&re.nodeName(1===e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function p(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function d(t){var e=ze.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function f(t,e){for(var i=t.length,n=0;i>n;n++)me.set(t[n],"globalEval",!e||me.get(e[n],"globalEval"))}function g(t,e){var i,n,o,r,s,a,l,c;if(1===e.nodeType){if(me.hasData(t)&&(r=me.access(t),s=me.set(e,r),c=r.events)){delete s.handle,s.events={};for(o in c)for(i=0,n=c[o].length;n>i;i++)re.event.add(e,o,c[o][i])}ge.hasData(t)&&(a=ge.access(t),l=re.extend({},a),ge.set(e,l))}}function m(t,i){var n=t.getElementsByTagName?t.getElementsByTagName(i||"*"):t.querySelectorAll?t.querySelectorAll(i||"*"):[];return i===e||i&&re.nodeName(t,i)?re.merge([t],n):n}function v(t,e){var i=e.nodeName.toLowerCase();"input"===i&&Me.test(t.type)?e.checked=t.checked:("input"===i||"textarea"===i)&&(e.defaultValue=t.defaultValue)}function y(t,e){if(e in t)return e;for(var i=e.charAt(0).toUpperCase()+e.slice(1),n=e,o=Ze.length;o--;)if(e=Ze[o]+i,e in t)return e;return n}function b(t,e){return t=e||t,"none"===re.css(t,"display")||!re.contains(t.ownerDocument,t)}function _(e){return t.getComputedStyle(e,null)}function C(t,e){for(var i,n,o,r=[],s=0,a=t.length;a>s;s++)n=t[s],n.style&&(r[s]=me.get(n,"olddisplay"),i=n.style.display,e?(r[s]||"none"!==i||(n.style.display=""),""===n.style.display&&b(n)&&(r[s]=me.access(n,"olddisplay",w(n.nodeName)))):r[s]||(o=b(n),(i&&"none"!==i||!o)&&me.set(n,"olddisplay",o?i:re.css(n,"display"))));for(s=0;a>s;s++)n=t[s],n.style&&(e&&"none"!==n.style.display&&""!==n.style.display||(n.style.display=e?r[s]||"":"none"));return t}function E(t,e,i){var n=$e.exec(e);return n?Math.max(0,n[1]-(i||0))+(n[2]||"px"):e}function T(t,e,i,n,o){for(var r=i===(n?"border":"content")?4:"width"===e?1:0,s=0;4>r;r+=2)"margin"===i&&(s+=re.css(t,i+Qe[r],!0,o)),n?("content"===i&&(s-=re.css(t,"padding"+Qe[r],!0,o)),"margin"!==i&&(s-=re.css(t,"border"+Qe[r]+"Width",!0,o))):(s+=re.css(t,"padding"+Qe[r],!0,o),"padding"!==i&&(s+=re.css(t,"border"+Qe[r]+"Width",!0,o)));return s}function A(t,e,i){var n=!0,o="width"===e?t.offsetWidth:t.offsetHeight,r=_(t),s=re.support.boxSizing&&"border-box"===re.css(t,"boxSizing",!1,r);if(0>=o||null==o){if(o=Fe(t,e,r),(0>o||null==o)&&(o=t.style[e]),Ye.test(o))return o;n=s&&(re.support.boxSizingReliable||o===t.style[e]),o=parseFloat(o)||0}return o+T(t,e,i||(s?"border":"content"),n,r)+"px"}function w(t){var e=q,i=Xe[t];return i||(i=D(t,e),"none"!==i&&i||(We=(We||re("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(e.documentElement),e=(We[0].contentWindow||We[0].contentDocument).document,e.write("<!doctype html><html><body>"),e.close(),i=D(t,e),We.detach()),Xe[t]=i),i}function D(t,e){var i=re(e.createElement(t)).appendTo(e.body),n=re.css(i[0],"display");return i.remove(),n}function x(t,e,i,n){var o;if(re.isArray(e))re.each(e,function(e,o){i||ei.test(t)?n(t,o):x(t+"["+("object"==typeof o?e:"")+"]",o,i,n)});else if(i||"object"!==re.type(e))n(t,e);else for(o in e)x(t+"["+o+"]",e[o],i,n)}function I(t){return function(e,i){"string"!=typeof e&&(i=e,e="*");var n,o=0,r=e.toLowerCase().match(ae)||[];if(re.isFunction(i))for(;n=r[o++];)"+"===n[0]?(n=n.slice(1)||"*",(t[n]=t[n]||[]).unshift(i)):(t[n]=t[n]||[]).push(i)}}function P(t,i,n,o){function r(l){var c;return s[l]=!0,re.each(t[l]||[],function(t,l){var h=l(i,n,o);return"string"!=typeof h||a||s[h]?a?!(c=h):e:(i.dataTypes.unshift(h),r(h),!1)}),c}var s={},a=t===yi;return r(i.dataTypes[0])||!s["*"]&&r("*")}function j(t,i){var n,o,r=re.ajaxSettings.flatOptions||{};for(n in i)i[n]!==e&&((r[n]?t:o||(o={}))[n]=i[n]);return o&&re.extend(!0,t,o),t}function S(t,i,n){for(var o,r,s,a,l=t.contents,c=t.dataTypes;"*"===c[0];)c.shift(),o===e&&(o=t.mimeType||i.getResponseHeader("Content-Type"));if(o)for(r in l)if(l[r]&&l[r].test(o)){c.unshift(r);break}if(c[0]in n)s=c[0];else{for(r in n){if(!c[0]||t.converters[r+" "+c[0]]){s=r;break}a||(a=r)}s=s||a}return s?(s!==c[0]&&c.unshift(s),n[s]):e}function R(t,e,i,n){var o,r,s,a,l,c={},h=t.dataTypes.slice();if(h[1])for(s in t.converters)c[s.toLowerCase()]=t.converters[s];for(r=h.shift();r;)if(t.responseFields[r]&&(i[t.responseFields[r]]=e),!l&&n&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=r,r=h.shift())if("*"===r)r=l;else if("*"!==l&&l!==r){if(s=c[l+" "+r]||c["* "+r],!s)for(o in c)if(a=o.split(" "),a[1]===r&&(s=c[l+" "+a[0]]||c["* "+a[0]])){s===!0?s=c[o]:c[o]!==!0&&(r=a[0],h.unshift(a[1]));break}if(s!==!0)if(s&&t["throws"])e=s(e);else try{e=s(e)}catch(u){return{state:"parsererror",error:s?u:"No conversion from "+l+" to "+r}}}return{state:"success",data:e}}function N(){return setTimeout(function(){xi=e}),xi=re.now()}function O(t,e,i){for(var n,o=(Ni[e]||[]).concat(Ni["*"]),r=0,s=o.length;s>r;r++)if(n=o[r].call(i,e,t))return n}function L(t,e,i){var n,o,r=0,s=Ri.length,a=re.Deferred().always(function(){delete l.elem}),l=function(){if(o)return!1;for(var e=xi||N(),i=Math.max(0,c.startTime+c.duration-e),n=i/c.duration||0,r=1-n,s=0,l=c.tweens.length;l>s;s++)c.tweens[s].run(r);return a.notifyWith(t,[c,r,i]),1>r&&l?i:(a.resolveWith(t,[c]),!1)},c=a.promise({elem:t,props:re.extend({},e),opts:re.extend(!0,{specialEasing:{}},i),originalProperties:e,originalOptions:i,startTime:xi||N(),duration:i.duration,tweens:[],createTween:function(e,i){var n=re.Tween(t,c.opts,e,i,c.opts.specialEasing[e]||c.opts.easing);return c.tweens.push(n),n},stop:function(e){var i=0,n=e?c.tweens.length:0;if(o)return this;for(o=!0;n>i;i++)c.tweens[i].run(1);return e?a.resolveWith(t,[c,e]):a.rejectWith(t,[c,e]),this}}),h=c.props;for(M(h,c.opts.specialEasing);s>r;r++)if(n=Ri[r].call(c,t,h,c.opts))return n;return re.map(h,O,c),re.isFunction(c.opts.start)&&c.opts.start.call(t,c),re.fx.timer(re.extend(l,{elem:t,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}function M(t,e){var i,n,o,r,s;for(i in t)if(n=re.camelCase(i),o=e[n],r=t[i],re.isArray(r)&&(o=r[1],r=t[i]=r[0]),i!==n&&(t[n]=r,delete t[i]),s=re.cssHooks[n],s&&"expand"in s){r=s.expand(r),delete t[n];for(i in r)i in t||(t[i]=r[i],e[i]=o)}else e[n]=o}function k(t,i,n){var o,r,s,a,l,c,h=this,u={},p=t.style,d=t.nodeType&&b(t),f=me.get(t,"fxshow");n.queue||(l=re._queueHooks(t,"fx"),null==l.unqueued&&(l.unqueued=0,c=l.empty.fire,l.empty.fire=function(){l.unqueued||c()}),l.unqueued++,h.always(function(){h.always(function(){l.unqueued--,re.queue(t,"fx").length||l.empty.fire()})})),1===t.nodeType&&("height"in i||"width"in i)&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],"inline"===re.css(t,"display")&&"none"===re.css(t,"float")&&(p.display="inline-block")),n.overflow&&(p.overflow="hidden",h.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}));for(o in i)if(r=i[o],Pi.exec(r)){if(delete i[o],s=s||"toggle"===r,r===(d?"hide":"show")){if("show"!==r||!f||f[o]===e)continue;d=!0}u[o]=f&&f[o]||re.style(t,o)}if(!re.isEmptyObject(u)){f?"hidden"in f&&(d=f.hidden):f=me.access(t,"fxshow",{}),s&&(f.hidden=!d),d?re(t).show():h.done(function(){re(t).hide()}),h.done(function(){var e;me.remove(t,"fxshow");for(e in u)re.style(t,e,u[e])});for(o in u)a=O(d?f[o]:0,o,h),o in f||(f[o]=a.start,d&&(a.end=a.start,a.start="width"===o||"height"===o?1:0))}}function H(t,e,i,n,o){return new H.prototype.init(t,e,i,n,o)}function z(t,e){var i,n={height:t},o=0;for(e=e?1:0;4>o;o+=2-e)i=Qe[o],n["margin"+i]=n["padding"+i]=t;return e&&(n.opacity=n.width=t),n}function B(t){return re.isWindow(t)?t:9===t.nodeType&&t.defaultView}var V,F,W=typeof e,U=t.location,q=t.document,$=q.documentElement,Y=t.jQuery,G=t.$,X={},K=[],J="2.0.3",Q=K.concat,Z=K.push,te=K.slice,ee=K.indexOf,ie=X.toString,ne=X.hasOwnProperty,oe=J.trim,re=function(t,e){return new re.fn.init(t,e,V)},se=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ae=/\S+/g,le=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,ce=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,he=/^-ms-/,ue=/-([\da-z])/gi,pe=function(t,e){return e.toUpperCase()},de=function(){q.removeEventListener("DOMContentLoaded",de,!1),t.removeEventListener("load",de,!1),re.ready()};re.fn=re.prototype={jquery:J,constructor:re,init:function(t,i,n){var o,r;if(!t)return this;if("string"==typeof t){if(o="<"===t.charAt(0)&&">"===t.charAt(t.length-1)&&t.length>=3?[null,t,null]:le.exec(t),!o||!o[1]&&i)return!i||i.jquery?(i||n).find(t):this.constructor(i).find(t);if(o[1]){if(i=i instanceof re?i[0]:i,re.merge(this,re.parseHTML(o[1],i&&i.nodeType?i.ownerDocument||i:q,!0)),ce.test(o[1])&&re.isPlainObject(i))for(o in i)re.isFunction(this[o])?this[o](i[o]):this.attr(o,i[o]);return this}return r=q.getElementById(o[2]),r&&r.parentNode&&(this.length=1,this[0]=r),this.context=q,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):re.isFunction(t)?n.ready(t):(t.selector!==e&&(this.selector=t.selector,this.context=t.context),re.makeArray(t,this))},selector:"",length:0,toArray:function(){return te.call(this)},get:function(t){return null==t?this.toArray():0>t?this[this.length+t]:this[t]},pushStack:function(t){var e=re.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t,e){return re.each(this,t,e)},ready:function(t){return re.ready.promise().done(t),this},slice:function(){return this.pushStack(te.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,i=+t+(0>t?e:0);return this.pushStack(i>=0&&e>i?[this[i]]:[])},map:function(t){return this.pushStack(re.map(this,function(e,i){return t.call(e,i,e)}))},end:function(){return this.prevObject||this.constructor(null)},push:Z,sort:[].sort,splice:[].splice},re.fn.init.prototype=re.fn,re.extend=re.fn.extend=function(){var t,i,n,o,r,s,a=arguments[0]||{},l=1,c=arguments.length,h=!1;for("boolean"==typeof a&&(h=a,a=arguments[1]||{},l=2),"object"==typeof a||re.isFunction(a)||(a={}),c===l&&(a=this,--l);c>l;l++)if(null!=(t=arguments[l]))for(i in t)n=a[i],o=t[i],a!==o&&(h&&o&&(re.isPlainObject(o)||(r=re.isArray(o)))?(r?(r=!1,s=n&&re.isArray(n)?n:[]):s=n&&re.isPlainObject(n)?n:{},a[i]=re.extend(h,s,o)):o!==e&&(a[i]=o));return a},re.extend({expando:"jQuery"+(J+Math.random()).replace(/\D/g,""),noConflict:function(e){return t.$===re&&(t.$=G),e&&t.jQuery===re&&(t.jQuery=Y),re},isReady:!1,readyWait:1,holdReady:function(t){t?re.readyWait++:re.ready(!0)},ready:function(t){(t===!0?--re.readyWait:re.isReady)||(re.isReady=!0,t!==!0&&--re.readyWait>0||(F.resolveWith(q,[re]),re.fn.trigger&&re(q).trigger("ready").off("ready")))},isFunction:function(t){return"function"===re.type(t)},isArray:Array.isArray,isWindow:function(t){return null!=t&&t===t.window},isNumeric:function(t){return!isNaN(parseFloat(t))&&isFinite(t)},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?X[ie.call(t)]||"object":typeof t},isPlainObject:function(t){if("object"!==re.type(t)||t.nodeType||re.isWindow(t))return!1;try{if(t.constructor&&!ne.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}return!0},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},error:function(t){throw Error(t)},parseHTML:function(t,e,i){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(i=e,e=!1),e=e||q;var n=ce.exec(t),o=!i&&[];return n?[e.createElement(n[1])]:(n=re.buildFragment([t],e,o),o&&re(o).remove(),re.merge([],n.childNodes))},parseJSON:JSON.parse,parseXML:function(t){var i,n;if(!t||"string"!=typeof t)return null;try{n=new DOMParser,i=n.parseFromString(t,"text/xml")}catch(o){i=e}return(!i||i.getElementsByTagName("parsererror").length)&&re.error("Invalid XML: "+t),i},noop:function(){},globalEval:function(t){var e,i=eval;t=re.trim(t),t&&(1===t.indexOf("use strict")?(e=q.createElement("script"),e.text=t,q.head.appendChild(e).parentNode.removeChild(e)):i(t))},camelCase:function(t){return t.replace(he,"ms-").replace(ue,pe)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e,n){var o,r=0,s=t.length,a=i(t);if(n){if(a)for(;s>r&&(o=e.apply(t[r],n),o!==!1);r++);else for(r in t)if(o=e.apply(t[r],n),o===!1)break}else if(a)for(;s>r&&(o=e.call(t[r],r,t[r]),o!==!1);r++);else for(r in t)if(o=e.call(t[r],r,t[r]),o===!1)break;return t},trim:function(t){return null==t?"":oe.call(t)},makeArray:function(t,e){var n=e||[];return null!=t&&(i(Object(t))?re.merge(n,"string"==typeof t?[t]:t):Z.call(n,t)),n},inArray:function(t,e,i){return null==e?-1:ee.call(e,t,i)},merge:function(t,i){var n=i.length,o=t.length,r=0;if("number"==typeof n)for(;n>r;r++)t[o++]=i[r];else for(;i[r]!==e;)t[o++]=i[r++];return t.length=o,t},grep:function(t,e,i){var n,o=[],r=0,s=t.length;for(i=!!i;s>r;r++)n=!!e(t[r],r),i!==n&&o.push(t[r]);return o},map:function(t,e,n){var o,r=0,s=t.length,a=i(t),l=[];if(a)for(;s>r;r++)o=e(t[r],r,n),null!=o&&(l[l.length]=o);else for(r in t)o=e(t[r],r,n),null!=o&&(l[l.length]=o);return Q.apply([],l)},guid:1,proxy:function(t,i){var n,o,r;return"string"==typeof i&&(n=t[i],i=t,t=n),re.isFunction(t)?(o=te.call(arguments,2),r=function(){return t.apply(i||this,o.concat(te.call(arguments)))},r.guid=t.guid=t.guid||re.guid++,r):e},access:function(t,i,n,o,r,s,a){var l=0,c=t.length,h=null==n;if("object"===re.type(n)){r=!0;for(l in n)re.access(t,i,l,n[l],!0,s,a)}else if(o!==e&&(r=!0,re.isFunction(o)||(a=!0),h&&(a?(i.call(t,o),i=null):(h=i,i=function(t,e,i){return h.call(re(t),i)})),i))for(;c>l;l++)i(t[l],n,a?o:o.call(t[l],l,i(t[l],n)));return r?t:h?i.call(t):c?i(t[0],n):s},now:Date.now,swap:function(t,e,i,n){var o,r,s={};for(r in e)s[r]=t.style[r],t.style[r]=e[r];o=i.apply(t,n||[]);for(r in e)t.style[r]=s[r];return o}}),re.ready.promise=function(e){return F||(F=re.Deferred(),"complete"===q.readyState?setTimeout(re.ready):(q.addEventListener("DOMContentLoaded",de,!1),t.addEventListener("load",de,!1))),F.promise(e)},re.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){X["[object "+e+"]"]=e.toLowerCase()}),V=re(q),function(t,e){function i(t,e,i,n){var o,r,s,a,l,c,h,u,f,g;if((e?e.ownerDocument||e:B)!==R&&S(e),e=e||R,i=i||[],!t||"string"!=typeof t)return i;if(1!==(a=e.nodeType)&&9!==a)return[];if(O&&!n){if(o=be.exec(t))if(s=o[1]){if(9===a){if(r=e.getElementById(s),!r||!r.parentNode)return i;if(r.id===s)return i.push(r),i}else if(e.ownerDocument&&(r=e.ownerDocument.getElementById(s))&&H(e,r)&&r.id===s)return i.push(r),i}else{if(o[2])return te.apply(i,e.getElementsByTagName(t)),i;if((s=o[3])&&T.getElementsByClassName&&e.getElementsByClassName)return te.apply(i,e.getElementsByClassName(s)),i}if(T.qsa&&(!L||!L.test(t))){if(u=h=z,f=e,g=9===a&&t,1===a&&"object"!==e.nodeName.toLowerCase()){for(c=p(t),(h=e.getAttribute("id"))?u=h.replace(Ee,"\\$&"):e.setAttribute("id",u),u="[id='"+u+"'] ",l=c.length;l--;)c[l]=u+d(c[l]);f=de.test(t)&&e.parentNode||e,g=c.join(",")}if(g)try{return te.apply(i,f.querySelectorAll(g)),i}catch(m){}finally{h||e.removeAttribute("id")}}}return C(t.replace(he,"$1"),e,i,n)}function n(){function t(i,n){return e.push(i+=" ")>w.cacheLength&&delete t[e.shift()],t[i]=n}var e=[];return t}function o(t){return t[z]=!0,t}function r(t){var e=R.createElement("div");try{return!!t(e)}catch(i){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function s(t,e){for(var i=t.split("|"),n=t.length;n--;)w.attrHandle[i[n]]=e}function a(t,e){var i=e&&t,n=i&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||X)-(~t.sourceIndex||X);if(n)return n;if(i)for(;i=i.nextSibling;)if(i===e)return-1;return t?1:-1}function l(t){return function(e){var i=e.nodeName.toLowerCase();return"input"===i&&e.type===t}}function c(t){return function(e){var i=e.nodeName.toLowerCase();return("input"===i||"button"===i)&&e.type===t}}function h(t){return o(function(e){return e=+e,o(function(i,n){for(var o,r=t([],i.length,e),s=r.length;s--;)i[o=r[s]]&&(i[o]=!(n[o]=i[o]))})})}function u(){}function p(t,e){var n,o,r,s,a,l,c,h=U[t+" "];if(h)return e?0:h.slice(0);for(a=t,l=[],c=w.preFilter;a;){(!n||(o=ue.exec(a)))&&(o&&(a=a.slice(o[0].length)||a),l.push(r=[])),n=!1,(o=pe.exec(a))&&(n=o.shift(),r.push({value:n,type:o[0].replace(he," ")}),a=a.slice(n.length));for(s in w.filter)!(o=ve[s].exec(a))||c[s]&&!(o=c[s](o))||(n=o.shift(),r.push({value:n,type:s,matches:o}),a=a.slice(n.length));if(!n)break}return e?a.length:a?i.error(t):U(t,l).slice(0)}function d(t){for(var e=0,i=t.length,n="";i>e;e++)n+=t[e].value;return n}function f(t,e,i){var n=e.dir,o=i&&"parentNode"===n,r=F++;return e.first?function(e,i,r){for(;e=e[n];)if(1===e.nodeType||o)return t(e,i,r)}:function(e,i,s){var a,l,c,h=V+" "+r;if(s){for(;e=e[n];)if((1===e.nodeType||o)&&t(e,i,s))return!0}else for(;e=e[n];)if(1===e.nodeType||o)if(c=e[z]||(e[z]={}),(l=c[n])&&l[0]===h){if((a=l[1])===!0||a===A)return a===!0}else if(l=c[n]=[h],l[1]=t(e,i,s)||A,l[1]===!0)return!0}}function g(t){return t.length>1?function(e,i,n){for(var o=t.length;o--;)if(!t[o](e,i,n))return!1;return!0}:t[0]}function m(t,e,i,n,o){for(var r,s=[],a=0,l=t.length,c=null!=e;l>a;a++)(r=t[a])&&(!i||i(r,n,o))&&(s.push(r),c&&e.push(a));return s}function v(t,e,i,n,r,s){return n&&!n[z]&&(n=v(n)),r&&!r[z]&&(r=v(r,s)),o(function(o,s,a,l){var c,h,u,p=[],d=[],f=s.length,g=o||_(e||"*",a.nodeType?[a]:a,[]),v=!t||!o&&e?g:m(g,p,t,a,l),y=i?r||(o?t:f||n)?[]:s:v;if(i&&i(v,y,a,l),n)for(c=m(y,d),n(c,[],a,l),h=c.length;h--;)(u=c[h])&&(y[d[h]]=!(v[d[h]]=u));if(o){if(r||t){if(r){for(c=[],h=y.length;h--;)(u=y[h])&&c.push(v[h]=u);r(null,y=[],c,l)}for(h=y.length;h--;)(u=y[h])&&(c=r?ie.call(o,u):p[h])>-1&&(o[c]=!(s[c]=u))}}else y=m(y===s?y.splice(f,y.length):y),r?r(null,s,y,l):te.apply(s,y)})}function y(t){for(var e,i,n,o=t.length,r=w.relative[t[0].type],s=r||w.relative[" "],a=r?1:0,l=f(function(t){return t===e},s,!0),c=f(function(t){return ie.call(e,t)>-1},s,!0),h=[function(t,i,n){return!r&&(n||i!==P)||((e=i).nodeType?l(t,i,n):c(t,i,n))}];o>a;a++)if(i=w.relative[t[a].type])h=[f(g(h),i)];else{if(i=w.filter[t[a].type].apply(null,t[a].matches),i[z]){for(n=++a;o>n&&!w.relative[t[n].type];n++);return v(a>1&&g(h),a>1&&d(t.slice(0,a-1).concat({value:" "===t[a-2].type?"*":""})).replace(he,"$1"),i,n>a&&y(t.slice(a,n)),o>n&&y(t=t.slice(n)),o>n&&d(t))}h.push(i)}return g(h)}function b(t,e){var n=0,r=e.length>0,s=t.length>0,a=function(o,a,l,c,h){var u,p,d,f=[],g=0,v="0",y=o&&[],b=null!=h,_=P,C=o||s&&w.find.TAG("*",h&&a.parentNode||a),E=V+=null==_?1:Math.random()||.1;for(b&&(P=a!==R&&a,A=n);null!=(u=C[v]);v++){if(s&&u){for(p=0;d=t[p++];)if(d(u,a,l)){c.push(u);break}b&&(V=E,A=++n)}r&&((u=!d&&u)&&g--,o&&y.push(u))}if(g+=v,r&&v!==g){for(p=0;d=e[p++];)d(y,f,a,l);if(o){if(g>0)for(;v--;)y[v]||f[v]||(f[v]=Q.call(c));f=m(f)}te.apply(c,f),b&&!o&&f.length>0&&g+e.length>1&&i.uniqueSort(c)}return b&&(V=E,P=_),y};return r?o(a):a}function _(t,e,n){for(var o=0,r=e.length;r>o;o++)i(t,e[o],n);return n}function C(t,e,i,n){var o,r,s,a,l,c=p(t);if(!n&&1===c.length){if(r=c[0]=c[0].slice(0),r.length>2&&"ID"===(s=r[0]).type&&T.getById&&9===e.nodeType&&O&&w.relative[r[1].type]){if(e=(w.find.ID(s.matches[0].replace(Te,Ae),e)||[])[0],!e)return i;t=t.slice(r.shift().value.length)}for(o=ve.needsContext.test(t)?0:r.length;o--&&(s=r[o],!w.relative[a=s.type]);)if((l=w.find[a])&&(n=l(s.matches[0].replace(Te,Ae),de.test(r[0].type)&&e.parentNode||e))){if(r.splice(o,1),t=n.length&&d(r),!t)return te.apply(i,n),i;break}}return I(t,c)(n,e,!O,i,de.test(t)),i}var E,T,A,w,D,x,I,P,j,S,R,N,O,L,M,k,H,z="sizzle"+-new Date,B=t.document,V=0,F=0,W=n(),U=n(),q=n(),$=!1,Y=function(t,e){return t===e?($=!0,0):0},G=typeof e,X=1<<31,K={}.hasOwnProperty,J=[],Q=J.pop,Z=J.push,te=J.push,ee=J.slice,ie=J.indexOf||function(t){for(var e=0,i=this.length;i>e;e++)if(this[e]===t)return e;return-1},ne="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",oe="[\\x20\\t\\r\\n\\f]",se="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ae=se.replace("w","w#"),le="\\["+oe+"*("+se+")"+oe+"*(?:([*^$|!~]?=)"+oe+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+ae+")|)|)"+oe+"*\\]",ce=":("+se+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+le.replace(3,8)+")*)|.*)\\)|)",he=RegExp("^"+oe+"+|((?:^|[^\\\\])(?:\\\\.)*)"+oe+"+$","g"),ue=RegExp("^"+oe+"*,"+oe+"*"),pe=RegExp("^"+oe+"*([>+~]|"+oe+")"+oe+"*"),de=RegExp(oe+"*[+~]"),fe=RegExp("="+oe+"*([^\\]'\"]*)"+oe+"*\\]","g"),ge=RegExp(ce),me=RegExp("^"+ae+"$"),ve={ID:RegExp("^#("+se+")"),CLASS:RegExp("^\\.("+se+")"),TAG:RegExp("^("+se.replace("w","w*")+")"),ATTR:RegExp("^"+le),PSEUDO:RegExp("^"+ce),CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+oe+"*(even|odd|(([+-]|)(\\d*)n|)"+oe+"*(?:([+-]|)"+oe+"*(\\d+)|))"+oe+"*\\)|)","i"),bool:RegExp("^(?:"+ne+")$","i"),needsContext:RegExp("^"+oe+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+oe+"*((?:-\\d)?\\d*)"+oe+"*\\)|)(?=[^-]|$)","i")},ye=/^[^{]+\{\s*\[native \w/,be=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,_e=/^(?:input|select|textarea|button)$/i,Ce=/^h\d$/i,Ee=/'|\\/g,Te=RegExp("\\\\([\\da-f]{1,6}"+oe+"?|("+oe+")|.)","ig"),Ae=function(t,e,i){var n="0x"+e-65536;return n!==n||i?e:0>n?String.fromCharCode(n+65536):String.fromCharCode(55296|n>>10,56320|1023&n)};try{te.apply(J=ee.call(B.childNodes),B.childNodes),J[B.childNodes.length].nodeType}catch(we){te={apply:J.length?function(t,e){Z.apply(t,ee.call(e))}:function(t,e){for(var i=t.length,n=0;t[i++]=e[n++];);t.length=i-1}}}x=i.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return e?"HTML"!==e.nodeName:!1},T=i.support={},S=i.setDocument=function(t){var i=t?t.ownerDocument||t:B,n=i.defaultView;return i!==R&&9===i.nodeType&&i.documentElement?(R=i,N=i.documentElement,O=!x(i),n&&n.attachEvent&&n!==n.top&&n.attachEvent("onbeforeunload",function(){S()}),T.attributes=r(function(t){return t.className="i",!t.getAttribute("className")}),T.getElementsByTagName=r(function(t){return t.appendChild(i.createComment("")),!t.getElementsByTagName("*").length}),T.getElementsByClassName=r(function(t){return t.innerHTML="<div class='a'></div><div class='a i'></div>",t.firstChild.className="i",2===t.getElementsByClassName("i").length}),T.getById=r(function(t){return N.appendChild(t).id=z,!i.getElementsByName||!i.getElementsByName(z).length}),T.getById?(w.find.ID=function(t,e){if(typeof e.getElementById!==G&&O){var i=e.getElementById(t);return i&&i.parentNode?[i]:[]}},w.filter.ID=function(t){var e=t.replace(Te,Ae);return function(t){return t.getAttribute("id")===e}}):(delete w.find.ID,w.filter.ID=function(t){var e=t.replace(Te,Ae);return function(t){var i=typeof t.getAttributeNode!==G&&t.getAttributeNode("id");return i&&i.value===e}}),w.find.TAG=T.getElementsByTagName?function(t,i){return typeof i.getElementsByTagName!==G?i.getElementsByTagName(t):e}:function(t,e){var i,n=[],o=0,r=e.getElementsByTagName(t);if("*"===t){for(;i=r[o++];)1===i.nodeType&&n.push(i);return n}return r},w.find.CLASS=T.getElementsByClassName&&function(t,i){return typeof i.getElementsByClassName!==G&&O?i.getElementsByClassName(t):e},M=[],L=[],(T.qsa=ye.test(i.querySelectorAll))&&(r(function(t){t.innerHTML="<select><option selected=''></option></select>",t.querySelectorAll("[selected]").length||L.push("\\["+oe+"*(?:value|"+ne+")"),t.querySelectorAll(":checked").length||L.push(":checked")}),r(function(t){var e=i.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("t",""),t.querySelectorAll("[t^='']").length&&L.push("[*^$]="+oe+"*(?:''|\"\")"),t.querySelectorAll(":enabled").length||L.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),L.push(",.*:")})),(T.matchesSelector=ye.test(k=N.webkitMatchesSelector||N.mozMatchesSelector||N.oMatchesSelector||N.msMatchesSelector))&&r(function(t){T.disconnectedMatch=k.call(t,"div"),k.call(t,"[s!='']:x"),M.push("!=",ce)}),L=L.length&&RegExp(L.join("|")),M=M.length&&RegExp(M.join("|")),H=ye.test(N.contains)||N.compareDocumentPosition?function(t,e){var i=9===t.nodeType?t.documentElement:t,n=e&&e.parentNode;return t===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):t.compareDocumentPosition&&16&t.compareDocumentPosition(n)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},Y=N.compareDocumentPosition?function(t,e){if(t===e)return $=!0,0;var n=e.compareDocumentPosition&&t.compareDocumentPosition&&t.compareDocumentPosition(e);return n?1&n||!T.sortDetached&&e.compareDocumentPosition(t)===n?t===i||H(B,t)?-1:e===i||H(B,e)?1:j?ie.call(j,t)-ie.call(j,e):0:4&n?-1:1:t.compareDocumentPosition?-1:1}:function(t,e){var n,o=0,r=t.parentNode,s=e.parentNode,l=[t],c=[e];if(t===e)return $=!0,0;if(!r||!s)return t===i?-1:e===i?1:r?-1:s?1:j?ie.call(j,t)-ie.call(j,e):0;if(r===s)return a(t,e);for(n=t;n=n.parentNode;)l.unshift(n);for(n=e;n=n.parentNode;)c.unshift(n);for(;l[o]===c[o];)o++;return o?a(l[o],c[o]):l[o]===B?-1:c[o]===B?1:0},i):R},i.matches=function(t,e){return i(t,null,null,e)},i.matchesSelector=function(t,e){if((t.ownerDocument||t)!==R&&S(t),e=e.replace(fe,"='$1']"),!(!T.matchesSelector||!O||M&&M.test(e)||L&&L.test(e)))try{var n=k.call(t,e);if(n||T.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(o){}return i(e,R,null,[t]).length>0},i.contains=function(t,e){return(t.ownerDocument||t)!==R&&S(t),H(t,e)},i.attr=function(t,i){(t.ownerDocument||t)!==R&&S(t);var n=w.attrHandle[i.toLowerCase()],o=n&&K.call(w.attrHandle,i.toLowerCase())?n(t,i,!O):e;return o===e?T.attributes||!O?t.getAttribute(i):(o=t.getAttributeNode(i))&&o.specified?o.value:null:o},i.error=function(t){throw Error("Syntax error, unrecognized expression: "+t)},i.uniqueSort=function(t){var e,i=[],n=0,o=0;if($=!T.detectDuplicates,j=!T.sortStable&&t.slice(0),t.sort(Y),$){for(;e=t[o++];)e===t[o]&&(n=i.push(o));for(;n--;)t.splice(i[n],1)}return t},D=i.getText=function(t){var e,i="",n=0,o=t.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)i+=D(t)}else if(3===o||4===o)return t.nodeValue}else for(;e=t[n];n++)i+=D(e);return i},w=i.selectors={cacheLength:50,createPseudo:o,match:ve,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(Te,Ae),t[3]=(t[4]||t[5]||"").replace(Te,Ae),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||i.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&i.error(t[0]),t},PSEUDO:function(t){var i,n=!t[5]&&t[2];return ve.CHILD.test(t[0])?null:(t[3]&&t[4]!==e?t[2]=t[4]:n&&ge.test(n)&&(i=p(n,!0))&&(i=n.indexOf(")",n.length-i)-n.length)&&(t[0]=t[0].slice(0,i),t[2]=n.slice(0,i)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(Te,Ae).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=W[t+" "];return e||(e=RegExp("(^|"+oe+")"+t+"("+oe+"|$)"))&&W(t,function(t){return e.test("string"==typeof t.className&&t.className||typeof t.getAttribute!==G&&t.getAttribute("class")||"")})},ATTR:function(t,e,n){return function(o){var r=i.attr(o,t);return null==r?"!="===e:e?(r+="","="===e?r===n:"!="===e?r!==n:"^="===e?n&&0===r.indexOf(n):"*="===e?n&&r.indexOf(n)>-1:"$="===e?n&&r.slice(-n.length)===n:"~="===e?(" "+r+" ").indexOf(n)>-1:"|="===e?r===n||r.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(t,e,i,n,o){var r="nth"!==t.slice(0,3),s="last"!==t.slice(-4),a="of-type"===e;return 1===n&&0===o?function(t){return!!t.parentNode}:function(e,i,l){var c,h,u,p,d,f,g=r!==s?"nextSibling":"previousSibling",m=e.parentNode,v=a&&e.nodeName.toLowerCase(),y=!l&&!a;if(m){if(r){for(;g;){for(u=e;u=u[g];)if(a?u.nodeName.toLowerCase()===v:1===u.nodeType)return!1;f=g="only"===t&&!f&&"nextSibling"}return!0}if(f=[s?m.firstChild:m.lastChild],s&&y){for(h=m[z]||(m[z]={}),c=h[t]||[],d=c[0]===V&&c[1],p=c[0]===V&&c[2],u=d&&m.childNodes[d];u=++d&&u&&u[g]||(p=d=0)||f.pop();)if(1===u.nodeType&&++p&&u===e){h[t]=[V,d,p];break}}else if(y&&(c=(e[z]||(e[z]={}))[t])&&c[0]===V)p=c[1];else for(;(u=++d&&u&&u[g]||(p=d=0)||f.pop())&&((a?u.nodeName.toLowerCase()!==v:1!==u.nodeType)||!++p||(y&&((u[z]||(u[z]={}))[t]=[V,p]),u!==e)););return p-=o,p===n||0===p%n&&p/n>=0}}},PSEUDO:function(t,e){var n,r=w.pseudos[t]||w.setFilters[t.toLowerCase()]||i.error("unsupported pseudo: "+t);return r[z]?r(e):r.length>1?(n=[t,t,"",e],w.setFilters.hasOwnProperty(t.toLowerCase())?o(function(t,i){for(var n,o=r(t,e),s=o.length;s--;)n=ie.call(t,o[s]),t[n]=!(i[n]=o[s])}):function(t){return r(t,0,n)}):r}},pseudos:{not:o(function(t){var e=[],i=[],n=I(t.replace(he,"$1"));return n[z]?o(function(t,e,i,o){for(var r,s=n(t,null,o,[]),a=t.length;a--;)(r=s[a])&&(t[a]=!(e[a]=r))}):function(t,o,r){return e[0]=t,n(e,null,r,i),!i.pop()}}),has:o(function(t){return function(e){return i(t,e).length>0}}),contains:o(function(t){return function(e){return(e.textContent||e.innerText||D(e)).indexOf(t)>-1}}),lang:o(function(t){return me.test(t||"")||i.error("unsupported lang: "+t),t=t.replace(Te,Ae).toLowerCase(),function(e){var i;do if(i=O?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return i=i.toLowerCase(),i===t||0===i.indexOf(t+"-");while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var i=t.location&&t.location.hash;return i&&i.slice(1)===e.id},root:function(t){return t===N},focus:function(t){return t===R.activeElement&&(!R.hasFocus||R.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return t.disabled===!1},disabled:function(t){return t.disabled===!0},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,t.selected===!0},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeName>"@"||3===t.nodeType||4===t.nodeType)return!1;return!0},parent:function(t){return!w.pseudos.empty(t)},header:function(t){return Ce.test(t.nodeName)},input:function(t){return _e.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||e.toLowerCase()===t.type)},first:h(function(){return[0]}),last:h(function(t,e){return[e-1]}),eq:h(function(t,e,i){return[0>i?i+e:i]}),even:h(function(t,e){for(var i=0;e>i;i+=2)t.push(i);return t}),odd:h(function(t,e){for(var i=1;e>i;i+=2)t.push(i);return t}),lt:h(function(t,e,i){for(var n=0>i?i+e:i;--n>=0;)t.push(n);return t}),gt:h(function(t,e,i){for(var n=0>i?i+e:i;e>++n;)t.push(n);return t})}},w.pseudos.nth=w.pseudos.eq;for(E in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})w.pseudos[E]=l(E);for(E in{submit:!0,reset:!0})w.pseudos[E]=c(E);
u.prototype=w.filters=w.pseudos,w.setFilters=new u,I=i.compile=function(t,e){var i,n=[],o=[],r=q[t+" "];if(!r){for(e||(e=p(t)),i=e.length;i--;)r=y(e[i]),r[z]?n.push(r):o.push(r);r=q(t,b(o,n))}return r},T.sortStable=z.split("").sort(Y).join("")===z,T.detectDuplicates=$,S(),T.sortDetached=r(function(t){return 1&t.compareDocumentPosition(R.createElement("div"))}),r(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||s("type|href|height|width",function(t,i,n){return n?e:t.getAttribute(i,"type"===i.toLowerCase()?1:2)}),T.attributes&&r(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||s("value",function(t,i,n){return n||"input"!==t.nodeName.toLowerCase()?e:t.defaultValue}),r(function(t){return null==t.getAttribute("disabled")})||s(ne,function(t,i,n){var o;return n?e:(o=t.getAttributeNode(i))&&o.specified?o.value:t[i]===!0?i.toLowerCase():null}),re.find=i,re.expr=i.selectors,re.expr[":"]=re.expr.pseudos,re.unique=i.uniqueSort,re.text=i.getText,re.isXMLDoc=i.isXML,re.contains=i.contains}(t);var fe={};re.Callbacks=function(t){t="string"==typeof t?fe[t]||n(t):re.extend({},t);var i,o,r,s,a,l,c=[],h=!t.once&&[],u=function(e){for(i=t.memory&&e,o=!0,l=s||0,s=0,a=c.length,r=!0;c&&a>l;l++)if(c[l].apply(e[0],e[1])===!1&&t.stopOnFalse){i=!1;break}r=!1,c&&(h?h.length&&u(h.shift()):i?c=[]:p.disable())},p={add:function(){if(c){var e=c.length;!function n(e){re.each(e,function(e,i){var o=re.type(i);"function"===o?t.unique&&p.has(i)||c.push(i):i&&i.length&&"string"!==o&&n(i)})}(arguments),r?a=c.length:i&&(s=e,u(i))}return this},remove:function(){return c&&re.each(arguments,function(t,e){for(var i;(i=re.inArray(e,c,i))>-1;)c.splice(i,1),r&&(a>=i&&a--,l>=i&&l--)}),this},has:function(t){return t?re.inArray(t,c)>-1:!(!c||!c.length)},empty:function(){return c=[],a=0,this},disable:function(){return c=h=i=e,this},disabled:function(){return!c},lock:function(){return h=e,i||p.disable(),this},locked:function(){return!h},fireWith:function(t,e){return!c||o&&!h||(e=e||[],e=[t,e.slice?e.slice():e],r?h.push(e):u(e)),this},fire:function(){return p.fireWith(this,arguments),this},fired:function(){return!!o}};return p},re.extend({Deferred:function(t){var e=[["resolve","done",re.Callbacks("once memory"),"resolved"],["reject","fail",re.Callbacks("once memory"),"rejected"],["notify","progress",re.Callbacks("memory")]],i="pending",n={state:function(){return i},always:function(){return o.done(arguments).fail(arguments),this},then:function(){var t=arguments;return re.Deferred(function(i){re.each(e,function(e,r){var s=r[0],a=re.isFunction(t[e])&&t[e];o[r[1]](function(){var t=a&&a.apply(this,arguments);t&&re.isFunction(t.promise)?t.promise().done(i.resolve).fail(i.reject).progress(i.notify):i[s+"With"](this===n?i.promise():this,a?[t]:arguments)})}),t=null}).promise()},promise:function(t){return null!=t?re.extend(t,n):n}},o={};return n.pipe=n.then,re.each(e,function(t,r){var s=r[2],a=r[3];n[r[1]]=s.add,a&&s.add(function(){i=a},e[1^t][2].disable,e[2][2].lock),o[r[0]]=function(){return o[r[0]+"With"](this===o?n:this,arguments),this},o[r[0]+"With"]=s.fireWith}),n.promise(o),t&&t.call(o,o),o},when:function(t){var e,i,n,o=0,r=te.call(arguments),s=r.length,a=1!==s||t&&re.isFunction(t.promise)?s:0,l=1===a?t:re.Deferred(),c=function(t,i,n){return function(o){i[t]=this,n[t]=arguments.length>1?te.call(arguments):o,n===e?l.notifyWith(i,n):--a||l.resolveWith(i,n)}};if(s>1)for(e=Array(s),i=Array(s),n=Array(s);s>o;o++)r[o]&&re.isFunction(r[o].promise)?r[o].promise().done(c(o,n,r)).fail(l.reject).progress(c(o,i,e)):--a;return a||l.resolveWith(n,r),l.promise()}}),re.support=function(e){var i=q.createElement("input"),n=q.createDocumentFragment(),o=q.createElement("div"),r=q.createElement("select"),s=r.appendChild(q.createElement("option"));return i.type?(i.type="checkbox",e.checkOn=""!==i.value,e.optSelected=s.selected,e.reliableMarginRight=!0,e.boxSizingReliable=!0,e.pixelPosition=!1,i.checked=!0,e.noCloneChecked=i.cloneNode(!0).checked,r.disabled=!0,e.optDisabled=!s.disabled,i=q.createElement("input"),i.value="t",i.type="radio",e.radioValue="t"===i.value,i.setAttribute("checked","t"),i.setAttribute("name","t"),n.appendChild(i),e.checkClone=n.cloneNode(!0).cloneNode(!0).lastChild.checked,e.focusinBubbles="onfocusin"in t,o.style.backgroundClip="content-box",o.cloneNode(!0).style.backgroundClip="",e.clearCloneStyle="content-box"===o.style.backgroundClip,re(function(){var i,n,r="padding:0;margin:0;border:0;display:block;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box",s=q.getElementsByTagName("body")[0];s&&(i=q.createElement("div"),i.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",s.appendChild(i).appendChild(o),o.innerHTML="",o.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%",re.swap(s,null!=s.style.zoom?{zoom:1}:{},function(){e.boxSizing=4===o.offsetWidth}),t.getComputedStyle&&(e.pixelPosition="1%"!==(t.getComputedStyle(o,null)||{}).top,e.boxSizingReliable="4px"===(t.getComputedStyle(o,null)||{width:"4px"}).width,n=o.appendChild(q.createElement("div")),n.style.cssText=o.style.cssText=r,n.style.marginRight=n.style.width="0",o.style.width="1px",e.reliableMarginRight=!parseFloat((t.getComputedStyle(n,null)||{}).marginRight)),s.removeChild(i))}),e):e}({});var ge,me,ve=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,ye=/([A-Z])/g;o.uid=1,o.accepts=function(t){return t.nodeType?1===t.nodeType||9===t.nodeType:!0},o.prototype={key:function(t){if(!o.accepts(t))return 0;var e={},i=t[this.expando];if(!i){i=o.uid++;try{e[this.expando]={value:i},Object.defineProperties(t,e)}catch(n){e[this.expando]=i,re.extend(t,e)}}return this.cache[i]||(this.cache[i]={}),i},set:function(t,e,i){var n,o=this.key(t),r=this.cache[o];if("string"==typeof e)r[e]=i;else if(re.isEmptyObject(r))re.extend(this.cache[o],e);else for(n in e)r[n]=e[n];return r},get:function(t,i){var n=this.cache[this.key(t)];return i===e?n:n[i]},access:function(t,i,n){var o;return i===e||i&&"string"==typeof i&&n===e?(o=this.get(t,i),o!==e?o:this.get(t,re.camelCase(i))):(this.set(t,i,n),n!==e?n:i)},remove:function(t,i){var n,o,r,s=this.key(t),a=this.cache[s];if(i===e)this.cache[s]={};else{re.isArray(i)?o=i.concat(i.map(re.camelCase)):(r=re.camelCase(i),i in a?o=[i,r]:(o=r,o=o in a?[o]:o.match(ae)||[])),n=o.length;for(;n--;)delete a[o[n]]}},hasData:function(t){return!re.isEmptyObject(this.cache[t[this.expando]]||{})},discard:function(t){t[this.expando]&&delete this.cache[t[this.expando]]}},ge=new o,me=new o,re.extend({acceptData:o.accepts,hasData:function(t){return ge.hasData(t)||me.hasData(t)},data:function(t,e,i){return ge.access(t,e,i)},removeData:function(t,e){ge.remove(t,e)},_data:function(t,e,i){return me.access(t,e,i)},_removeData:function(t,e){me.remove(t,e)}}),re.fn.extend({data:function(t,i){var n,o,s=this[0],a=0,l=null;if(t===e){if(this.length&&(l=ge.get(s),1===s.nodeType&&!me.get(s,"hasDataAttrs"))){for(n=s.attributes;n.length>a;a++)o=n[a].name,0===o.indexOf("data-")&&(o=re.camelCase(o.slice(5)),r(s,o,l[o]));me.set(s,"hasDataAttrs",!0)}return l}return"object"==typeof t?this.each(function(){ge.set(this,t)}):re.access(this,function(i){var n,o=re.camelCase(t);if(s&&i===e){if(n=ge.get(s,t),n!==e)return n;if(n=ge.get(s,o),n!==e)return n;if(n=r(s,o,e),n!==e)return n}else this.each(function(){var n=ge.get(this,o);ge.set(this,o,i),-1!==t.indexOf("-")&&n!==e&&ge.set(this,t,i)})},null,i,arguments.length>1,null,!0)},removeData:function(t){return this.each(function(){ge.remove(this,t)})}}),re.extend({queue:function(t,i,n){var o;return t?(i=(i||"fx")+"queue",o=me.get(t,i),n&&(!o||re.isArray(n)?o=me.access(t,i,re.makeArray(n)):o.push(n)),o||[]):e},dequeue:function(t,e){e=e||"fx";var i=re.queue(t,e),n=i.length,o=i.shift(),r=re._queueHooks(t,e),s=function(){re.dequeue(t,e)};"inprogress"===o&&(o=i.shift(),n--),o&&("fx"===e&&i.unshift("inprogress"),delete r.stop,o.call(t,s,r)),!n&&r&&r.empty.fire()},_queueHooks:function(t,e){var i=e+"queueHooks";return me.get(t,i)||me.access(t,i,{empty:re.Callbacks("once memory").add(function(){me.remove(t,[e+"queue",i])})})}}),re.fn.extend({queue:function(t,i){var n=2;return"string"!=typeof t&&(i=t,t="fx",n--),n>arguments.length?re.queue(this[0],t):i===e?this:this.each(function(){var e=re.queue(this,t,i);re._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&re.dequeue(this,t)})},dequeue:function(t){return this.each(function(){re.dequeue(this,t)})},delay:function(t,e){return t=re.fx?re.fx.speeds[t]||t:t,e=e||"fx",this.queue(e,function(e,i){var n=setTimeout(e,t);i.stop=function(){clearTimeout(n)}})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,i){var n,o=1,r=re.Deferred(),s=this,a=this.length,l=function(){--o||r.resolveWith(s,[s])};for("string"!=typeof t&&(i=t,t=e),t=t||"fx";a--;)n=me.get(s[a],t+"queueHooks"),n&&n.empty&&(o++,n.empty.add(l));return l(),r.promise(i)}});var be,_e,Ce=/[\t\r\n\f]/g,Ee=/\r/g,Te=/^(?:input|select|textarea|button)$/i;re.fn.extend({attr:function(t,e){return re.access(this,re.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){re.removeAttr(this,t)})},prop:function(t,e){return re.access(this,re.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each(function(){delete this[re.propFix[t]||t]})},addClass:function(t){var e,i,n,o,r,s=0,a=this.length,l="string"==typeof t&&t;if(re.isFunction(t))return this.each(function(e){re(this).addClass(t.call(this,e,this.className))});if(l)for(e=(t||"").match(ae)||[];a>s;s++)if(i=this[s],n=1===i.nodeType&&(i.className?(" "+i.className+" ").replace(Ce," "):" ")){for(r=0;o=e[r++];)0>n.indexOf(" "+o+" ")&&(n+=o+" ");i.className=re.trim(n)}return this},removeClass:function(t){var e,i,n,o,r,s=0,a=this.length,l=0===arguments.length||"string"==typeof t&&t;if(re.isFunction(t))return this.each(function(e){re(this).removeClass(t.call(this,e,this.className))});if(l)for(e=(t||"").match(ae)||[];a>s;s++)if(i=this[s],n=1===i.nodeType&&(i.className?(" "+i.className+" ").replace(Ce," "):"")){for(r=0;o=e[r++];)for(;n.indexOf(" "+o+" ")>=0;)n=n.replace(" "+o+" "," ");i.className=t?re.trim(n):""}return this},toggleClass:function(t,e){var i=typeof t;return"boolean"==typeof e&&"string"===i?e?this.addClass(t):this.removeClass(t):re.isFunction(t)?this.each(function(i){re(this).toggleClass(t.call(this,i,this.className,e),e)}):this.each(function(){if("string"===i)for(var e,n=0,o=re(this),r=t.match(ae)||[];e=r[n++];)o.hasClass(e)?o.removeClass(e):o.addClass(e);else(i===W||"boolean"===i)&&(this.className&&me.set(this,"__className__",this.className),this.className=this.className||t===!1?"":me.get(this,"__className__")||"")})},hasClass:function(t){for(var e=" "+t+" ",i=0,n=this.length;n>i;i++)if(1===this[i].nodeType&&(" "+this[i].className+" ").replace(Ce," ").indexOf(e)>=0)return!0;return!1},val:function(t){var i,n,o,r=this[0];return arguments.length?(o=re.isFunction(t),this.each(function(n){var r;1===this.nodeType&&(r=o?t.call(this,n,re(this).val()):t,null==r?r="":"number"==typeof r?r+="":re.isArray(r)&&(r=re.map(r,function(t){return null==t?"":t+""})),i=re.valHooks[this.type]||re.valHooks[this.nodeName.toLowerCase()],i&&"set"in i&&i.set(this,r,"value")!==e||(this.value=r))})):r?(i=re.valHooks[r.type]||re.valHooks[r.nodeName.toLowerCase()],i&&"get"in i&&(n=i.get(r,"value"))!==e?n:(n=r.value,"string"==typeof n?n.replace(Ee,""):null==n?"":n)):void 0}}),re.extend({valHooks:{option:{get:function(t){var e=t.attributes.value;return!e||e.specified?t.value:t.text}},select:{get:function(t){for(var e,i,n=t.options,o=t.selectedIndex,r="select-one"===t.type||0>o,s=r?null:[],a=r?o+1:n.length,l=0>o?a:r?o:0;a>l;l++)if(i=n[l],!(!i.selected&&l!==o||(re.support.optDisabled?i.disabled:null!==i.getAttribute("disabled"))||i.parentNode.disabled&&re.nodeName(i.parentNode,"optgroup"))){if(e=re(i).val(),r)return e;s.push(e)}return s},set:function(t,e){for(var i,n,o=t.options,r=re.makeArray(e),s=o.length;s--;)n=o[s],(n.selected=re.inArray(re(n).val(),r)>=0)&&(i=!0);return i||(t.selectedIndex=-1),r}}},attr:function(t,i,n){var o,r,s=t.nodeType;return t&&3!==s&&8!==s&&2!==s?typeof t.getAttribute===W?re.prop(t,i,n):(1===s&&re.isXMLDoc(t)||(i=i.toLowerCase(),o=re.attrHooks[i]||(re.expr.match.bool.test(i)?_e:be)),n===e?o&&"get"in o&&null!==(r=o.get(t,i))?r:(r=re.find.attr(t,i),null==r?e:r):null!==n?o&&"set"in o&&(r=o.set(t,n,i))!==e?r:(t.setAttribute(i,n+""),n):(re.removeAttr(t,i),e)):void 0},removeAttr:function(t,e){var i,n,o=0,r=e&&e.match(ae);if(r&&1===t.nodeType)for(;i=r[o++];)n=re.propFix[i]||i,re.expr.match.bool.test(i)&&(t[n]=!1),t.removeAttribute(i)},attrHooks:{type:{set:function(t,e){if(!re.support.radioValue&&"radio"===e&&re.nodeName(t,"input")){var i=t.value;return t.setAttribute("type",e),i&&(t.value=i),e}}}},propFix:{"for":"htmlFor","class":"className"},prop:function(t,i,n){var o,r,s,a=t.nodeType;return t&&3!==a&&8!==a&&2!==a?(s=1!==a||!re.isXMLDoc(t),s&&(i=re.propFix[i]||i,r=re.propHooks[i]),n!==e?r&&"set"in r&&(o=r.set(t,n,i))!==e?o:t[i]=n:r&&"get"in r&&null!==(o=r.get(t,i))?o:t[i]):void 0},propHooks:{tabIndex:{get:function(t){return t.hasAttribute("tabindex")||Te.test(t.nodeName)||t.href?t.tabIndex:-1}}}}),_e={set:function(t,e,i){return e===!1?re.removeAttr(t,i):t.setAttribute(i,i),i}},re.each(re.expr.match.bool.source.match(/\w+/g),function(t,i){var n=re.expr.attrHandle[i]||re.find.attr;re.expr.attrHandle[i]=function(t,i,o){var r=re.expr.attrHandle[i],s=o?e:(re.expr.attrHandle[i]=e)!=n(t,i,o)?i.toLowerCase():null;return re.expr.attrHandle[i]=r,s}}),re.support.optSelected||(re.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null}}),re.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){re.propFix[this.toLowerCase()]=this}),re.each(["radio","checkbox"],function(){re.valHooks[this]={set:function(t,i){return re.isArray(i)?t.checked=re.inArray(re(t).val(),i)>=0:e}},re.support.checkOn||(re.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})});var Ae=/^key/,we=/^(?:mouse|contextmenu)|click/,De=/^(?:focusinfocus|focusoutblur)$/,xe=/^([^.]*)(?:\.(.+)|)$/;re.event={global:{},add:function(t,i,n,o,r){var s,a,l,c,h,u,p,d,f,g,m,v=me.get(t);if(v){for(n.handler&&(s=n,n=s.handler,r=s.selector),n.guid||(n.guid=re.guid++),(c=v.events)||(c=v.events={}),(a=v.handle)||(a=v.handle=function(t){return typeof re===W||t&&re.event.triggered===t.type?e:re.event.dispatch.apply(a.elem,arguments)},a.elem=t),i=(i||"").match(ae)||[""],h=i.length;h--;)l=xe.exec(i[h])||[],f=m=l[1],g=(l[2]||"").split(".").sort(),f&&(p=re.event.special[f]||{},f=(r?p.delegateType:p.bindType)||f,p=re.event.special[f]||{},u=re.extend({type:f,origType:m,data:o,handler:n,guid:n.guid,selector:r,needsContext:r&&re.expr.match.needsContext.test(r),namespace:g.join(".")},s),(d=c[f])||(d=c[f]=[],d.delegateCount=0,p.setup&&p.setup.call(t,o,g,a)!==!1||t.addEventListener&&t.addEventListener(f,a,!1)),p.add&&(p.add.call(t,u),u.handler.guid||(u.handler.guid=n.guid)),r?d.splice(d.delegateCount++,0,u):d.push(u),re.event.global[f]=!0);t=null}},remove:function(t,e,i,n,o){var r,s,a,l,c,h,u,p,d,f,g,m=me.hasData(t)&&me.get(t);if(m&&(l=m.events)){for(e=(e||"").match(ae)||[""],c=e.length;c--;)if(a=xe.exec(e[c])||[],d=g=a[1],f=(a[2]||"").split(".").sort(),d){for(u=re.event.special[d]||{},d=(n?u.delegateType:u.bindType)||d,p=l[d]||[],a=a[2]&&RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=r=p.length;r--;)h=p[r],!o&&g!==h.origType||i&&i.guid!==h.guid||a&&!a.test(h.namespace)||n&&n!==h.selector&&("**"!==n||!h.selector)||(p.splice(r,1),h.selector&&p.delegateCount--,u.remove&&u.remove.call(t,h));s&&!p.length&&(u.teardown&&u.teardown.call(t,f,m.handle)!==!1||re.removeEvent(t,d,m.handle),delete l[d])}else for(d in l)re.event.remove(t,d+e[c],i,n,!0);re.isEmptyObject(l)&&(delete m.handle,me.remove(t,"events"))}},trigger:function(i,n,o,r){var s,a,l,c,h,u,p,d=[o||q],f=ne.call(i,"type")?i.type:i,g=ne.call(i,"namespace")?i.namespace.split("."):[];if(a=l=o=o||q,3!==o.nodeType&&8!==o.nodeType&&!De.test(f+re.event.triggered)&&(f.indexOf(".")>=0&&(g=f.split("."),f=g.shift(),g.sort()),h=0>f.indexOf(":")&&"on"+f,i=i[re.expando]?i:new re.Event(f,"object"==typeof i&&i),i.isTrigger=r?2:3,i.namespace=g.join("."),i.namespace_re=i.namespace?RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,i.result=e,i.target||(i.target=o),n=null==n?[i]:re.makeArray(n,[i]),p=re.event.special[f]||{},r||!p.trigger||p.trigger.apply(o,n)!==!1)){if(!r&&!p.noBubble&&!re.isWindow(o)){for(c=p.delegateType||f,De.test(c+f)||(a=a.parentNode);a;a=a.parentNode)d.push(a),l=a;l===(o.ownerDocument||q)&&d.push(l.defaultView||l.parentWindow||t)}for(s=0;(a=d[s++])&&!i.isPropagationStopped();)i.type=s>1?c:p.bindType||f,u=(me.get(a,"events")||{})[i.type]&&me.get(a,"handle"),u&&u.apply(a,n),u=h&&a[h],u&&re.acceptData(a)&&u.apply&&u.apply(a,n)===!1&&i.preventDefault();return i.type=f,r||i.isDefaultPrevented()||p._default&&p._default.apply(d.pop(),n)!==!1||!re.acceptData(o)||h&&re.isFunction(o[f])&&!re.isWindow(o)&&(l=o[h],l&&(o[h]=null),re.event.triggered=f,o[f](),re.event.triggered=e,l&&(o[h]=l)),i.result}},dispatch:function(t){t=re.event.fix(t);var i,n,o,r,s,a=[],l=te.call(arguments),c=(me.get(this,"events")||{})[t.type]||[],h=re.event.special[t.type]||{};if(l[0]=t,t.delegateTarget=this,!h.preDispatch||h.preDispatch.call(this,t)!==!1){for(a=re.event.handlers.call(this,t,c),i=0;(r=a[i++])&&!t.isPropagationStopped();)for(t.currentTarget=r.elem,n=0;(s=r.handlers[n++])&&!t.isImmediatePropagationStopped();)(!t.namespace_re||t.namespace_re.test(s.namespace))&&(t.handleObj=s,t.data=s.data,o=((re.event.special[s.origType]||{}).handle||s.handler).apply(r.elem,l),o!==e&&(t.result=o)===!1&&(t.preventDefault(),t.stopPropagation()));return h.postDispatch&&h.postDispatch.call(this,t),t.result}},handlers:function(t,i){var n,o,r,s,a=[],l=i.delegateCount,c=t.target;if(l&&c.nodeType&&(!t.button||"click"!==t.type))for(;c!==this;c=c.parentNode||this)if(c.disabled!==!0||"click"!==t.type){for(o=[],n=0;l>n;n++)s=i[n],r=s.selector+" ",o[r]===e&&(o[r]=s.needsContext?re(r,this).index(c)>=0:re.find(r,this,null,[c]).length),o[r]&&o.push(s);o.length&&a.push({elem:c,handlers:o})}return i.length>l&&a.push({elem:this,handlers:i.slice(l)}),a},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,i){var n,o,r,s=i.button;return null==t.pageX&&null!=i.clientX&&(n=t.target.ownerDocument||q,o=n.documentElement,r=n.body,t.pageX=i.clientX+(o&&o.scrollLeft||r&&r.scrollLeft||0)-(o&&o.clientLeft||r&&r.clientLeft||0),t.pageY=i.clientY+(o&&o.scrollTop||r&&r.scrollTop||0)-(o&&o.clientTop||r&&r.clientTop||0)),t.which||s===e||(t.which=1&s?1:2&s?3:4&s?2:0),t}},fix:function(t){if(t[re.expando])return t;var e,i,n,o=t.type,r=t,s=this.fixHooks[o];for(s||(this.fixHooks[o]=s=we.test(o)?this.mouseHooks:Ae.test(o)?this.keyHooks:{}),n=s.props?this.props.concat(s.props):this.props,t=new re.Event(r),e=n.length;e--;)i=n[e],t[i]=r[i];return t.target||(t.target=q),3===t.target.nodeType&&(t.target=t.target.parentNode),s.filter?s.filter(t,r):t},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==l()&&this.focus?(this.focus(),!1):e},delegateType:"focusin"},blur:{trigger:function(){return this===l()&&this.blur?(this.blur(),!1):e},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&re.nodeName(this,"input")?(this.click(),!1):e},_default:function(t){return re.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){t.result!==e&&(t.originalEvent.returnValue=t.result)}}},simulate:function(t,e,i,n){var o=re.extend(new re.Event,i,{type:t,isSimulated:!0,originalEvent:{}});n?re.event.trigger(o,null,e):re.event.dispatch.call(e,o),o.isDefaultPrevented()&&i.preventDefault()}},re.removeEvent=function(t,e,i){t.removeEventListener&&t.removeEventListener(e,i,!1)},re.Event=function(t,i){return this instanceof re.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||t.getPreventDefault&&t.getPreventDefault()?s:a):this.type=t,i&&re.extend(this,i),this.timeStamp=t&&t.timeStamp||re.now(),this[re.expando]=!0,e):new re.Event(t,i)},re.Event.prototype={isDefaultPrevented:a,isPropagationStopped:a,isImmediatePropagationStopped:a,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=s,t&&t.preventDefault&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=s,t&&t.stopPropagation&&t.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=s,this.stopPropagation()}},re.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(t,e){re.event.special[t]={delegateType:e,bindType:e,handle:function(t){var i,n=this,o=t.relatedTarget,r=t.handleObj;return(!o||o!==n&&!re.contains(n,o))&&(t.type=r.origType,i=r.handler.apply(this,arguments),t.type=e),i}}}),re.support.focusinBubbles||re.each({focus:"focusin",blur:"focusout"},function(t,e){var i=0,n=function(t){re.event.simulate(e,t.target,re.event.fix(t),!0)};re.event.special[e]={setup:function(){0===i++&&q.addEventListener(t,n,!0)},teardown:function(){0===--i&&q.removeEventListener(t,n,!0)}}}),re.fn.extend({on:function(t,i,n,o,r){var s,l;if("object"==typeof t){"string"!=typeof i&&(n=n||i,i=e);for(l in t)this.on(l,i,n,t[l],r);return this}if(null==n&&null==o?(o=i,n=i=e):null==o&&("string"==typeof i?(o=n,n=e):(o=n,n=i,i=e)),o===!1)o=a;else if(!o)return this;return 1===r&&(s=o,o=function(t){return re().off(t),s.apply(this,arguments)},o.guid=s.guid||(s.guid=re.guid++)),this.each(function(){re.event.add(this,t,o,n,i)})},one:function(t,e,i,n){return this.on(t,e,i,n,1)},off:function(t,i,n){var o,r;if(t&&t.preventDefault&&t.handleObj)return o=t.handleObj,re(t.delegateTarget).off(o.namespace?o.origType+"."+o.namespace:o.origType,o.selector,o.handler),this;if("object"==typeof t){for(r in t)this.off(r,i,t[r]);return this}return(i===!1||"function"==typeof i)&&(n=i,i=e),n===!1&&(n=a),this.each(function(){re.event.remove(this,t,n,i)})},trigger:function(t,e){return this.each(function(){re.event.trigger(t,e,this)})},triggerHandler:function(t,i){var n=this[0];return n?re.event.trigger(t,i,n,!0):e}});var Ie=/^.[^:#\[\.,]*$/,Pe=/^(?:parents|prev(?:Until|All))/,je=re.expr.match.needsContext,Se={children:!0,contents:!0,next:!0,prev:!0};re.fn.extend({find:function(t){var e,i=[],n=this,o=n.length;if("string"!=typeof t)return this.pushStack(re(t).filter(function(){for(e=0;o>e;e++)if(re.contains(n[e],this))return!0}));for(e=0;o>e;e++)re.find(t,n[e],i);return i=this.pushStack(o>1?re.unique(i):i),i.selector=this.selector?this.selector+" "+t:t,i},has:function(t){var e=re(t,this),i=e.length;return this.filter(function(){for(var t=0;i>t;t++)if(re.contains(this,e[t]))return!0})},not:function(t){return this.pushStack(h(this,t||[],!0))},filter:function(t){return this.pushStack(h(this,t||[],!1))},is:function(t){return!!h(this,"string"==typeof t&&je.test(t)?re(t):t||[],!1).length},closest:function(t,e){for(var i,n=0,o=this.length,r=[],s=je.test(t)||"string"!=typeof t?re(t,e||this.context):0;o>n;n++)for(i=this[n];i&&i!==e;i=i.parentNode)if(11>i.nodeType&&(s?s.index(i)>-1:1===i.nodeType&&re.find.matchesSelector(i,t))){i=r.push(i);break}return this.pushStack(r.length>1?re.unique(r):r)},index:function(t){return t?"string"==typeof t?ee.call(re(t),this[0]):ee.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){var i="string"==typeof t?re(t,e):re.makeArray(t&&t.nodeType?[t]:t),n=re.merge(this.get(),i);return this.pushStack(re.unique(n))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),re.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return re.dir(t,"parentNode")},parentsUntil:function(t,e,i){return re.dir(t,"parentNode",i)},next:function(t){return c(t,"nextSibling")},prev:function(t){return c(t,"previousSibling")},nextAll:function(t){return re.dir(t,"nextSibling")},prevAll:function(t){return re.dir(t,"previousSibling")},nextUntil:function(t,e,i){return re.dir(t,"nextSibling",i)},prevUntil:function(t,e,i){return re.dir(t,"previousSibling",i)},siblings:function(t){return re.sibling((t.parentNode||{}).firstChild,t)},children:function(t){return re.sibling(t.firstChild)},contents:function(t){return t.contentDocument||re.merge([],t.childNodes)}},function(t,e){re.fn[t]=function(i,n){var o=re.map(this,e,i);return"Until"!==t.slice(-5)&&(n=i),n&&"string"==typeof n&&(o=re.filter(n,o)),this.length>1&&(Se[t]||re.unique(o),Pe.test(t)&&o.reverse()),this.pushStack(o)}}),re.extend({filter:function(t,e,i){var n=e[0];return i&&(t=":not("+t+")"),1===e.length&&1===n.nodeType?re.find.matchesSelector(n,t)?[n]:[]:re.find.matches(t,re.grep(e,function(t){return 1===t.nodeType}))},dir:function(t,i,n){for(var o=[],r=n!==e;(t=t[i])&&9!==t.nodeType;)if(1===t.nodeType){if(r&&re(t).is(n))break;o.push(t)}return o},sibling:function(t,e){for(var i=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&i.push(t);return i}});var Re=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Ne=/<([\w:]+)/,Oe=/<|&#?\w+;/,Le=/<(?:script|style|link)/i,Me=/^(?:checkbox|radio)$/i,ke=/checked\s*(?:[^=]|=\s*.checked.)/i,He=/^$|\/(?:java|ecma)script/i,ze=/^true\/(.*)/,Be=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Ve={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Ve.optgroup=Ve.option,Ve.tbody=Ve.tfoot=Ve.colgroup=Ve.caption=Ve.thead,Ve.th=Ve.td,re.fn.extend({text:function(t){return re.access(this,function(t){return t===e?re.text(this):this.empty().append((this[0]&&this[0].ownerDocument||q).createTextNode(t))},null,t,arguments.length)},append:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=u(this,t);e.appendChild(t)}})},prepend:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=u(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},remove:function(t,e){for(var i,n=t?re.filter(t,this):this,o=0;null!=(i=n[o]);o++)e||1!==i.nodeType||re.cleanData(m(i)),i.parentNode&&(e&&re.contains(i.ownerDocument,i)&&f(m(i,"script")),i.parentNode.removeChild(i));return this},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(re.cleanData(m(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null==t?!1:t,e=null==e?t:e,this.map(function(){return re.clone(this,t,e)})},html:function(t){return re.access(this,function(t){var i=this[0]||{},n=0,o=this.length;if(t===e&&1===i.nodeType)return i.innerHTML;if("string"==typeof t&&!Le.test(t)&&!Ve[(Ne.exec(t)||["",""])[1].toLowerCase()]){t=t.replace(Re,"<$1></$2>");try{for(;o>n;n++)i=this[n]||{},1===i.nodeType&&(re.cleanData(m(i,!1)),i.innerHTML=t);i=0}catch(r){}}i&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=re.map(this,function(t){return[t.nextSibling,t.parentNode]}),e=0;return this.domManip(arguments,function(i){var n=t[e++],o=t[e++];o&&(n&&n.parentNode!==o&&(n=this.nextSibling),re(this).remove(),o.insertBefore(i,n))},!0),e?this:this.remove()},detach:function(t){return this.remove(t,!0)},domManip:function(t,e,i){t=Q.apply([],t);var n,o,r,s,a,l,c=0,h=this.length,u=this,f=h-1,g=t[0],v=re.isFunction(g);if(v||!(1>=h||"string"!=typeof g||re.support.checkClone)&&ke.test(g))return this.each(function(n){var o=u.eq(n);v&&(t[0]=g.call(this,n,o.html())),o.domManip(t,e,i)});if(h&&(n=re.buildFragment(t,this[0].ownerDocument,!1,!i&&this),o=n.firstChild,1===n.childNodes.length&&(n=o),o)){for(r=re.map(m(n,"script"),p),s=r.length;h>c;c++)a=n,c!==f&&(a=re.clone(a,!0,!0),s&&re.merge(r,m(a,"script"))),e.call(this[c],a,c);if(s)for(l=r[r.length-1].ownerDocument,re.map(r,d),c=0;s>c;c++)a=r[c],He.test(a.type||"")&&!me.access(a,"globalEval")&&re.contains(l,a)&&(a.src?re._evalUrl(a.src):re.globalEval(a.textContent.replace(Be,"")))}return this}}),re.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){re.fn[t]=function(t){for(var i,n=[],o=re(t),r=o.length-1,s=0;r>=s;s++)i=s===r?this:this.clone(!0),re(o[s])[e](i),Z.apply(n,i.get());return this.pushStack(n)}}),re.extend({clone:function(t,e,i){var n,o,r,s,a=t.cloneNode(!0),l=re.contains(t.ownerDocument,t);if(!(re.support.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||re.isXMLDoc(t)))for(s=m(a),r=m(t),n=0,o=r.length;o>n;n++)v(r[n],s[n]);if(e)if(i)for(r=r||m(t),s=s||m(a),n=0,o=r.length;o>n;n++)g(r[n],s[n]);else g(t,a);return s=m(a,"script"),s.length>0&&f(s,!l&&m(t,"script")),a},buildFragment:function(t,e,i,n){for(var o,r,s,a,l,c,h=0,u=t.length,p=e.createDocumentFragment(),d=[];u>h;h++)if(o=t[h],o||0===o)if("object"===re.type(o))re.merge(d,o.nodeType?[o]:o);else if(Oe.test(o)){for(r=r||p.appendChild(e.createElement("div")),s=(Ne.exec(o)||["",""])[1].toLowerCase(),a=Ve[s]||Ve._default,r.innerHTML=a[1]+o.replace(Re,"<$1></$2>")+a[2],c=a[0];c--;)r=r.lastChild;re.merge(d,r.childNodes),r=p.firstChild,r.textContent=""}else d.push(e.createTextNode(o));for(p.textContent="",h=0;o=d[h++];)if((!n||-1===re.inArray(o,n))&&(l=re.contains(o.ownerDocument,o),r=m(p.appendChild(o),"script"),l&&f(r),i))for(c=0;o=r[c++];)He.test(o.type||"")&&i.push(o);return p},cleanData:function(t){for(var i,n,r,s,a,l,c=re.event.special,h=0;(n=t[h])!==e;h++){if(o.accepts(n)&&(a=n[me.expando],a&&(i=me.cache[a]))){if(r=Object.keys(i.events||{}),r.length)for(l=0;(s=r[l])!==e;l++)c[s]?re.event.remove(n,s):re.removeEvent(n,s,i.handle);me.cache[a]&&delete me.cache[a]}delete ge.cache[n[ge.expando]]}},_evalUrl:function(t){return re.ajax({url:t,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})}}),re.fn.extend({wrapAll:function(t){var e;return re.isFunction(t)?this.each(function(e){re(this).wrapAll(t.call(this,e))}):(this[0]&&(e=re(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this)},wrapInner:function(t){return re.isFunction(t)?this.each(function(e){re(this).wrapInner(t.call(this,e))}):this.each(function(){var e=re(this),i=e.contents();i.length?i.wrapAll(t):e.append(t)})},wrap:function(t){var e=re.isFunction(t);return this.each(function(i){re(this).wrapAll(e?t.call(this,i):t)})},unwrap:function(){return this.parent().each(function(){re.nodeName(this,"body")||re(this).replaceWith(this.childNodes)}).end()}});var Fe,We,Ue=/^(none|table(?!-c[ea]).+)/,qe=/^margin/,$e=RegExp("^("+se+")(.*)$","i"),Ye=RegExp("^("+se+")(?!px)[a-z%]+$","i"),Ge=RegExp("^([+-])=("+se+")","i"),Xe={BODY:"block"},Ke={position:"absolute",visibility:"hidden",display:"block"},Je={letterSpacing:0,fontWeight:400},Qe=["Top","Right","Bottom","Left"],Ze=["Webkit","O","Moz","ms"];re.fn.extend({css:function(t,i){return re.access(this,function(t,i,n){var o,r,s={},a=0;if(re.isArray(i)){for(o=_(t),r=i.length;r>a;a++)s[i[a]]=re.css(t,i[a],!1,o);return s
}return n!==e?re.style(t,i,n):re.css(t,i)},t,i,arguments.length>1)},show:function(){return C(this,!0)},hide:function(){return C(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){b(this)?re(this).show():re(this).hide()})}}),re.extend({cssHooks:{opacity:{get:function(t,e){if(e){var i=Fe(t,"opacity");return""===i?"1":i}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(t,i,n,o){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var r,s,a,l=re.camelCase(i),c=t.style;return i=re.cssProps[l]||(re.cssProps[l]=y(c,l)),a=re.cssHooks[i]||re.cssHooks[l],n===e?a&&"get"in a&&(r=a.get(t,!1,o))!==e?r:c[i]:(s=typeof n,"string"===s&&(r=Ge.exec(n))&&(n=(r[1]+1)*r[2]+parseFloat(re.css(t,i)),s="number"),null==n||"number"===s&&isNaN(n)||("number"!==s||re.cssNumber[l]||(n+="px"),re.support.clearCloneStyle||""!==n||0!==i.indexOf("background")||(c[i]="inherit"),a&&"set"in a&&(n=a.set(t,n,o))===e||(c[i]=n)),e)}},css:function(t,i,n,o){var r,s,a,l=re.camelCase(i);return i=re.cssProps[l]||(re.cssProps[l]=y(t.style,l)),a=re.cssHooks[i]||re.cssHooks[l],a&&"get"in a&&(r=a.get(t,!0,n)),r===e&&(r=Fe(t,i,o)),"normal"===r&&i in Je&&(r=Je[i]),""===n||n?(s=parseFloat(r),n===!0||re.isNumeric(s)?s||0:r):r}}),Fe=function(t,i,n){var o,r,s,a=n||_(t),l=a?a.getPropertyValue(i)||a[i]:e,c=t.style;return a&&(""!==l||re.contains(t.ownerDocument,t)||(l=re.style(t,i)),Ye.test(l)&&qe.test(i)&&(o=c.width,r=c.minWidth,s=c.maxWidth,c.minWidth=c.maxWidth=c.width=l,l=a.width,c.width=o,c.minWidth=r,c.maxWidth=s)),l},re.each(["height","width"],function(t,i){re.cssHooks[i]={get:function(t,n,o){return n?0===t.offsetWidth&&Ue.test(re.css(t,"display"))?re.swap(t,Ke,function(){return A(t,i,o)}):A(t,i,o):e},set:function(t,e,n){var o=n&&_(t);return E(t,e,n?T(t,i,n,re.support.boxSizing&&"border-box"===re.css(t,"boxSizing",!1,o),o):0)}}}),re(function(){re.support.reliableMarginRight||(re.cssHooks.marginRight={get:function(t,i){return i?re.swap(t,{display:"inline-block"},Fe,[t,"marginRight"]):e}}),!re.support.pixelPosition&&re.fn.position&&re.each(["top","left"],function(t,i){re.cssHooks[i]={get:function(t,n){return n?(n=Fe(t,i),Ye.test(n)?re(t).position()[i]+"px":n):e}}})}),re.expr&&re.expr.filters&&(re.expr.filters.hidden=function(t){return 0>=t.offsetWidth&&0>=t.offsetHeight},re.expr.filters.visible=function(t){return!re.expr.filters.hidden(t)}),re.each({margin:"",padding:"",border:"Width"},function(t,e){re.cssHooks[t+e]={expand:function(i){for(var n=0,o={},r="string"==typeof i?i.split(" "):[i];4>n;n++)o[t+Qe[n]+e]=r[n]||r[n-2]||r[0];return o}},qe.test(t)||(re.cssHooks[t+e].set=E)});var ti=/%20/g,ei=/\[\]$/,ii=/\r?\n/g,ni=/^(?:submit|button|image|reset|file)$/i,oi=/^(?:input|select|textarea|keygen)/i;re.fn.extend({serialize:function(){return re.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=re.prop(this,"elements");return t?re.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!re(this).is(":disabled")&&oi.test(this.nodeName)&&!ni.test(t)&&(this.checked||!Me.test(t))}).map(function(t,e){var i=re(this).val();return null==i?null:re.isArray(i)?re.map(i,function(t){return{name:e.name,value:t.replace(ii,"\r\n")}}):{name:e.name,value:i.replace(ii,"\r\n")}}).get()}}),re.param=function(t,i){var n,o=[],r=function(t,e){e=re.isFunction(e)?e():null==e?"":e,o[o.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(i===e&&(i=re.ajaxSettings&&re.ajaxSettings.traditional),re.isArray(t)||t.jquery&&!re.isPlainObject(t))re.each(t,function(){r(this.name,this.value)});else for(n in t)x(n,t[n],i,r);return o.join("&").replace(ti,"+")},re.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,e){re.fn[e]=function(t,i){return arguments.length>0?this.on(e,null,t,i):this.trigger(e)}}),re.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)},bind:function(t,e,i){return this.on(t,null,e,i)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,i,n){return this.on(e,t,i,n)},undelegate:function(t,e,i){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",i)}});var ri,si,ai=re.now(),li=/\?/,ci=/#.*$/,hi=/([?&])_=[^&]*/,ui=/^(.*?):[ \t]*([^\r\n]*)$/gm,pi=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,di=/^(?:GET|HEAD)$/,fi=/^\/\//,gi=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,mi=re.fn.load,vi={},yi={},bi="*/".concat("*");try{si=U.href}catch(_i){si=q.createElement("a"),si.href="",si=si.href}ri=gi.exec(si.toLowerCase())||[],re.fn.load=function(t,i,n){if("string"!=typeof t&&mi)return mi.apply(this,arguments);var o,r,s,a=this,l=t.indexOf(" ");return l>=0&&(o=t.slice(l),t=t.slice(0,l)),re.isFunction(i)?(n=i,i=e):i&&"object"==typeof i&&(r="POST"),a.length>0&&re.ajax({url:t,type:r,dataType:"html",data:i}).done(function(t){s=arguments,a.html(o?re("<div>").append(re.parseHTML(t)).find(o):t)}).complete(n&&function(t,e){a.each(n,s||[t.responseText,e,t])}),this},re.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){re.fn[e]=function(t){return this.on(e,t)}}),re.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:si,type:"GET",isLocal:pi.test(ri[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":bi,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":re.parseJSON,"text xml":re.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?j(j(t,re.ajaxSettings),e):j(re.ajaxSettings,t)},ajaxPrefilter:I(vi),ajaxTransport:I(yi),ajax:function(t,i){function n(t,i,n,a){var c,u,y,b,C,T=i;2!==_&&(_=2,l&&clearTimeout(l),o=e,s=a||"",E.readyState=t>0?4:0,c=t>=200&&300>t||304===t,n&&(b=S(p,E,n)),b=R(p,b,E,c),c?(p.ifModified&&(C=E.getResponseHeader("Last-Modified"),C&&(re.lastModified[r]=C),C=E.getResponseHeader("etag"),C&&(re.etag[r]=C)),204===t||"HEAD"===p.type?T="nocontent":304===t?T="notmodified":(T=b.state,u=b.data,y=b.error,c=!y)):(y=T,(t||!T)&&(T="error",0>t&&(t=0))),E.status=t,E.statusText=(i||T)+"",c?g.resolveWith(d,[u,T,E]):g.rejectWith(d,[E,T,y]),E.statusCode(v),v=e,h&&f.trigger(c?"ajaxSuccess":"ajaxError",[E,p,c?u:y]),m.fireWith(d,[E,T]),h&&(f.trigger("ajaxComplete",[E,p]),--re.active||re.event.trigger("ajaxStop")))}"object"==typeof t&&(i=t,t=e),i=i||{};var o,r,s,a,l,c,h,u,p=re.ajaxSetup({},i),d=p.context||p,f=p.context&&(d.nodeType||d.jquery)?re(d):re.event,g=re.Deferred(),m=re.Callbacks("once memory"),v=p.statusCode||{},y={},b={},_=0,C="canceled",E={readyState:0,getResponseHeader:function(t){var e;if(2===_){if(!a)for(a={};e=ui.exec(s);)a[e[1].toLowerCase()]=e[2];e=a[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===_?s:null},setRequestHeader:function(t,e){var i=t.toLowerCase();return _||(t=b[i]=b[i]||t,y[t]=e),this},overrideMimeType:function(t){return _||(p.mimeType=t),this},statusCode:function(t){var e;if(t)if(2>_)for(e in t)v[e]=[v[e],t[e]];else E.always(t[E.status]);return this},abort:function(t){var e=t||C;return o&&o.abort(e),n(0,e),this}};if(g.promise(E).complete=m.add,E.success=E.done,E.error=E.fail,p.url=((t||p.url||si)+"").replace(ci,"").replace(fi,ri[1]+"//"),p.type=i.method||i.type||p.method||p.type,p.dataTypes=re.trim(p.dataType||"*").toLowerCase().match(ae)||[""],null==p.crossDomain&&(c=gi.exec(p.url.toLowerCase()),p.crossDomain=!(!c||c[1]===ri[1]&&c[2]===ri[2]&&(c[3]||("http:"===c[1]?"80":"443"))===(ri[3]||("http:"===ri[1]?"80":"443")))),p.data&&p.processData&&"string"!=typeof p.data&&(p.data=re.param(p.data,p.traditional)),P(vi,p,i,E),2===_)return E;h=p.global,h&&0===re.active++&&re.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!di.test(p.type),r=p.url,p.hasContent||(p.data&&(r=p.url+=(li.test(r)?"&":"?")+p.data,delete p.data),p.cache===!1&&(p.url=hi.test(r)?r.replace(hi,"$1_="+ai++):r+(li.test(r)?"&":"?")+"_="+ai++)),p.ifModified&&(re.lastModified[r]&&E.setRequestHeader("If-Modified-Since",re.lastModified[r]),re.etag[r]&&E.setRequestHeader("If-None-Match",re.etag[r])),(p.data&&p.hasContent&&p.contentType!==!1||i.contentType)&&E.setRequestHeader("Content-Type",p.contentType),E.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+bi+"; q=0.01":""):p.accepts["*"]);for(u in p.headers)E.setRequestHeader(u,p.headers[u]);if(p.beforeSend&&(p.beforeSend.call(d,E,p)===!1||2===_))return E.abort();C="abort";for(u in{success:1,error:1,complete:1})E[u](p[u]);if(o=P(yi,p,i,E)){E.readyState=1,h&&f.trigger("ajaxSend",[E,p]),p.async&&p.timeout>0&&(l=setTimeout(function(){E.abort("timeout")},p.timeout));try{_=1,o.send(y,n)}catch(T){if(!(2>_))throw T;n(-1,T)}}else n(-1,"No Transport");return E},getJSON:function(t,e,i){return re.get(t,e,i,"json")},getScript:function(t,i){return re.get(t,e,i,"script")}}),re.each(["get","post"],function(t,i){re[i]=function(t,n,o,r){return re.isFunction(n)&&(r=r||o,o=n,n=e),re.ajax({url:t,type:i,dataType:r,data:n,success:o})}}),re.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(t){return re.globalEval(t),t}}}),re.ajaxPrefilter("script",function(t){t.cache===e&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),re.ajaxTransport("script",function(t){if(t.crossDomain){var e,i;return{send:function(n,o){e=re("<script>").prop({async:!0,charset:t.scriptCharset,src:t.url}).on("load error",i=function(t){e.remove(),i=null,t&&o("error"===t.type?404:200,t.type)}),q.head.appendChild(e[0])},abort:function(){i&&i()}}}});var Ci=[],Ei=/(=)\?(?=&|$)|\?\?/;re.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Ci.pop()||re.expando+"_"+ai++;return this[t]=!0,t}}),re.ajaxPrefilter("json jsonp",function(i,n,o){var r,s,a,l=i.jsonp!==!1&&(Ei.test(i.url)?"url":"string"==typeof i.data&&!(i.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ei.test(i.data)&&"data");return l||"jsonp"===i.dataTypes[0]?(r=i.jsonpCallback=re.isFunction(i.jsonpCallback)?i.jsonpCallback():i.jsonpCallback,l?i[l]=i[l].replace(Ei,"$1"+r):i.jsonp!==!1&&(i.url+=(li.test(i.url)?"&":"?")+i.jsonp+"="+r),i.converters["script json"]=function(){return a||re.error(r+" was not called"),a[0]},i.dataTypes[0]="json",s=t[r],t[r]=function(){a=arguments},o.always(function(){t[r]=s,i[r]&&(i.jsonpCallback=n.jsonpCallback,Ci.push(r)),a&&re.isFunction(s)&&s(a[0]),a=s=e}),"script"):e}),re.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(t){}};var Ti=re.ajaxSettings.xhr(),Ai={0:200,1223:204},wi=0,Di={};t.ActiveXObject&&re(t).on("unload",function(){for(var t in Di)Di[t]();Di=e}),re.support.cors=!!Ti&&"withCredentials"in Ti,re.support.ajax=Ti=!!Ti,re.ajaxTransport(function(t){var i;return re.support.cors||Ti&&!t.crossDomain?{send:function(n,o){var r,s,a=t.xhr();if(a.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(r in t.xhrFields)a[r]=t.xhrFields[r];t.mimeType&&a.overrideMimeType&&a.overrideMimeType(t.mimeType),t.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");for(r in n)a.setRequestHeader(r,n[r]);i=function(t){return function(){i&&(delete Di[s],i=a.onload=a.onerror=null,"abort"===t?a.abort():"error"===t?o(a.status||404,a.statusText):o(Ai[a.status]||a.status,a.statusText,"string"==typeof a.responseText?{text:a.responseText}:e,a.getAllResponseHeaders()))}},a.onload=i(),a.onerror=i("error"),i=Di[s=wi++]=i("abort"),a.send(t.hasContent&&t.data||null)},abort:function(){i&&i()}}:e});var xi,Ii,Pi=/^(?:toggle|show|hide)$/,ji=RegExp("^(?:([+-])=|)("+se+")([a-z%]*)$","i"),Si=/queueHooks$/,Ri=[k],Ni={"*":[function(t,e){var i=this.createTween(t,e),n=i.cur(),o=ji.exec(e),r=o&&o[3]||(re.cssNumber[t]?"":"px"),s=(re.cssNumber[t]||"px"!==r&&+n)&&ji.exec(re.css(i.elem,t)),a=1,l=20;if(s&&s[3]!==r){r=r||s[3],o=o||[],s=+n||1;do a=a||".5",s/=a,re.style(i.elem,t,s+r);while(a!==(a=i.cur()/n)&&1!==a&&--l)}return o&&(s=i.start=+s||+n||0,i.unit=r,i.end=o[1]?s+(o[1]+1)*o[2]:+o[2]),i}]};re.Animation=re.extend(L,{tweener:function(t,e){re.isFunction(t)?(e=t,t=["*"]):t=t.split(" ");for(var i,n=0,o=t.length;o>n;n++)i=t[n],Ni[i]=Ni[i]||[],Ni[i].unshift(e)},prefilter:function(t,e){e?Ri.unshift(t):Ri.push(t)}}),re.Tween=H,H.prototype={constructor:H,init:function(t,e,i,n,o,r){this.elem=t,this.prop=i,this.easing=o||"swing",this.options=e,this.start=this.now=this.cur(),this.end=n,this.unit=r||(re.cssNumber[i]?"":"px")},cur:function(){var t=H.propHooks[this.prop];return t&&t.get?t.get(this):H.propHooks._default.get(this)},run:function(t){var e,i=H.propHooks[this.prop];return this.pos=e=this.options.duration?re.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):H.propHooks._default.set(this),this}},H.prototype.init.prototype=H.prototype,H.propHooks={_default:{get:function(t){var e;return null==t.elem[t.prop]||t.elem.style&&null!=t.elem.style[t.prop]?(e=re.css(t.elem,t.prop,""),e&&"auto"!==e?e:0):t.elem[t.prop]},set:function(t){re.fx.step[t.prop]?re.fx.step[t.prop](t):t.elem.style&&(null!=t.elem.style[re.cssProps[t.prop]]||re.cssHooks[t.prop])?re.style(t.elem,t.prop,t.now+t.unit):t.elem[t.prop]=t.now}}},H.propHooks.scrollTop=H.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},re.each(["toggle","show","hide"],function(t,e){var i=re.fn[e];re.fn[e]=function(t,n,o){return null==t||"boolean"==typeof t?i.apply(this,arguments):this.animate(z(e,!0),t,n,o)}}),re.fn.extend({fadeTo:function(t,e,i,n){return this.filter(b).css("opacity",0).show().end().animate({opacity:e},t,i,n)},animate:function(t,e,i,n){var o=re.isEmptyObject(t),r=re.speed(e,i,n),s=function(){var e=L(this,re.extend({},t),r);(o||me.get(this,"finish"))&&e.stop(!0)};return s.finish=s,o||r.queue===!1?this.each(s):this.queue(r.queue,s)},stop:function(t,i,n){var o=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=i,i=t,t=e),i&&t!==!1&&this.queue(t||"fx",[]),this.each(function(){var e=!0,i=null!=t&&t+"queueHooks",r=re.timers,s=me.get(this);if(i)s[i]&&s[i].stop&&o(s[i]);else for(i in s)s[i]&&s[i].stop&&Si.test(i)&&o(s[i]);for(i=r.length;i--;)r[i].elem!==this||null!=t&&r[i].queue!==t||(r[i].anim.stop(n),e=!1,r.splice(i,1));(e||!n)&&re.dequeue(this,t)})},finish:function(t){return t!==!1&&(t=t||"fx"),this.each(function(){var e,i=me.get(this),n=i[t+"queue"],o=i[t+"queueHooks"],r=re.timers,s=n?n.length:0;for(i.finish=!0,re.queue(this,t,[]),o&&o.stop&&o.stop.call(this,!0),e=r.length;e--;)r[e].elem===this&&r[e].queue===t&&(r[e].anim.stop(!0),r.splice(e,1));for(e=0;s>e;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete i.finish})}}),re.each({slideDown:z("show"),slideUp:z("hide"),slideToggle:z("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){re.fn[t]=function(t,i,n){return this.animate(e,t,i,n)}}),re.speed=function(t,e,i){var n=t&&"object"==typeof t?re.extend({},t):{complete:i||!i&&e||re.isFunction(t)&&t,duration:t,easing:i&&e||e&&!re.isFunction(e)&&e};return n.duration=re.fx.off?0:"number"==typeof n.duration?n.duration:n.duration in re.fx.speeds?re.fx.speeds[n.duration]:re.fx.speeds._default,(null==n.queue||n.queue===!0)&&(n.queue="fx"),n.old=n.complete,n.complete=function(){re.isFunction(n.old)&&n.old.call(this),n.queue&&re.dequeue(this,n.queue)},n},re.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2}},re.timers=[],re.fx=H.prototype.init,re.fx.tick=function(){var t,i=re.timers,n=0;for(xi=re.now();i.length>n;n++)t=i[n],t()||i[n]!==t||i.splice(n--,1);i.length||re.fx.stop(),xi=e},re.fx.timer=function(t){t()&&re.timers.push(t)&&re.fx.start()},re.fx.interval=13,re.fx.start=function(){Ii||(Ii=setInterval(re.fx.tick,re.fx.interval))},re.fx.stop=function(){clearInterval(Ii),Ii=null},re.fx.speeds={slow:600,fast:200,_default:400},re.fx.step={},re.expr&&re.expr.filters&&(re.expr.filters.animated=function(t){return re.grep(re.timers,function(e){return t===e.elem}).length}),re.fn.offset=function(t){if(arguments.length)return t===e?this:this.each(function(e){re.offset.setOffset(this,t,e)});var i,n,o=this[0],r={top:0,left:0},s=o&&o.ownerDocument;return s?(i=s.documentElement,re.contains(i,o)?(typeof o.getBoundingClientRect!==W&&(r=o.getBoundingClientRect()),n=B(s),{top:r.top+n.pageYOffset-i.clientTop,left:r.left+n.pageXOffset-i.clientLeft}):r):void 0},re.offset={setOffset:function(t,e,i){var n,o,r,s,a,l,c,h=re.css(t,"position"),u=re(t),p={};"static"===h&&(t.style.position="relative"),a=u.offset(),r=re.css(t,"top"),l=re.css(t,"left"),c=("absolute"===h||"fixed"===h)&&(r+l).indexOf("auto")>-1,c?(n=u.position(),s=n.top,o=n.left):(s=parseFloat(r)||0,o=parseFloat(l)||0),re.isFunction(e)&&(e=e.call(t,i,a)),null!=e.top&&(p.top=e.top-a.top+s),null!=e.left&&(p.left=e.left-a.left+o),"using"in e?e.using.call(t,p):u.css(p)}},re.fn.extend({position:function(){if(this[0]){var t,e,i=this[0],n={top:0,left:0};return"fixed"===re.css(i,"position")?e=i.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),re.nodeName(t[0],"html")||(n=t.offset()),n.top+=re.css(t[0],"borderTopWidth",!0),n.left+=re.css(t[0],"borderLeftWidth",!0)),{top:e.top-n.top-re.css(i,"marginTop",!0),left:e.left-n.left-re.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||$;t&&!re.nodeName(t,"html")&&"static"===re.css(t,"position");)t=t.offsetParent;return t||$})}}),re.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(i,n){var o="pageYOffset"===n;re.fn[i]=function(r){return re.access(this,function(i,r,s){var a=B(i);return s===e?a?a[n]:i[r]:(a?a.scrollTo(o?t.pageXOffset:s,o?s:t.pageYOffset):i[r]=s,e)},i,r,arguments.length,null)}}),re.each({Height:"height",Width:"width"},function(t,i){re.each({padding:"inner"+t,content:i,"":"outer"+t},function(n,o){re.fn[o]=function(o,r){var s=arguments.length&&(n||"boolean"!=typeof o),a=n||(o===!0||r===!0?"margin":"border");return re.access(this,function(i,n,o){var r;return re.isWindow(i)?i.document.documentElement["client"+t]:9===i.nodeType?(r=i.documentElement,Math.max(i.body["scroll"+t],r["scroll"+t],i.body["offset"+t],r["offset"+t],r["client"+t])):o===e?re.css(i,n,a):re.style(i,n,o,a)},i,s?o:e,s,null)}})}),re.fn.size=function(){return this.length},re.fn.andSelf=re.fn.addBack,"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=re:"function"==typeof define&&define.amd&&define("jquery",[],function(){return re}),"object"==typeof t&&"object"==typeof t.document&&(t.jQuery=t.$=re)}(window),function(){var t=this,e=t._,i={},n=Array.prototype,o=Object.prototype,r=Function.prototype,s=n.push,a=n.slice,l=n.concat,c=o.toString,h=o.hasOwnProperty,u=n.forEach,p=n.map,d=n.reduce,f=n.reduceRight,g=n.filter,m=n.every,v=n.some,y=n.indexOf,b=n.lastIndexOf,_=Array.isArray,C=Object.keys,E=r.bind,T=function(t){return t instanceof T?t:this instanceof T?(this._wrapped=t,void 0):new T(t)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=T),exports._=T):t._=T,T.VERSION="1.5.2";var A=T.each=T.forEach=function(t,e,n){if(null!=t)if(u&&t.forEach===u)t.forEach(e,n);else if(t.length===+t.length){for(var o=0,r=t.length;r>o;o++)if(e.call(n,t[o],o,t)===i)return}else for(var s=T.keys(t),o=0,r=s.length;r>o;o++)if(e.call(n,t[s[o]],s[o],t)===i)return};T.map=T.collect=function(t,e,i){var n=[];return null==t?n:p&&t.map===p?t.map(e,i):(A(t,function(t,o,r){n.push(e.call(i,t,o,r))}),n)};var w="Reduce of empty array with no initial value";T.reduce=T.foldl=T.inject=function(t,e,i,n){var o=arguments.length>2;if(null==t&&(t=[]),d&&t.reduce===d)return n&&(e=T.bind(e,n)),o?t.reduce(e,i):t.reduce(e);if(A(t,function(t,r,s){o?i=e.call(n,i,t,r,s):(i=t,o=!0)}),!o)throw new TypeError(w);return i},T.reduceRight=T.foldr=function(t,e,i,n){var o=arguments.length>2;if(null==t&&(t=[]),f&&t.reduceRight===f)return n&&(e=T.bind(e,n)),o?t.reduceRight(e,i):t.reduceRight(e);var r=t.length;if(r!==+r){var s=T.keys(t);r=s.length}if(A(t,function(a,l,c){l=s?s[--r]:--r,o?i=e.call(n,i,t[l],l,c):(i=t[l],o=!0)}),!o)throw new TypeError(w);return i},T.find=T.detect=function(t,e,i){var n;return D(t,function(t,o,r){return e.call(i,t,o,r)?(n=t,!0):void 0}),n},T.filter=T.select=function(t,e,i){var n=[];return null==t?n:g&&t.filter===g?t.filter(e,i):(A(t,function(t,o,r){e.call(i,t,o,r)&&n.push(t)}),n)},T.reject=function(t,e,i){return T.filter(t,function(t,n,o){return!e.call(i,t,n,o)},i)},T.every=T.all=function(t,e,n){e||(e=T.identity);var o=!0;return null==t?o:m&&t.every===m?t.every(e,n):(A(t,function(t,r,s){return(o=o&&e.call(n,t,r,s))?void 0:i}),!!o)};var D=T.some=T.any=function(t,e,n){e||(e=T.identity);var o=!1;return null==t?o:v&&t.some===v?t.some(e,n):(A(t,function(t,r,s){return o||(o=e.call(n,t,r,s))?i:void 0}),!!o)};T.contains=T.include=function(t,e){return null==t?!1:y&&t.indexOf===y?-1!=t.indexOf(e):D(t,function(t){return t===e})},T.invoke=function(t,e){var i=a.call(arguments,2),n=T.isFunction(e);return T.map(t,function(t){return(n?e:t[e]).apply(t,i)})},T.pluck=function(t,e){return T.map(t,function(t){return t[e]})},T.where=function(t,e,i){return T.isEmpty(e)?i?void 0:[]:T[i?"find":"filter"](t,function(t){for(var i in e)if(e[i]!==t[i])return!1;return!0})},T.findWhere=function(t,e){return T.where(t,e,!0)},T.max=function(t,e,i){if(!e&&T.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.max.apply(Math,t);if(!e&&T.isEmpty(t))return-1/0;var n={computed:-1/0,value:-1/0};return A(t,function(t,o,r){var s=e?e.call(i,t,o,r):t;s>n.computed&&(n={value:t,computed:s})}),n.value},T.min=function(t,e,i){if(!e&&T.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.min.apply(Math,t);if(!e&&T.isEmpty(t))return 1/0;var n={computed:1/0,value:1/0};return A(t,function(t,o,r){var s=e?e.call(i,t,o,r):t;s<n.computed&&(n={value:t,computed:s})}),n.value},T.shuffle=function(t){var e,i=0,n=[];return A(t,function(t){e=T.random(i++),n[i-1]=n[e],n[e]=t}),n},T.sample=function(t,e,i){return arguments.length<2||i?t[T.random(t.length-1)]:T.shuffle(t).slice(0,Math.max(0,e))};var x=function(t){return T.isFunction(t)?t:function(e){return e[t]}};T.sortBy=function(t,e,i){var n=x(e);return T.pluck(T.map(t,function(t,e,o){return{value:t,index:e,criteria:n.call(i,t,e,o)}}).sort(function(t,e){var i=t.criteria,n=e.criteria;if(i!==n){if(i>n||void 0===i)return 1;if(n>i||void 0===n)return-1}return t.index-e.index}),"value")};var I=function(t){return function(e,i,n){var o={},r=null==i?T.identity:x(i);return A(e,function(i,s){var a=r.call(n,i,s,e);t(o,a,i)}),o}};T.groupBy=I(function(t,e,i){(T.has(t,e)?t[e]:t[e]=[]).push(i)}),T.indexBy=I(function(t,e,i){t[e]=i}),T.countBy=I(function(t,e){T.has(t,e)?t[e]++:t[e]=1}),T.sortedIndex=function(t,e,i,n){i=null==i?T.identity:x(i);for(var o=i.call(n,e),r=0,s=t.length;s>r;){var a=r+s>>>1;i.call(n,t[a])<o?r=a+1:s=a}return r},T.toArray=function(t){return t?T.isArray(t)?a.call(t):t.length===+t.length?T.map(t,T.identity):T.values(t):[]},T.size=function(t){return null==t?0:t.length===+t.length?t.length:T.keys(t).length},T.first=T.head=T.take=function(t,e,i){return null==t?void 0:null==e||i?t[0]:a.call(t,0,e)},T.initial=function(t,e,i){return a.call(t,0,t.length-(null==e||i?1:e))},T.last=function(t,e,i){return null==t?void 0:null==e||i?t[t.length-1]:a.call(t,Math.max(t.length-e,0))},T.rest=T.tail=T.drop=function(t,e,i){return a.call(t,null==e||i?1:e)},T.compact=function(t){return T.filter(t,T.identity)};var P=function(t,e,i){return e&&T.every(t,T.isArray)?l.apply(i,t):(A(t,function(t){T.isArray(t)||T.isArguments(t)?e?s.apply(i,t):P(t,e,i):i.push(t)}),i)};T.flatten=function(t,e){return P(t,e,[])},T.without=function(t){return T.difference(t,a.call(arguments,1))},T.uniq=T.unique=function(t,e,i,n){T.isFunction(e)&&(n=i,i=e,e=!1);var o=i?T.map(t,i,n):t,r=[],s=[];return A(o,function(i,n){(e?n&&s[s.length-1]===i:T.contains(s,i))||(s.push(i),r.push(t[n]))}),r},T.union=function(){return T.uniq(T.flatten(arguments,!0))},T.intersection=function(t){var e=a.call(arguments,1);return T.filter(T.uniq(t),function(t){return T.every(e,function(e){return T.indexOf(e,t)>=0})})},T.difference=function(t){var e=l.apply(n,a.call(arguments,1));return T.filter(t,function(t){return!T.contains(e,t)})},T.zip=function(){for(var t=T.max(T.pluck(arguments,"length").concat(0)),e=new Array(t),i=0;t>i;i++)e[i]=T.pluck(arguments,""+i);return e},T.object=function(t,e){if(null==t)return{};for(var i={},n=0,o=t.length;o>n;n++)e?i[t[n]]=e[n]:i[t[n][0]]=t[n][1];return i},T.indexOf=function(t,e,i){if(null==t)return-1;var n=0,o=t.length;if(i){if("number"!=typeof i)return n=T.sortedIndex(t,e),t[n]===e?n:-1;n=0>i?Math.max(0,o+i):i}if(y&&t.indexOf===y)return t.indexOf(e,i);for(;o>n;n++)if(t[n]===e)return n;return-1},T.lastIndexOf=function(t,e,i){if(null==t)return-1;var n=null!=i;if(b&&t.lastIndexOf===b)return n?t.lastIndexOf(e,i):t.lastIndexOf(e);for(var o=n?i:t.length;o--;)if(t[o]===e)return o;return-1},T.range=function(t,e,i){arguments.length<=1&&(e=t||0,t=0),i=arguments[2]||1;for(var n=Math.max(Math.ceil((e-t)/i),0),o=0,r=new Array(n);n>o;)r[o++]=t,t+=i;return r};var j=function(){};T.bind=function(t,e){var i,n;if(E&&t.bind===E)return E.apply(t,a.call(arguments,1));if(!T.isFunction(t))throw new TypeError;return i=a.call(arguments,2),n=function(){if(!(this instanceof n))return t.apply(e,i.concat(a.call(arguments)));j.prototype=t.prototype;var o=new j;j.prototype=null;var r=t.apply(o,i.concat(a.call(arguments)));return Object(r)===r?r:o}},T.partial=function(t){var e=a.call(arguments,1);return function(){return t.apply(this,e.concat(a.call(arguments)))}},T.bindAll=function(t){var e=a.call(arguments,1);if(0===e.length)throw new Error("bindAll must be passed function names");return A(e,function(e){t[e]=T.bind(t[e],t)}),t},T.memoize=function(t,e){var i={};return e||(e=T.identity),function(){var n=e.apply(this,arguments);return T.has(i,n)?i[n]:i[n]=t.apply(this,arguments)}},T.delay=function(t,e){var i=a.call(arguments,2);return setTimeout(function(){return t.apply(null,i)},e)},T.defer=function(t){return T.delay.apply(T,[t,1].concat(a.call(arguments,1)))},T.throttle=function(t,e,i){var n,o,r,s=null,a=0;i||(i={});var l=function(){a=i.leading===!1?0:new Date,s=null,r=t.apply(n,o)};return function(){var c=new Date;a||i.leading!==!1||(a=c);var h=e-(c-a);return n=this,o=arguments,0>=h?(clearTimeout(s),s=null,a=c,r=t.apply(n,o)):s||i.trailing===!1||(s=setTimeout(l,h)),r}},T.debounce=function(t,e,i){var n,o,r,s,a;return function(){r=this,o=arguments,s=new Date;var l=function(){var c=new Date-s;e>c?n=setTimeout(l,e-c):(n=null,i||(a=t.apply(r,o)))},c=i&&!n;return n||(n=setTimeout(l,e)),c&&(a=t.apply(r,o)),a}},T.once=function(t){var e,i=!1;return function(){return i?e:(i=!0,e=t.apply(this,arguments),t=null,e)}},T.wrap=function(t,e){return function(){var i=[t];return s.apply(i,arguments),e.apply(this,i)}},T.compose=function(){var t=arguments;return function(){for(var e=arguments,i=t.length-1;i>=0;i--)e=[t[i].apply(this,e)];return e[0]}},T.after=function(t,e){return function(){return--t<1?e.apply(this,arguments):void 0}},T.keys=C||function(t){if(t!==Object(t))throw new TypeError("Invalid object");var e=[];for(var i in t)T.has(t,i)&&e.push(i);return e},T.values=function(t){for(var e=T.keys(t),i=e.length,n=new Array(i),o=0;i>o;o++)n[o]=t[e[o]];return n},T.pairs=function(t){for(var e=T.keys(t),i=e.length,n=new Array(i),o=0;i>o;o++)n[o]=[e[o],t[e[o]]];return n},T.invert=function(t){for(var e={},i=T.keys(t),n=0,o=i.length;o>n;n++)e[t[i[n]]]=i[n];return e},T.functions=T.methods=function(t){var e=[];for(var i in t)T.isFunction(t[i])&&e.push(i);return e.sort()},T.extend=function(t){return A(a.call(arguments,1),function(e){if(e)for(var i in e)t[i]=e[i]}),t},T.pick=function(t){var e={},i=l.apply(n,a.call(arguments,1));return A(i,function(i){i in t&&(e[i]=t[i])}),e},T.omit=function(t){var e={},i=l.apply(n,a.call(arguments,1));for(var o in t)T.contains(i,o)||(e[o]=t[o]);return e},T.defaults=function(t){return A(a.call(arguments,1),function(e){if(e)for(var i in e)void 0===t[i]&&(t[i]=e[i])}),t},T.clone=function(t){return T.isObject(t)?T.isArray(t)?t.slice():T.extend({},t):t},T.tap=function(t,e){return e(t),t};var S=function(t,e,i,n){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;t instanceof T&&(t=t._wrapped),e instanceof T&&(e=e._wrapped);var o=c.call(t);if(o!=c.call(e))return!1;switch(o){case"[object String]":return t==String(e);case"[object Number]":return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object RegExp]":return t.source==e.source&&t.global==e.global&&t.multiline==e.multiline&&t.ignoreCase==e.ignoreCase}if("object"!=typeof t||"object"!=typeof e)return!1;for(var r=i.length;r--;)if(i[r]==t)return n[r]==e;var s=t.constructor,a=e.constructor;if(s!==a&&!(T.isFunction(s)&&s instanceof s&&T.isFunction(a)&&a instanceof a))return!1;i.push(t),n.push(e);var l=0,h=!0;if("[object Array]"==o){if(l=t.length,h=l==e.length)for(;l--&&(h=S(t[l],e[l],i,n)););}else{for(var u in t)if(T.has(t,u)&&(l++,!(h=T.has(e,u)&&S(t[u],e[u],i,n))))break;if(h){for(u in e)if(T.has(e,u)&&!l--)break;h=!l}}return i.pop(),n.pop(),h};T.isEqual=function(t,e){return S(t,e,[],[])},T.isEmpty=function(t){if(null==t)return!0;if(T.isArray(t)||T.isString(t))return 0===t.length;for(var e in t)if(T.has(t,e))return!1;return!0},T.isElement=function(t){return!(!t||1!==t.nodeType)},T.isArray=_||function(t){return"[object Array]"==c.call(t)},T.isObject=function(t){return t===Object(t)},A(["Arguments","Function","String","Number","Date","RegExp"],function(t){T["is"+t]=function(e){return c.call(e)=="[object "+t+"]"}}),T.isArguments(arguments)||(T.isArguments=function(t){return!(!t||!T.has(t,"callee"))}),"function"!=typeof/./&&(T.isFunction=function(t){return"function"==typeof t}),T.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},T.isNaN=function(t){return T.isNumber(t)&&t!=+t},T.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"==c.call(t)},T.isNull=function(t){return null===t},T.isUndefined=function(t){return void 0===t},T.has=function(t,e){return h.call(t,e)},T.noConflict=function(){return t._=e,this},T.identity=function(t){return t},T.times=function(t,e,i){for(var n=Array(Math.max(0,t)),o=0;t>o;o++)n[o]=e.call(i,o);return n},T.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))};var R={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};R.unescape=T.invert(R.escape);var N={escape:new RegExp("["+T.keys(R.escape).join("")+"]","g"),unescape:new RegExp("("+T.keys(R.unescape).join("|")+")","g")};T.each(["escape","unescape"],function(t){T[t]=function(e){return null==e?"":(""+e).replace(N[t],function(e){return R[t][e]})}}),T.result=function(t,e){if(null==t)return void 0;var i=t[e];return T.isFunction(i)?i.call(t):i},T.mixin=function(t){A(T.functions(t),function(e){var i=T[e]=t[e];T.prototype[e]=function(){var t=[this._wrapped];return s.apply(t,arguments),H.call(this,i.apply(T,t))}})};var O=0;T.uniqueId=function(t){var e=++O+"";return t?t+e:e},T.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var L=/(.)^/,M={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},k=/\\|'|\r|\n|\t|\u2028|\u2029/g;T.template=function(t,e,i){var n;i=T.defaults({},i,T.templateSettings);var o=new RegExp([(i.escape||L).source,(i.interpolate||L).source,(i.evaluate||L).source].join("|")+"|$","g"),r=0,s="__p+='";
t.replace(o,function(e,i,n,o,a){return s+=t.slice(r,a).replace(k,function(t){return"\\"+M[t]}),i&&(s+="'+\n((__t=("+i+"))==null?'':_.escape(__t))+\n'"),n&&(s+="'+\n((__t=("+n+"))==null?'':__t)+\n'"),o&&(s+="';\n"+o+"\n__p+='"),r=a+e.length,e}),s+="';\n",i.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{n=new Function(i.variable||"obj","_",s)}catch(a){throw a.source=s,a}if(e)return n(e,T);var l=function(t){return n.call(this,t,T)};return l.source="function("+(i.variable||"obj")+"){\n"+s+"}",l},T.chain=function(t){return T(t).chain()};var H=function(t){return this._chain?T(t).chain():t};T.mixin(T),A(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=n[t];T.prototype[t]=function(){var i=this._wrapped;return e.apply(i,arguments),"shift"!=t&&"splice"!=t||0!==i.length||delete i[0],H.call(this,i)}}),A(["concat","join","slice"],function(t){var e=n[t];T.prototype[t]=function(){return H.call(this,e.apply(this._wrapped,arguments))}}),T.extend(T.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}.call(this),define("underscore",function(t){return function(){var e;return e||t._}}(this)),function(){{var t,e=this,i=e.Backbone,n=[],o=(n.push,n.slice);n.splice}t="undefined"!=typeof exports?exports:e.Backbone={},t.VERSION="1.1.0";var r=e._;r||"undefined"==typeof require||(r=require("underscore")),t.$=e.jQuery||e.Zepto||e.ender||e.$,t.noConflict=function(){return e.Backbone=i,this},t.emulateHTTP=!1,t.emulateJSON=!1;var s=t.Events={on:function(t,e,i){if(!l(this,"on",t,[e,i])||!e)return this;this._events||(this._events={});var n=this._events[t]||(this._events[t]=[]);return n.push({callback:e,context:i,ctx:i||this}),this},once:function(t,e,i){if(!l(this,"once",t,[e,i])||!e)return this;var n=this,o=r.once(function(){n.off(t,o),e.apply(this,arguments)});return o._callback=e,this.on(t,o,i)},off:function(t,e,i){var n,o,s,a,c,h,u,p;if(!this._events||!l(this,"off",t,[e,i]))return this;if(!t&&!e&&!i)return this._events={},this;for(a=t?[t]:r.keys(this._events),c=0,h=a.length;h>c;c++)if(t=a[c],s=this._events[t]){if(this._events[t]=n=[],e||i)for(u=0,p=s.length;p>u;u++)o=s[u],(e&&e!==o.callback&&e!==o.callback._callback||i&&i!==o.context)&&n.push(o);n.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=o.call(arguments,1);if(!l(this,"trigger",t,e))return this;var i=this._events[t],n=this._events.all;return i&&c(i,e),n&&c(n,arguments),this},stopListening:function(t,e,i){var n=this._listeningTo;if(!n)return this;var o=!e&&!i;i||"object"!=typeof e||(i=this),t&&((n={})[t._listenId]=t);for(var s in n)t=n[s],t.off(e,i,this),(o||r.isEmpty(t._events))&&delete this._listeningTo[s];return this}},a=/\s+/,l=function(t,e,i,n){if(!i)return!0;if("object"==typeof i){for(var o in i)t[e].apply(t,[o,i[o]].concat(n));return!1}if(a.test(i)){for(var r=i.split(a),s=0,l=r.length;l>s;s++)t[e].apply(t,[r[s]].concat(n));return!1}return!0},c=function(t,e){var i,n=-1,o=t.length,r=e[0],s=e[1],a=e[2];switch(e.length){case 0:for(;++n<o;)(i=t[n]).callback.call(i.ctx);return;case 1:for(;++n<o;)(i=t[n]).callback.call(i.ctx,r);return;case 2:for(;++n<o;)(i=t[n]).callback.call(i.ctx,r,s);return;case 3:for(;++n<o;)(i=t[n]).callback.call(i.ctx,r,s,a);return;default:for(;++n<o;)(i=t[n]).callback.apply(i.ctx,e)}},h={listenTo:"on",listenToOnce:"once"};r.each(h,function(t,e){s[e]=function(e,i,n){var o=this._listeningTo||(this._listeningTo={}),s=e._listenId||(e._listenId=r.uniqueId("l"));return o[s]=e,n||"object"!=typeof i||(n=this),e[t](i,n,this),this}}),s.bind=s.on,s.unbind=s.off,r.extend(t,s);var u=t.Model=function(t,e){var i=t||{};e||(e={}),this.cid=r.uniqueId("c"),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(i=this.parse(i,e)||{}),i=r.defaults({},i,r.result(this,"defaults")),this.set(i,e),this.changed={},this.initialize.apply(this,arguments)};r.extend(u.prototype,s,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return r.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return r.escape(this.get(t))},has:function(t){return null!=this.get(t)},set:function(t,e,i){var n,o,s,a,l,c,h,u;if(null==t)return this;if("object"==typeof t?(o=t,i=e):(o={})[t]=e,i||(i={}),!this._validate(o,i))return!1;s=i.unset,l=i.silent,a=[],c=this._changing,this._changing=!0,c||(this._previousAttributes=r.clone(this.attributes),this.changed={}),u=this.attributes,h=this._previousAttributes,this.idAttribute in o&&(this.id=o[this.idAttribute]);for(n in o)e=o[n],r.isEqual(u[n],e)||a.push(n),r.isEqual(h[n],e)?delete this.changed[n]:this.changed[n]=e,s?delete u[n]:u[n]=e;if(!l){a.length&&(this._pending=!0);for(var p=0,d=a.length;d>p;p++)this.trigger("change:"+a[p],this,u[a[p]],i)}if(c)return this;if(!l)for(;this._pending;)this._pending=!1,this.trigger("change",this,i);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,r.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var i in this.attributes)e[i]=void 0;return this.set(e,r.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!r.isEmpty(this.changed):r.has(this.changed,t)},changedAttributes:function(t){if(!t)return this.hasChanged()?r.clone(this.changed):!1;var e,i=!1,n=this._changing?this._previousAttributes:this.attributes;for(var o in t)r.isEqual(n[o],e=t[o])||((i||(i={}))[o]=e);return i},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return r.clone(this._previousAttributes)},fetch:function(t){t=t?r.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=this,i=t.success;return t.success=function(n){return e.set(e.parse(n,t),t)?(i&&i(e,n,t),e.trigger("sync",e,n,t),void 0):!1},M(this,t),this.sync("read",this,t)},save:function(t,e,i){var n,o,s,a=this.attributes;if(null==t||"object"==typeof t?(n=t,i=e):(n={})[t]=e,i=r.extend({validate:!0},i),n&&!i.wait){if(!this.set(n,i))return!1}else if(!this._validate(n,i))return!1;n&&i.wait&&(this.attributes=r.extend({},a,n)),void 0===i.parse&&(i.parse=!0);var l=this,c=i.success;return i.success=function(t){l.attributes=a;var e=l.parse(t,i);return i.wait&&(e=r.extend(n||{},e)),r.isObject(e)&&!l.set(e,i)?!1:(c&&c(l,t,i),l.trigger("sync",l,t,i),void 0)},M(this,i),o=this.isNew()?"create":i.patch?"patch":"update","patch"===o&&(i.attrs=n),s=this.sync(o,this,i),n&&i.wait&&(this.attributes=a),s},destroy:function(t){t=t?r.clone(t):{};var e=this,i=t.success,n=function(){e.trigger("destroy",e,e.collection,t)};if(t.success=function(o){(t.wait||e.isNew())&&n(),i&&i(e,o,t),e.isNew()||e.trigger("sync",e,o,t)},this.isNew())return t.success(),!1;M(this,t);var o=this.sync("delete",this,t);return t.wait||n(),o},url:function(){var t=r.result(this,"urlRoot")||r.result(this.collection,"url")||L();return this.isNew()?t:t+("/"===t.charAt(t.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(t){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(t){return this._validate({},r.extend(t||{},{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=r.extend({},this.attributes,t);var i=this.validationError=this.validate(t,e)||null;return i?(this.trigger("invalid",this,i,r.extend(e,{validationError:i})),!1):!0}});var p=["keys","values","pairs","invert","pick","omit"];r.each(p,function(t){u.prototype[t]=function(){var e=o.call(arguments);return e.unshift(this.attributes),r[t].apply(r,e)}});var d=t.Collection=function(t,e){e||(e={}),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,r.extend({silent:!0},e))},f={add:!0,remove:!0,merge:!0},g={add:!0,remove:!1};r.extend(d.prototype,s,{model:u,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return t.sync.apply(this,arguments)},add:function(t,e){return this.set(t,r.extend({merge:!1},e,g))},remove:function(t,e){var i=!r.isArray(t);t=i?[t]:r.clone(t),e||(e={});var n,o,s,a;for(n=0,o=t.length;o>n;n++)a=t[n]=this.get(t[n]),a&&(delete this._byId[a.id],delete this._byId[a.cid],s=this.indexOf(a),this.models.splice(s,1),this.length--,e.silent||(e.index=s,a.trigger("remove",a,this,e)),this._removeReference(a));return i?t[0]:t},set:function(t,e){e=r.defaults({},e,f),e.parse&&(t=this.parse(t,e));var i=!r.isArray(t);t=i?t?[t]:[]:r.clone(t);var n,o,s,a,l,c,h,p=e.at,d=this.model,g=this.comparator&&null==p&&e.sort!==!1,m=r.isString(this.comparator)?this.comparator:null,v=[],y=[],b={},_=e.add,C=e.merge,E=e.remove,T=!g&&_&&E?[]:!1;for(n=0,o=t.length;o>n;n++){if(l=t[n],s=l instanceof u?a=l:l[d.prototype.idAttribute],c=this.get(s))E&&(b[c.cid]=!0),C&&(l=l===a?a.attributes:l,e.parse&&(l=c.parse(l,e)),c.set(l,e),g&&!h&&c.hasChanged(m)&&(h=!0)),t[n]=c;else if(_){if(a=t[n]=this._prepareModel(l,e),!a)continue;v.push(a),a.on("all",this._onModelEvent,this),this._byId[a.cid]=a,null!=a.id&&(this._byId[a.id]=a)}T&&T.push(c||a)}if(E){for(n=0,o=this.length;o>n;++n)b[(a=this.models[n]).cid]||y.push(a);y.length&&this.remove(y,e)}if(v.length||T&&T.length)if(g&&(h=!0),this.length+=v.length,null!=p)for(n=0,o=v.length;o>n;n++)this.models.splice(p+n,0,v[n]);else{T&&(this.models.length=0);var A=T||v;for(n=0,o=A.length;o>n;n++)this.models.push(A[n])}if(h&&this.sort({silent:!0}),!e.silent){for(n=0,o=v.length;o>n;n++)(a=v[n]).trigger("add",a,this,e);(h||T&&T.length)&&this.trigger("sort",this,e)}return i?t[0]:t},reset:function(t,e){e||(e={});for(var i=0,n=this.models.length;n>i;i++)this._removeReference(this.models[i]);return e.previousModels=this.models,this._reset(),t=this.add(t,r.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,r.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t),e},unshift:function(t,e){return this.add(t,r.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t),e},slice:function(){return o.apply(this.models,arguments)},get:function(t){return null==t?void 0:this._byId[t.id]||this._byId[t.cid]||this._byId[t]},at:function(t){return this.models[t]},where:function(t,e){return r.isEmpty(t)?e?void 0:[]:this[e?"find":"filter"](function(e){for(var i in t)if(t[i]!==e.get(i))return!1;return!0})},findWhere:function(t){return this.where(t,!0)},sort:function(t){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return t||(t={}),r.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(r.bind(this.comparator,this)),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return r.invoke(this.models,"get",t)},fetch:function(t){t=t?r.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=t.success,i=this;return t.success=function(n){var o=t.reset?"reset":"set";i[o](n,t),e&&e(i,n,t),i.trigger("sync",i,n,t)},M(this,t),this.sync("read",this,t)},create:function(t,e){if(e=e?r.clone(e):{},!(t=this._prepareModel(t,e)))return!1;e.wait||this.add(t,e);var i=this,n=e.success;return e.success=function(t,e,o){o.wait&&i.add(t,o),n&&n(t,e,o)},t.save(null,e),t},parse:function(t){return t},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(t instanceof u)return t.collection||(t.collection=this),t;e=e?r.clone(e):{},e.collection=this;var i=new this.model(t,e);return i.validationError?(this.trigger("invalid",this,i.validationError,e),!1):i},_removeReference:function(t){this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,i,n){("add"!==t&&"remove"!==t||i===this)&&("destroy"===t&&this.remove(e,n),e&&t==="change:"+e.idAttribute&&(delete this._byId[e.previous(e.idAttribute)],null!=e.id&&(this._byId[e.id]=e)),this.trigger.apply(this,arguments))}});var m=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain"];r.each(m,function(t){d.prototype[t]=function(){var e=o.call(arguments);return e.unshift(this.models),r[t].apply(r,e)}});var v=["groupBy","countBy","sortBy"];r.each(v,function(t){d.prototype[t]=function(e,i){var n=r.isFunction(e)?e:function(t){return t.get(e)};return r[t](this.models,n,i)}});var y=t.View=function(t){this.cid=r.uniqueId("view"),t||(t={}),r.extend(this,r.pick(t,_)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},b=/^(\S+)\s*(.*)$/,_=["model","collection","el","id","attributes","className","tagName","events"];r.extend(y.prototype,s,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,i){return this.$el&&this.undelegateEvents(),this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0],i!==!1&&this.delegateEvents(),this},delegateEvents:function(t){if(!t&&!(t=r.result(this,"events")))return this;this.undelegateEvents();for(var e in t){var i=t[e];if(r.isFunction(i)||(i=this[t[e]]),i){var n=e.match(b),o=n[1],s=n[2];i=r.bind(i,this),o+=".delegateEvents"+this.cid,""===s?this.$el.on(o,i):this.$el.on(o,s,i)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(r.result(this,"el"),!1);else{var e=r.extend({},r.result(this,"attributes"));this.id&&(e.id=r.result(this,"id")),this.className&&(e["class"]=r.result(this,"className"));var i=t.$("<"+r.result(this,"tagName")+">").attr(e);this.setElement(i,!1)}}}),t.sync=function(e,i,n){var o=E[e];r.defaults(n||(n={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var s={type:o,dataType:"json"};if(n.url||(s.url=r.result(i,"url")||L()),null!=n.data||!i||"create"!==e&&"update"!==e&&"patch"!==e||(s.contentType="application/json",s.data=JSON.stringify(n.attrs||i.toJSON(n))),n.emulateJSON&&(s.contentType="application/x-www-form-urlencoded",s.data=s.data?{model:s.data}:{}),n.emulateHTTP&&("PUT"===o||"DELETE"===o||"PATCH"===o)){s.type="POST",n.emulateJSON&&(s.data._method=o);var a=n.beforeSend;n.beforeSend=function(t){return t.setRequestHeader("X-HTTP-Method-Override",o),a?a.apply(this,arguments):void 0}}"GET"===s.type||n.emulateJSON||(s.processData=!1),"PATCH"===s.type&&C&&(s.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var l=n.xhr=t.ajax(r.extend(s,n));return i.trigger("request",i,l,n),l};var C=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),E={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var T=t.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},A=/\((.*?)\)/g,w=/(\(\?)?:\w+/g,D=/\*\w+/g,x=/[\-{}\[\]+?.,\\\^$|#\s]/g;r.extend(T.prototype,s,{initialize:function(){},route:function(e,i,n){r.isRegExp(e)||(e=this._routeToRegExp(e)),r.isFunction(i)&&(n=i,i=""),n||(n=this[i]);var o=this;return t.history.route(e,function(r){var s=o._extractParameters(e,r);n&&n.apply(o,s),o.trigger.apply(o,["route:"+i].concat(s)),o.trigger("route",i,s),t.history.trigger("route",o,i,s)}),this},navigate:function(e,i){return t.history.navigate(e,i),this},_bindRoutes:function(){if(this.routes){this.routes=r.result(this,"routes");for(var t,e=r.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(x,"\\$&").replace(A,"(?:$1)?").replace(w,function(t,e){return e?t:"([^/]+)"}).replace(D,"(.*?)"),new RegExp("^"+t+"$")},_extractParameters:function(t,e){var i=t.exec(e).slice(1);return r.map(i,function(t){return t?decodeURIComponent(t):null})}});var I=t.History=function(){this.handlers=[],r.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},P=/^[#\/]|\s+$/g,j=/^\/+|\/+$/g,S=/msie [\w.]+/,R=/\/$/,N=/[?#].*$/;I.started=!1,r.extend(I.prototype,s,{interval:50,getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getFragment:function(t,e){if(null==t)if(this._hasPushState||!this._wantsHashChange||e){t=this.location.pathname;var i=this.root.replace(R,"");t.indexOf(i)||(t=t.slice(i.length))}else t=this.getHash();return t.replace(P,"")},start:function(e){if(I.started)throw new Error("Backbone.history has already been started");I.started=!0,this.options=r.extend({root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var i=this.getFragment(),n=document.documentMode,o=S.exec(navigator.userAgent.toLowerCase())&&(!n||7>=n);this.root=("/"+this.root+"/").replace(j,"/"),o&&this._wantsHashChange&&(this.iframe=t.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(i)),this._hasPushState?t.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!o?t.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=i;var s=this.location,a=s.pathname.replace(/[^\/]$/,"$&/")===this.root;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!a)return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0;this._hasPushState&&a&&s.hash&&(this.fragment=this.getHash().replace(P,""),this.history.replaceState({},document.title,this.root+this.fragment+s.search))}return this.options.silent?void 0:this.loadUrl()},stop:function(){t.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),I.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(){var t=this.getFragment();return t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe))),t===this.fragment?!1:(this.iframe&&this.navigate(t),this.loadUrl(),void 0)},loadUrl:function(t){return t=this.fragment=this.getFragment(t),r.any(this.handlers,function(e){return e.route.test(t)?(e.callback(t),!0):void 0})},navigate:function(t,e){if(!I.started)return!1;e&&e!==!0||(e={trigger:!!e});var i=this.root+(t=this.getFragment(t||""));if(t=t.replace(N,""),this.fragment!==t){if(this.fragment=t,""===t&&"/"!==i&&(i=i.slice(0,-1)),this._hasPushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,i);else{if(!this._wantsHashChange)return this.location.assign(i);this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getFragment(this.getHash(this.iframe))&&(e.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,t,e.replace))}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,i){if(i){var n=t.href.replace(/(javascript:|#).*$/,"");t.replace(n+"#"+e)}else t.hash="#"+e}}),t.history=new I;var O=function(t,e){var i,n=this;i=t&&r.has(t,"constructor")?t.constructor:function(){return n.apply(this,arguments)},r.extend(i,n,e);var o=function(){this.constructor=i};return o.prototype=n.prototype,i.prototype=new o,t&&r.extend(i.prototype,t),i.__super__=n.prototype,i};u.extend=d.extend=T.extend=y.extend=I.extend=O;var L=function(){throw new Error('A "url" property or function must be specified')},M=function(t,e){var i=e.error;e.error=function(n){i&&i(t,n,e),t.trigger("error",t,n,e)}}}.call(this),define("backbone",["underscore","jquery"],function(t){return function(){var e;return e||t.Backbone}}(this)),Backbone.ChildViewContainer=function(t,e){var i=function(t){this._views={},this._indexByModel={},this._indexByCustom={},this._updateLength(),e.each(t,this.add,this)};e.extend(i.prototype,{add:function(t,e){var i=t.cid;this._views[i]=t,t.model&&(this._indexByModel[t.model.cid]=i),e&&(this._indexByCustom[e]=i),this._updateLength()},findByModel:function(t){return this.findByModelCid(t.cid)},findByModelCid:function(t){var e=this._indexByModel[t];return this.findByCid(e)},findByCustom:function(t){var e=this._indexByCustom[t];return this.findByCid(e)},findByIndex:function(t){return e.values(this._views)[t]},findByCid:function(t){return this._views[t]},remove:function(t){var i=t.cid;t.model&&delete this._indexByModel[t.model.cid],e.any(this._indexByCustom,function(t,e){return t===i?(delete this._indexByCustom[e],!0):void 0},this),delete this._views[i],this._updateLength()},call:function(t){this.apply(t,e.tail(arguments))},apply:function(t,i){e.each(this._views,function(n){e.isFunction(n[t])&&n[t].apply(n,i||[])})},_updateLength:function(){this.length=e.size(this._views)}});var n=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"];return e.each(n,function(t){i.prototype[t]=function(){var i=e.values(this._views),n=[i].concat(e.toArray(arguments));return e[t].apply(e,n)}}),i}(Backbone,_),Backbone.Wreqr=function(t,e,i){var n={};return n.Handlers=function(t,e){var i=function(t){this.options=t,this._wreqrHandlers={},e.isFunction(this.initialize)&&this.initialize(t)};return i.extend=t.Model.extend,e.extend(i.prototype,t.Events,{setHandlers:function(t){e.each(t,function(t,i){var n=null;e.isObject(t)&&!e.isFunction(t)&&(n=t.context,t=t.callback),this.setHandler(i,t,n)},this)},setHandler:function(t,e,i){var n={callback:e,context:i};this._wreqrHandlers[t]=n,this.trigger("handler:add",t,e,i)},hasHandler:function(t){return!!this._wreqrHandlers[t]},getHandler:function(t){var e=this._wreqrHandlers[t];if(!e)throw new Error("Handler not found for '"+t+"'");return function(){var t=Array.prototype.slice.apply(arguments);return e.callback.apply(e.context,t)}},removeHandler:function(t){delete this._wreqrHandlers[t]},removeAllHandlers:function(){this._wreqrHandlers={}}}),i}(t,i),n.CommandStorage=function(){var e=function(t){this.options=t,this._commands={},i.isFunction(this.initialize)&&this.initialize(t)};return i.extend(e.prototype,t.Events,{getCommands:function(t){var e=this._commands[t];return e||(e={command:t,instances:[]},this._commands[t]=e),e},addCommand:function(t,e){var i=this.getCommands(t);i.instances.push(e)},clearCommands:function(t){var e=this.getCommands(t);e.instances=[]}}),e}(),n.Commands=function(t){return t.Handlers.extend({storageType:t.CommandStorage,constructor:function(e){this.options=e||{},this._initializeStorage(this.options),this.on("handler:add",this._executeCommands,this);var i=Array.prototype.slice.call(arguments);t.Handlers.prototype.constructor.apply(this,i)},execute:function(t,e){t=arguments[0],e=Array.prototype.slice.call(arguments,1),this.hasHandler(t)?this.getHandler(t).apply(this,e):this.storage.addCommand(t,e)},_executeCommands:function(t,e,n){var o=this.storage.getCommands(t);i.each(o.instances,function(t){e.apply(n,t)}),this.storage.clearCommands(t)},_initializeStorage:function(t){var e,n=t.storageType||this.storageType;e=i.isFunction(n)?new n:n,this.storage=e}})}(n),n.RequestResponse=function(t){return t.Handlers.extend({request:function(){var t=arguments[0],e=Array.prototype.slice.call(arguments,1);return this.getHandler(t).apply(this,e)}})}(n),n.EventAggregator=function(t,e){var i=function(){};return i.extend=t.Model.extend,e.extend(i.prototype,t.Events),i}(t,i),n}(Backbone,Backbone.Marionette,_);var Marionette=function(t,e,i){function n(t){return s.call(t)}function o(t,e){var i=new Error(t);throw i.name=e||"Error",i}var r={};e.Marionette=r,r.$=e.$;var s=Array.prototype.slice;return r.extend=e.Model.extend,r.getOption=function(t,e){if(t&&e){var i;return i=t.options&&e in t.options&&void 0!==t.options[e]?t.options[e]:t[e]}},r.triggerMethod=function(){function t(t,e,i){return i.toUpperCase()}var e=/(^|:)(\w)/gi,n=function(n){var o="on"+n.replace(e,t),r=this[o];return i.isFunction(this.trigger)&&this.trigger.apply(this,arguments),i.isFunction(r)?r.apply(this,i.tail(arguments)):void 0};return n}(),r.MonitorDOMRefresh=function(t){function e(t){t._isShown=!0,o(t)}function n(t){t._isRendered=!0,o(t)}function o(t){t._isShown&&t._isRendered&&r(t)&&i.isFunction(t.triggerMethod)&&t.triggerMethod("dom:refresh")}function r(e){return t.contains(e.el)}return function(t){t.listenTo(t,"show",function(){e(t)}),t.listenTo(t,"render",function(){n(t)})}}(document.documentElement),function(t){function e(t,e,n,r){var s=r.split(/\s+/);i.each(s,function(i){var r=t[i];r||o("Method '"+i+"' was configured as an event handler, but does not exist."),t.listenTo(e,n,r,t)})}function n(t,e,i,n){t.listenTo(e,i,n,t)}function r(t,e,n,o){var r=o.split(/\s+/);i.each(r,function(i){var o=t[i];t.stopListening(e,n,o,t)})}function s(t,e,i,n){t.stopListening(e,i,n,t)}function a(t,e,n,o,r){e&&n&&(i.isFunction(n)&&(n=n.call(t)),i.each(n,function(n,s){i.isFunction(n)?o(t,e,s,n):r(t,e,s,n)}))}t.bindEntityEvents=function(t,i,o){a(t,i,o,n,e)},t.unbindEntityEvents=function(t,e,i){a(t,e,i,s,r)}}(r),r.Callbacks=function(){this._deferred=r.$.Deferred(),this._callbacks=[]},i.extend(r.Callbacks.prototype,{add:function(t,e){this._callbacks.push({cb:t,ctx:e}),this._deferred.done(function(i,n){e&&(i=e),t.call(i,n)})},run:function(t,e){this._deferred.resolve(e,t)},reset:function(){var t=this._callbacks;this._deferred=r.$.Deferred(),this._callbacks=[],i.each(t,function(t){this.add(t.cb,t.ctx)},this)}}),r.Controller=function(t){this.triggerMethod=r.triggerMethod,this.options=t||{},i.isFunction(this.initialize)&&this.initialize(this.options)},r.Controller.extend=r.extend,i.extend(r.Controller.prototype,e.Events,{close:function(){this.stopListening(),this.triggerMethod("close"),this.unbind()}}),r.Region=function(t){if(this.options=t||{},this.el=r.getOption(this,"el"),!this.el){var e=new Error("An 'el' must be specified for a region.");throw e.name="NoElError",e}if(this.initialize){var i=Array.prototype.slice.apply(arguments);this.initialize.apply(this,i)}},i.extend(r.Region,{buildRegion:function(t,e){var n="string"==typeof t,o="string"==typeof t.selector,r="undefined"==typeof t.regionType,s="function"==typeof t;if(!s&&!n&&!o)throw new Error("Region must be specified as a Region type, a selector string or an object with selector property");var a,l;n&&(a=t),t.selector&&(a=t.selector,delete t.selector),s&&(l=t),!s&&r&&(l=e),t.regionType&&(l=t.regionType,delete t.regionType),(n||s)&&(t={}),t.el=a;var c=new l(t);return t.parentEl&&(c.getEl=function(e){var n=t.parentEl;return i.isFunction(n)&&(n=n()),n.find(e)}),c}}),i.extend(r.Region.prototype,e.Events,{show:function(t){this.ensureEl();var e=t.isClosed||i.isUndefined(t.$el),n=t!==this.currentView;n&&this.close(),t.render(),(n||e)&&this.open(t),this.currentView=t,r.triggerMethod.call(this,"show",t),r.triggerMethod.call(t,"show")},ensureEl:function(){this.$el&&0!==this.$el.length||(this.$el=this.getEl(this.el))},getEl:function(t){return r.$(t)},open:function(t){this.$el.empty().append(t.el)},close:function(){var t=this.currentView;t&&!t.isClosed&&(t.close?t.close():t.remove&&t.remove(),r.triggerMethod.call(this,"close",t),delete this.currentView)},attachView:function(t){this.currentView=t},reset:function(){this.close(),delete this.$el}}),r.Region.extend=r.extend,r.RegionManager=function(t){var e=t.Controller.extend({constructor:function(e){this._regions={},t.Controller.prototype.constructor.call(this,e)},addRegions:function(t,e){var n={};return i.each(t,function(t,o){"string"==typeof t&&(t={selector:t}),t.selector&&(t=i.defaults({},t,e));var r=this.addRegion(o,t);n[o]=r},this),n},addRegion:function(e,n){var o,r=i.isObject(n),s=i.isString(n),a=!!n.selector;return o=s||r&&a?t.Region.buildRegion(n,t.Region):i.isFunction(n)?t.Region.buildRegion(n,t.Region):n,this._store(e,o),this.triggerMethod("region:add",e,o),o},get:function(t){return this._regions[t]},removeRegion:function(t){var e=this._regions[t];this._remove(t,e)},removeRegions:function(){i.each(this._regions,function(t,e){this._remove(e,t)},this)},closeRegions:function(){i.each(this._regions,function(t){t.close()},this)},close:function(){this.removeRegions();var e=Array.prototype.slice.call(arguments);t.Controller.prototype.close.apply(this,e)},_store:function(t,e){this._regions[t]=e,this._setLength()},_remove:function(t,e){e.close(),delete this._regions[t],this._setLength(),this.triggerMethod("region:remove",t,e)},_setLength:function(){this.length=i.size(this._regions)}}),n=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"];return i.each(n,function(t){e.prototype[t]=function(){var e=i.values(this._regions),n=[e].concat(i.toArray(arguments));return i[t].apply(i,n)}}),e}(r),r.TemplateCache=function(t){this.templateId=t},i.extend(r.TemplateCache,{templateCaches:{},get:function(t){var e=this.templateCaches[t];return e||(e=new r.TemplateCache(t),this.templateCaches[t]=e),e.load()},clear:function(){var t,e=n(arguments),i=e.length;if(i>0)for(t=0;i>t;t++)delete this.templateCaches[e[t]];else this.templateCaches={}}}),i.extend(r.TemplateCache.prototype,{load:function(){if(this.compiledTemplate)return this.compiledTemplate;var t=this.loadTemplate(this.templateId);return this.compiledTemplate=this.compileTemplate(t),this.compiledTemplate},loadTemplate:function(t){var e=r.$(t).html();return e&&0!==e.length||o("Could not find template: '"+t+"'","NoTemplateError"),e},compileTemplate:function(t){return i.template(t)}}),r.Renderer={render:function(t,e){if(!t){var i=new Error("Cannot render the template since it's false, null or undefined.");throw i.name="TemplateNotFoundError",i}var n;return(n="function"==typeof t?t:r.TemplateCache.get(t))(e)}},r.View=e.View.extend({constructor:function(t){i.bindAll(this,"render");var n=Array.prototype.slice.apply(arguments);this.options=i.extend({},i.result(this,"options"),i.isFunction(t)?t.call(this):t),this.events=this.normalizeUIKeys(i.result(this,"events")),e.View.prototype.constructor.apply(this,n),r.MonitorDOMRefresh(this),this.listenTo(this,"show",this.onShowCalled,this)},triggerMethod:r.triggerMethod,getTemplate:function(){return r.getOption(this,"template")},mixinTemplateHelpers:function(t){t=t||{};var e=r.getOption(this,"templateHelpers");return i.isFunction(e)&&(e=e.call(this)),i.extend(t,e)},normalizeUIKeys:function(t){return"undefined"!=typeof t?(i.each(i.keys(t),function(e){var i=e.split("@ui.");2===i.length&&(t[i[0]+this.ui[i[1]]]=t[e],delete t[e])},this),t):void 0},configureTriggers:function(){if(this.triggers){var t={},e=this.normalizeUIKeys(i.result(this,"triggers"));return i.each(e,function(e,n){var o=i.isObject(e),r=o?e.event:e;t[n]=function(t){if(t){var i=t.preventDefault,n=t.stopPropagation,s=o?e.preventDefault:i,a=o?e.stopPropagation:n;s&&i&&i.apply(t),a&&n&&n.apply(t)}var l={view:this,model:this.model,collection:this.collection};this.triggerMethod(r,l)}},this),t}},delegateEvents:function(t){this._delegateDOMEvents(t),r.bindEntityEvents(this,this.model,r.getOption(this,"modelEvents")),r.bindEntityEvents(this,this.collection,r.getOption(this,"collectionEvents"))},_delegateDOMEvents:function(t){t=t||this.events,i.isFunction(t)&&(t=t.call(this));var n={},o=this.configureTriggers();i.extend(n,t,o),e.View.prototype.delegateEvents.call(this,n)},undelegateEvents:function(){var t=Array.prototype.slice.call(arguments);e.View.prototype.undelegateEvents.apply(this,t),r.unbindEntityEvents(this,this.model,r.getOption(this,"modelEvents")),r.unbindEntityEvents(this,this.collection,r.getOption(this,"collectionEvents"))
},onShowCalled:function(){},close:function(){if(!this.isClosed){var t=this.triggerMethod("before:close");t!==!1&&(this.isClosed=!0,this.triggerMethod("close"),this.unbindUIElements(),this.remove())}},bindUIElements:function(){if(this.ui){this._uiBindings||(this._uiBindings=this.ui);var t=i.result(this,"_uiBindings");this.ui={},i.each(i.keys(t),function(e){var i=t[e];this.ui[e]=this.$(i)},this)}},unbindUIElements:function(){this.ui&&this._uiBindings&&(i.each(this.ui,function(t,e){delete this.ui[e]},this),this.ui=this._uiBindings,delete this._uiBindings)}}),r.ItemView=r.View.extend({constructor:function(){r.View.prototype.constructor.apply(this,n(arguments))},serializeData:function(){var t={};return this.model?t=this.model.toJSON():this.collection&&(t={items:this.collection.toJSON()}),t},render:function(){this.isClosed=!1,this.triggerMethod("before:render",this),this.triggerMethod("item:before:render",this);var t=this.serializeData();t=this.mixinTemplateHelpers(t);var e=this.getTemplate(),i=r.Renderer.render(e,t);return this.$el.html(i),this.bindUIElements(),this.triggerMethod("render",this),this.triggerMethod("item:rendered",this),this},close:function(){this.isClosed||(this.triggerMethod("item:before:close"),r.View.prototype.close.apply(this,n(arguments)),this.triggerMethod("item:closed"))}}),r.CollectionView=r.View.extend({itemViewEventPrefix:"itemview",constructor:function(){this._initChildViewStorage(),r.View.prototype.constructor.apply(this,n(arguments)),this._initialEvents(),this.initRenderBuffer()},initRenderBuffer:function(){this.elBuffer=document.createDocumentFragment(),this._bufferedChildren=[]},startBuffering:function(){this.initRenderBuffer(),this.isBuffering=!0},endBuffering:function(){this.isBuffering=!1,this.appendBuffer(this,this.elBuffer),this._triggerShowBufferedChildren(),this.initRenderBuffer()},_triggerShowBufferedChildren:function(){this._isShown&&(i.each(this._bufferedChildren,function(t){r.triggerMethod.call(t,"show")}),this._bufferedChildren=[])},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this.addChildView,this),this.listenTo(this.collection,"remove",this.removeItemView,this),this.listenTo(this.collection,"reset",this.render,this))},addChildView:function(t){this.closeEmptyView();var e=this.getItemView(t),i=this.collection.indexOf(t);this.addItemView(t,e,i)},onShowCalled:function(){this.children.each(function(t){r.triggerMethod.call(t,"show")})},triggerBeforeRender:function(){this.triggerMethod("before:render",this),this.triggerMethod("collection:before:render",this)},triggerRendered:function(){this.triggerMethod("render",this),this.triggerMethod("collection:rendered",this)},render:function(){return this.isClosed=!1,this.triggerBeforeRender(),this._renderChildren(),this.triggerRendered(),this},_renderChildren:function(){this.startBuffering(),this.closeEmptyView(),this.closeChildren(),this.collection&&this.collection.length>0?this.showCollection():this.showEmptyView(),this.endBuffering()},showCollection:function(){var t;this.collection.each(function(e,i){t=this.getItemView(e),this.addItemView(e,t,i)},this)},showEmptyView:function(){var t=this.getEmptyView();if(t&&!this._showingEmptyView){this._showingEmptyView=!0;var i=new e.Model;this.addItemView(i,t,0)}},closeEmptyView:function(){this._showingEmptyView&&(this.closeChildren(),delete this._showingEmptyView)},getEmptyView:function(){return r.getOption(this,"emptyView")},getItemView:function(){var t=r.getOption(this,"itemView");return t||o("An `itemView` must be specified","NoItemViewError"),t},addItemView:function(t,e,n){var o=r.getOption(this,"itemViewOptions");i.isFunction(o)&&(o=o.call(this,t,n));var s=this.buildItemView(t,e,o);return this.addChildViewEventForwarding(s),this.triggerMethod("before:item:added",s),this.children.add(s),this.renderItemView(s,n),this._isShown&&!this.isBuffering&&r.triggerMethod.call(s,"show"),this.triggerMethod("after:item:added",s),s},addChildViewEventForwarding:function(t){var e=r.getOption(this,"itemViewEventPrefix");this.listenTo(t,"all",function(){var o=n(arguments),s=o[0],a=this.getItemEvents();o[0]=e+":"+s,o.splice(1,0,t),"undefined"!=typeof a&&i.isFunction(a[s])&&a[s].apply(this,o),r.triggerMethod.apply(this,o)},this)},getItemEvents:function(){return i.isFunction(this.itemEvents)?this.itemEvents.call(this):this.itemEvents},renderItemView:function(t,e){t.render(),this.appendHtml(this,t,e)},buildItemView:function(t,e,n){var o=i.extend({model:t},n);return new e(o)},removeItemView:function(t){var e=this.children.findByModel(t);this.removeChildView(e),this.checkEmpty()},removeChildView:function(t){t&&(this.stopListening(t),t.close?t.close():t.remove&&t.remove(),this.children.remove(t)),this.triggerMethod("item:removed",t)},checkEmpty:function(){this.collection&&0!==this.collection.length||this.showEmptyView()},appendBuffer:function(t,e){t.$el.append(e)},appendHtml:function(t,e){t.isBuffering?(t.elBuffer.appendChild(e.el),t._bufferedChildren.push(e)):t.$el.append(e.el)},_initChildViewStorage:function(){this.children=new e.ChildViewContainer},close:function(){this.isClosed||(this.triggerMethod("collection:before:close"),this.closeChildren(),this.triggerMethod("collection:closed"),r.View.prototype.close.apply(this,n(arguments)))},closeChildren:function(){this.children.each(function(t){this.removeChildView(t)},this),this.checkEmpty()}}),r.CompositeView=r.CollectionView.extend({constructor:function(){r.CollectionView.prototype.constructor.apply(this,n(arguments))},_initialEvents:function(){this.once("render",function(){this.collection&&(this.listenTo(this.collection,"add",this.addChildView,this),this.listenTo(this.collection,"remove",this.removeItemView,this),this.listenTo(this.collection,"reset",this._renderChildren,this))})},getItemView:function(){var t=r.getOption(this,"itemView")||this.constructor;return t||o("An `itemView` must be specified","NoItemViewError"),t},serializeData:function(){var t={};return this.model&&(t=this.model.toJSON()),t},render:function(){this.isRendered=!0,this.isClosed=!1,this.resetItemViewContainer(),this.triggerBeforeRender();var t=this.renderModel();return this.$el.html(t),this.bindUIElements(),this.triggerMethod("composite:model:rendered"),this._renderChildren(),this.triggerMethod("composite:rendered"),this.triggerRendered(),this},_renderChildren:function(){this.isRendered&&(r.CollectionView.prototype._renderChildren.call(this),this.triggerMethod("composite:collection:rendered"))},renderModel:function(){var t={};t=this.serializeData(),t=this.mixinTemplateHelpers(t);var e=this.getTemplate();return r.Renderer.render(e,t)},appendBuffer:function(t,e){var i=this.getItemViewContainer(t);i.append(e)},appendHtml:function(t,e){if(t.isBuffering)t.elBuffer.appendChild(e.el),t._bufferedChildren.push(e);else{var i=this.getItemViewContainer(t);i.append(e.el)}},getItemViewContainer:function(t){if("$itemViewContainer"in t)return t.$itemViewContainer;var e,n=r.getOption(t,"itemViewContainer");if(n){var s=i.isFunction(n)?n.call(this):n;e=t.$(s),e.length<=0&&o("The specified `itemViewContainer` was not found: "+t.itemViewContainer,"ItemViewContainerMissingError")}else e=t.$el;return t.$itemViewContainer=e,e},resetItemViewContainer:function(){this.$itemViewContainer&&delete this.$itemViewContainer}}),r.Layout=r.ItemView.extend({regionType:r.Region,constructor:function(t){t=t||{},this._firstRender=!0,this._initializeRegions(t),r.ItemView.prototype.constructor.call(this,t)},render:function(){this.isClosed&&this._initializeRegions(),this._firstRender?this._firstRender=!1:this.isClosed||this._reInitializeRegions();var t=Array.prototype.slice.apply(arguments),e=r.ItemView.prototype.render.apply(this,t);return e},close:function(){if(!this.isClosed){this.regionManager.close();var t=Array.prototype.slice.apply(arguments);r.ItemView.prototype.close.apply(this,t)}},addRegion:function(t,e){var i={};return i[t]=e,this._buildRegions(i)[t]},addRegions:function(t){return this.regions=i.extend({},this.regions,t),this._buildRegions(t)},removeRegion:function(t){return delete this.regions[t],this.regionManager.removeRegion(t)},_buildRegions:function(t){var e=this,i={regionType:r.getOption(this,"regionType"),parentEl:function(){return e.$el}};return this.regionManager.addRegions(t,i)},_initializeRegions:function(t){var e;this._initRegionManager(),e=i.isFunction(this.regions)?this.regions(t):this.regions||{},this.addRegions(e)},_reInitializeRegions:function(){this.regionManager.closeRegions(),this.regionManager.each(function(t){t.reset()})},_initRegionManager:function(){this.regionManager=new r.RegionManager,this.listenTo(this.regionManager,"region:add",function(t,e){this[t]=e,this.trigger("region:add",t,e)}),this.listenTo(this.regionManager,"region:remove",function(t,e){delete this[t],this.trigger("region:remove",t,e)})}}),r.AppRouter=e.Router.extend({constructor:function(t){e.Router.prototype.constructor.apply(this,n(arguments)),this.options=t||{};var i=r.getOption(this,"appRoutes"),o=this._getController();this.processAppRoutes(o,i)},appRoute:function(t,e){var i=this._getController();this._addAppRoute(i,t,e)},processAppRoutes:function(t,e){if(e){var n=i.keys(e).reverse();i.each(n,function(i){this._addAppRoute(t,i,e[i])},this)}},_getController:function(){return r.getOption(this,"controller")},_addAppRoute:function(t,e,n){var o=t[n];if(!o)throw new Error("Method '"+n+"' was not found on the controller");this.route(e,n,i.bind(o,t))}}),r.Application=function(t){this._initRegionManager(),this._initCallbacks=new r.Callbacks,this.vent=new e.Wreqr.EventAggregator,this.commands=new e.Wreqr.Commands,this.reqres=new e.Wreqr.RequestResponse,this.submodules={},i.extend(this,t),this.triggerMethod=r.triggerMethod},i.extend(r.Application.prototype,e.Events,{execute:function(){var t=Array.prototype.slice.apply(arguments);this.commands.execute.apply(this.commands,t)},request:function(){var t=Array.prototype.slice.apply(arguments);return this.reqres.request.apply(this.reqres,t)},addInitializer:function(t){this._initCallbacks.add(t)},start:function(t){this.triggerMethod("initialize:before",t),this._initCallbacks.run(t,this),this.triggerMethod("initialize:after",t),this.triggerMethod("start",t)},addRegions:function(t){return this._regionManager.addRegions(t)},closeRegions:function(){this._regionManager.closeRegions()},removeRegion:function(t){this._regionManager.removeRegion(t)},getRegion:function(t){return this._regionManager.get(t)},module:function(){var t=n(arguments);return t.unshift(this),r.Module.create.apply(r.Module,t)},_initRegionManager:function(){this._regionManager=new r.RegionManager,this.listenTo(this._regionManager,"region:add",function(t,e){this[t]=e}),this.listenTo(this._regionManager,"region:remove",function(t){delete this[t]})}}),r.Application.extend=r.extend,r.Module=function(t,e){this.moduleName=t,this.submodules={},this._setupInitializersAndFinalizers(),this.app=e,this.startWithParent=!0,this.triggerMethod=r.triggerMethod},i.extend(r.Module.prototype,e.Events,{addInitializer:function(t){this._initializerCallbacks.add(t)},addFinalizer:function(t){this._finalizerCallbacks.add(t)},start:function(t){this._isInitialized||(i.each(this.submodules,function(e){e.startWithParent&&e.start(t)}),this.triggerMethod("before:start",t),this._initializerCallbacks.run(t,this),this._isInitialized=!0,this.triggerMethod("start",t))},stop:function(){this._isInitialized&&(this._isInitialized=!1,r.triggerMethod.call(this,"before:stop"),i.each(this.submodules,function(t){t.stop()}),this._finalizerCallbacks.run(void 0,this),this._initializerCallbacks.reset(),this._finalizerCallbacks.reset(),r.triggerMethod.call(this,"stop"))},addDefinition:function(t,e){this._runModuleDefinition(t,e)},_runModuleDefinition:function(t,n){if(t){var o=i.flatten([this,this.app,e,r,r.$,i,n]);t.apply(this,o)}},_setupInitializersAndFinalizers:function(){this._initializerCallbacks=new r.Callbacks,this._finalizerCallbacks=new r.Callbacks}}),i.extend(r.Module,{create:function(t,e,o){var r=t,s=n(arguments);s.splice(0,3),e=e.split(".");var a=e.length,l=[];return l[a-1]=o,i.each(e,function(e,i){var n=r;r=this._getModule(n,e,t),this._addModuleDefinition(n,r,l[i],s)},this),r},_getModule:function(t,e,i){var n=t[e];return n||(n=new r.Module(e,i),t[e]=n,t.submodules[e]=n),n},_addModuleDefinition:function(t,e,n,o){var r,s;i.isFunction(n)?(r=n,s=!0):i.isObject(n)?(r=n.define,s=n.startWithParent):s=!0,r&&e.addDefinition(r,o),e.startWithParent=e.startWithParent&&s,e.startWithParent&&!e.startWithParentIsConfigured&&(e.startWithParentIsConfigured=!0,t.addInitializer(function(t){e.startWithParent&&e.start(t)}))}}),r}(this,Backbone,_);define("marionette",["jquery","underscore","backbone"],function(t){return function(){var e;return e||t.Backbone.Marionette}}(this)),define("player/events/eventsconst",["require","exports","module"],function(){var t={DATA_LOADED:"dataLoaded",ACTIVITY_END_EVENT:"activityEndEvent",ACTIVITY_GO_TO_NEXT_ACTIVITY_EVENT:"activiytyGoToNextActivityEvent",ACTIVITY_GO_TO_PREVIOUS_ACTIVITY_EVENT:"activiytyGoToPreviousActivityEvent",JUMP_TO_ACTIVITY_BY_INDEX_EVENT:"jumpToActivityByIndexEvent",JUMP_TO_ACTIVITY_BY_ID_EVENT:"jumpToActivityByIDEvent",CREATE_COMPONENT_EVENT:"createComponentEvent",ON_ACTIVITY_SUCCESSFULLY_ADDED_IN_REGION:"onActivitySuccessfullyAddedInRegion",CREATE_AND_INIT_ACTIVITY_HTML:"createAndInitActivityHtml",SET_DRAWING_CANVAS:"setDrawingCanvas",DRAWING_COMMON_TASK:"drawingCommonTask",REGION_INITLIZE_UPATE_EVENT:"regionInitlizeAndUpdateEvent",PLAYER_INITLIZE_COMPLETE_EVENT:"playerInitlizeCompleteEvent",REGION_INITLIZE_COMPLETE_EVENT:"regionInitlizeCompleteEvent",REGION_INITLIZE_START_EVENT:"regionInitlizeStartEvent",UPDATE_PLAYER_SIZE_EVENT:"updatePlayerSizeEvent",LAUNCH_NEXT_ACTVITY:"launchNextActivity",LAUNCH_PREVIOUS_ACTIVITY:"launchPreviousActivity",ACTIVITY_PREINIT_TASK:"activityPreinitTask",PREPARE_INLINE_TEMPLATE_DATA:"prepareInlineTemplateDataTask",UPDATE_COMPLETE_EVENT:"updateCompleteEvent",PLAY_AUDIO:"initAndPlayAudio",RESTART_AUDIO:"restartAudio",STOP_AUDIO:"stopAudio",PAUSE_AUDIO:"pauseAudio",RESUME_AUDIO:"resumeAudio",VOLUME_CHANGE:"volumeChange",DEFAULT_VOLUME_CHANGE:"defaultVolumeChange",PAUSE_ALL_MEDIA:"pauseAllMedia",RESUME_ALL_MEDIA:"resumeAllMedia",PLAYER_COMMON_TASK_EVENT:"playerCommonTaskEvent",BROADCAST_EVENT:"broadcastEvent",BROADCAST_EVENT_RECEIVER:"broadcastEventReceiver",STOP_BROADCAST_EVENT_RECEIVER:"stopBroadcastEventReceiver",SHOW_HIDE_REGION:"showHideRegion",LAUNCH_ACTIVITY_IN_REGION:"launchActivityInRegion",REMOVE_COMPONENT_EDITORS:"removeComponentEditorFootprints",SHOW_PRELOADER:"showPreloader",HIDE_PRELOADER:"hidePreloader",REMVOE_REFERENCE:"removeScriptAndCSSReference",TYPE_CSS:"css",TYPE_JS:"js",HREF:"href",NONE:"none",LINK:"link",SCRIPT:"script",SRC:"src",MANAGE_COMMON_BROADCAST_EVENT:"manageCommonBroadcastEvent",CALL_AND_UPDATE_COMPONENT:"callAndUpdateComponent",FIRST_SCREEN_LOAD_EVENT:"firstScreenLoadEvent",LAST_SCREEN_LOAD_EVENT:"lastScreenLoadEvent",MIDDLE_SCREEN_LOAD_EVENT:"middleScreenLoadEvent",MANAGE_NEXT_BACK_NEVIGATION_BUTTON:"manageNextBackNevigationButton",COMP_EVENT_REGISTER_COMPLETE:"compEventRegisterComplete"};return t}),define("player/constants/errorconst",[],function(){var t={CONFIG_MISSING_ACTIVITY_DATA:"Activity config does not have any activity data!",ACTIVITY_NOT_FOUND_BY_THIS_ID:"No activity found by this id!!!",ACITIVITY_MUST_EXTEND_BASE_CLASS:"You need to extend BaseActivity to add this activity in view.",ACTIVITY_ALREADY_REGISTERED:" is already registered with the view.",LOCALIZATION_LANGUAGE_LOAD_FAILD:"Localization language load failed.",ALL_ACTIVITY_COMPONENT_NOT_DESTROYED:"Created component(s) in this activity is not destroyed. Call destroy method of each component(s).",BASE_ACTIVITY_DESTROY_NOT_CALLED:"Pleaes call BaseActivity 'destroy' method before to unload the activity.",DESTROY_NOT_IMPLMENENTED_IN_EDIOTR_CHILD_CLASS:"Destroy is not implemented in Editor child class.",PLEASE_CALL_SUPER_CLASS_DESTORY_FROM_COMPONENT_EDITOR:"Please call super class destroy method from comp editor class",DESTROY_NOT_IMPLMENENTED_IN_CHILD_CLASS:"Destroy is not implemented in child class.",ID_IS_NOT_ASSOCIATED_WITH_OBJECT:" 'id' keyword is not associated with given object, Please add in - ",IS_ALREADY_REGISTERED:" is already registered with ",CALLBACK_METHOD_IS:"' callback method is '",REMOVE_REFERENCE_BEFOER_TO_UNLOAD:"' remove reference before to unload this activity",IS_ATTACHED_WITH:"' is attached with ",NO_REGION_FIND:"No 'Region' find with this id ",UNKNOW_ERROR_WHILE_CONVERTING_DATA:"DATA_LOADER!! An unknown error occurred, kindly check file format.......",NO_URL:"No url has been specified!",UNKNOW_ERROR:"DATA_LOADER!! an unknow error occured",ERROR_WHILE_LOADING_FILE:"DATA LOADER!! Error received while loading file....",SLIDER_DEFAULT_DATA_MISSING:"Slider can not be initlized without default data.",SCREEN_NAV_DEFAULT_DATA_MISSING:"Slider can not be initlized without default data.",IMAGE_DEFAULT_DATA_MISSING:"Image Component can not be initlized without src data.",BUTTON_DEFAULT_DATA_MISSING:"Button Component can not be initlized without src data.",LIFEMETER_DEFAUTL_DATA_MISSING:"LifeMeter can not be initlized without default data.",COUNTDOWN_TIMER_DEFAUTL_DATA_MISSING:"Countdown timer can not be initlized without default data.",MCQ_DEFAULT_DATA_MISSING:"MCQ can not be initialized without default data.",ANIMATION_PLAYER_DEFAUTL_DATA_MISSING:"Animation player can not be initlized without default data.",DUPLICATE_COMPONENT_ID_FOUND_IN_HTML:"Duplicate mComp id found in HTML.",DUPLICATE_COMPONENT_ID_FOUND_IN_JSON:"Duplicate mComp id found in JSON.",ERROR_OCCURED_WHILE_DESTROYING_SCREEN_AND_ITS_EVENTS:"Error occured!!!!! while destroying screen, screen's components and its events.",REQUIRED_DATA_MISSING:"Please provide required data!",UNEXPECTED_ERROR:"An unexpected error occurred!",SAME_LOAD_PRIORITY_DEFINED:"Same load priority found, Please check activityConfig xml file!",DEFUALT_DATA_MISSING_IN_WIDGET:"Default Data is Missing while creating widget!",TEST:""};return t}),define("player/controllers/activity-event-controller",["marionette","player/constants/errorconst"],function(t,e){var i=function(){this.objDictonary={}};return i.prototype.members={EVENT_TYPE:"eventType",EVENT_CONTEXT:"eventContext",EVENT_TARGET:"eventTarget",EVENT_CALLBACK:"eventCallback"},i.prototype.addEventListener=function(t,e,i,n){var o,r=[];for(0===e.length||void 0===e.length?r.push(e):r=e,o=0;o<r.length;o+=1)this.addEventsToTarget(t,r[o],i,n)},i.prototype.addEventsToTarget=function(t,i,n,o){if(0===i.length)throw Error("not a valid object to register events");var r,s,a,l,c;if(c=this.getTargetID(i),l=void 0===i.getID?2:1,void 0===c)throw new Error(e.ID_IS_NOT_ASSOCIATED_WITH_OBJECT,i);if(this.searchEventReference(c,n)===!0)throw new Error("["+n+"]"+e.IS_ALREADY_REGISTERED+"["+c+"]");s=this.members,a={},a[s.EVENT_CONTEXT]=t,a[s.EVENT_TARGET]=i,a[s.EVENT_TYPE]=n,a[s.EVENT_CALLBACK]=o,this.objDictonary[c+"_"+n]=a,r=this,1===l?i.on(n,r,r.handleCallBack):$(i).on(n,function(t){var e={};e.eventTarget=t,e.data=r,r.handleCallBack(e)})},i.prototype.getTargetID=function(t){var e;return e=void 0,void 0===t.id?t.hasOwnProperty("getID")===!0?e=t.getID():console.warn("Please check Object ",t):e=t.id,e},i.prototype.handleCallBack=function(t){var e,i,n,o,r;r=t.data,t.eventTarget&&(n=t.eventTarget.id),n=void 0===n?t.eventTarget.currentTarget.id:n,n=void 0===n?t.eventTarget.data.getID():n,o=t.eventTarget.type,t.type=o,t.target=t.eventTarget.data,o=t.type,i=r.members,e=r.objDictonary[n+"_"+o],e[i.EVENT_CONTEXT][e[i.EVENT_CALLBACK]](t.eventTarget)},i.prototype.removeEventListener=function(t,e){var i,n,o=[];for(o=_.toArray(t),i=0;i<o.length;i+=1)n=this.getTargetID(o[i]),o[i]=void 0!==o[i].jquery?o[i]:$(o[i]),o[i].off(e),delete this.objDictonary[n+"_"+e]},i.prototype.searchEventReference=function(t,e){var i=this.objDictonary[t+"_"+e];return void 0!==i},i.prototype.isAllRegisteredListenerDeattached=function(){var t,i,n,o,r;if(r=this.objDictonary,o=_.filter(r,function(t){return t}),parseInt(o.length,10)>0)throw t=this.members,n=o[0],i="'"+n[t.EVENT_TYPE]+e.IS_ATTACHED_WITH+"'"+n[t.EVENT_TARGET].id,i=i+e.CALLBACK_METHOD_IS+n[t.EVENT_CALLBACK]+e.REMOVE_REFERENCE_BEFOER_TO_UNLOAD,new Error(i);return!0},i}),window.jQuery&&function(t){t.extend({json2xml:function(t,e){var i=function(t,e,n){if("__tagsList"===t)return"";if(!(e instanceof Object))return n&&n.__tagsList&&n.__tagsList instanceof Object&&n.__tagsList.hasOwnProperty(t)?"<"+t+">"+String(e)+"</"+t+">":t+"='"+String(e)+"'";if(void 0==e.length){var o="<"+t,r="";for(var s in e)e[s]instanceof Object||e[s]instanceof Array?r+=i(s,e[s],e):e.__tagsList&&e.__tagsList instanceof Object&&e.__tagsList.hasOwnProperty(s)?r+=i(s,e[s],e):o+=" "+i(s,e[s],e);return o+=">"+r+"</"+t+">"}if(e.length>0){for(var o="",a=e.length,s=0;a>s;s++)(e[s]instanceof Object||e[s]instanceof Array)&&(o+=i(t,e[s],e));return o}return""};return null==e||"object"!=typeof e?null:i(t,e)},escapeXmlChars:function(t){return"string"==typeof t?t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;"):t},unescapeXmlChars:function(t){return t.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#x27;/g,"'").replace(/&#x2F;/g,"/")}})}(jQuery),define("json2xml",["jquery"],function(){}),window.jQuery&&function(t){t.extend({xml2json:function(e,i){function n(e,s){if(!e)return null;{var a={},l="",c=null,h=null;e.nodeType,o(e.localName||e.nodeName),e.text||e.nodeValue||""}e.childNodes&&e.childNodes.length>0&&t.each(e.childNodes,function(t,e){var i=e.nodeType,s=o(e.localName||e.nodeName),h=e.text||e.nodeValue||"";if(8!=i)if(3!=i&&4!=i&&s)("#text"!=e.nodeName||null!=e.localName)&&(a.hasOwnProperty(e.nodeName)||(a[e.nodeName]=e.nodeName)),c=c||{},c[s]?(c[s].length||(c[s]=r(c[s])),c[s]=r(c[s]),c[s][c[s].length]=n(e,!0),c[s].length=c[s].length):c[s]=n(e);else{if(h.match(/^\s+$/))return;l+=h.replace(/^\s+/,"").replace(/\s+$/,"")}}),e.attributes&&e.attributes.length>0&&(h={},c=c||{},t.each(e.attributes,function(t,e){var i=o(e.name),n=e.value;h[i]=n,c[i]?(c[cnn]=r(c[cnn]),c[i][c[i].length]=n,c[i].length=c[i].length):c[i]=n})),c&&(c=t.extend(""!=l?new String(l):{},c||{}),l=c.text?("object"==typeof c.text?c.text:[c.text||""]).concat([l]):l,l&&(c.text=l),l="");var u=c||l;return i&&(l&&(u={}),l=u.text||l||"",l&&(u.text=l),s||(u=r(u))),u.__tagsList=a,u}if(!e)return{};var o=function(t){return"text"===t&&(t="sText"),String(t||"").replace(/-/g,"_")},r=function(e){return t.isArray(e)||(e=[e]),e.length=e.length,e};if("string"==typeof e&&(e=t.text2xml(e)),e.nodeType){if(3==e.nodeType||4==e.nodeType)return e.nodeValue;var s=9==e.nodeType?e.documentElement:e,a=n(s,!0);return e=null,s=null,a}},text2xml:function(e){var i;try{var n=t.browser.msie?new ActiveXObject("Microsoft.XMLDOM"):new DOMParser;n.async=!1}catch(o){throw new Error("XML Parser could not be instantiated")}try{i=t.browser.msie?n.loadXML(e)?n:!1:n.parseFromString(e,"text/xml")}catch(o){throw new Error("Error parsing XML string")}return i}})}(jQuery),define("xml2json",["jquery"],function(){}),define("player/utils/data-loader",["marionette","json2xml","xml2json","player/constants/errorconst"],function(t,e,i,n){var o,r;return o=function(){return _.extend(this,Backbone.Events)},o.prototype={DATA_LOAD_SUCCESS:"dataLoadSuccess",DATA_LOAD_FAILED:"dataLoadFailed",SCOPE:"test123",load:function(t){if(this.SCOPE=t.scope,!t||!t.hasOwnProperty("url")||""===t.url||void 0===t.url)throw new Error(n.NO_URL);var e,i,o;o=this,e=t.hasOwnProperty("dataType")?t.dataType:"json",i=t.hasOwnProperty("contentType")?t.contentType:"application/json",$.ajax({url:t.url,dataType:e,contentType:i,async:!1,success:function(i,s){if("success"===s){var a=null;switch(t.returnType){case"json":a=r(e,i);break;case"xml":a=i;break;default:a=i}o.trigger(o.DATA_LOAD_SUCCESS,a,o.SCOPE)}else alert(n.UNKNOW_ERROR)},error:function(e,i,r){throw t.hasOwnProperty("errorEvent")&&o.trigger(o.DATA_LOAD_FAILED,e,i,r),new Error(n.ERROR_WHILE_LOADING_FILE+" ::: "+t.url,e,i,r)}})}},r=function(t,e){var i=null;switch(t){case"xml":i=$.xml2json(e);break;case"text":i=$.parseJSON(e);break;case"json":i=e;break;default:alert(n.UNKNOW_ERROR_WHILE_CONVERTING_DATA)}return i},o}),define("player/controllers/audio-controller",[],function(){var t,e,i,n,o,r;return i=null,r=1,t=function(){var t;e={},o=[],setInterval(function(){for(t=0;t<o.length;t+=1){var e=o[t];if(void 0!==e)if(isNaN(e.data.duration)===!1){if(e.data.isPaused===!0)return;e.missed=void 0,void 0===e.data.cTime?e.data.cTime=e.currentTime:e.data.cTime===e.currentTime&&(e.volume=r,e.play()),e.data.cTime=e.currentTime}else e.missed=void 0===e.missed?0:e.missed+1,e.missed%2===0&&e.load()}},1e3),n=0},t.prototype.playAudio=function(t){var i,s,a;s=function(){var t=this;this.loadStart=function(){this.addEventListener("loadedmetadata",t.metaLoaded),this.addEventListener("canplay",t.canPlay)},this.metaLoaded=function(){this.removeEventListener("loadedmetadata",t.metaLoaded),this.data.duration=this.duration},this.canPlay=function(){this.removeEventListener("canplay",t.canPlay),this.volume=r,this.play(),this.data.bLoop===!0&&-1===o.indexOf(this)&&o.push(this),void 0!==this.data.onStart&&this.data.onStart()},this.audioEnded=function(){var t;return this.pause(),this.currentTime=0,this.data.bLoop?(this.volume=r,this.play(),void 0):(void 0!==this.data.onFinish&&(t=this.data.onFinish,this.data.onFinish=void 0,t()),void 0)}},void 0===e[t.strTrack]?(i=document.createElement("audio"),i.uid=n+=1,a=new s,i.data=t,this.setSource(i,t.strPath),console.log(i.getAttribute("src")),i.addEventListener("loadstart",a.loadStart),i.addEventListener("ended",a.audioEnded),i.load(),e[t.strTrack]=i):t.reload?(e[t.strTrack].data=t,e[t.strTrack].pause(),e[t.strTrack].data.isPaused=void 0,-1===e[t.strTrack].src.indexOf(t.strPath)?(e[t.strTrack].src="",this.setSource(e[t.strTrack],t.strPath),e[t.strTrack].load()):(e[t.strTrack].volume=r,e[t.strTrack].play(),void 0!==t.onStart&&t.onStart())):this.restartAudio(t.strTrack)},t.prototype.setSource=function(t,e){var i;if(e instanceof Array){for(i=0;i<e.length;i+=1)if("mp3"===e[i].type){if(t.canPlayType("audio/mpeg;")){t.setAttribute("src",e[i].path);break}}else if("ogg"===e[i].type&&t.canPlayType("audio/ogg;")){t.setAttribute("src",e[i].path);break}}else t.setAttribute("src",e)},t.prototype.restartAudio=function(t){try{e[t].currentTime=0,e[t].pause(),e[t].volume=r,e[t].play()}catch(i){console.error("//"+t+"// track not found.")}},t.prototype.stopAudio=function(t,i){try{e[t].currentTime=0,e[t].pause(),e[t].data.isPaused=!0,i&&delete e[t]}catch(n){}},t.prototype.stopAllAudio=function(t){var i,n;n=t.bDestroy;for(i in e)e.hasOwnProperty(i)&&this.stopAudio(i,n)},t.prototype.pauseAudio=function(t){console.log("Audio paused");try{e[t].data.isPaused=!0,e[t].pause()}catch(i){console.error("//"+t+"// track not found.")}},t.prototype.resumeAudio=function(t){console.log("Audio resumed");try{e[t].data.isPaused=!1,e[t].volume=r,e[t].play()}catch(i){console.error("//"+t+"// track not found.")}},t.prototype.setVolume=function(t){try{e[t.strTrackID].volume=t.volume}catch(i){console.error("//"+t.strTrackId+"// track not found.")}},t.prototype.setDefaultVolume=function(t){var i,n;r=t.volume;for(i in e)e.hasOwnProperty(i)&&(n=e[i],void 0!==n&&(n.volume=r))},{getInstance:function(){return null===i&&(i=new t),i}}}),define("player/controllers/activity-controller",["marionette","player/events/eventsconst","player/controllers/activity-event-controller","player/utils/data-loader","player/controllers/audio-controller","player/constants/errorconst"],function(t,e,i,n,o,r){function s(t){o.getInstance().playAudio(t)}function a(t){o.getInstance().stopAllAudio(t)}function l(t){o.getInstance().restartAudio(t)}function c(t){o.getInstance().stopAudio(t.trackId,t.destroy)}function h(t){o.getInstance().pauseAudio(t)}function u(t){o.getInstance().resumeAudio(t)}function p(t){o.getInstance().setVolume(t)}function d(t){o.getInstance().setDefaultVolume(t)}var f;return f=Backbone.Marionette.Controller.extend({SEARCH_BY_ID:"searchByID",SEARCH_BY_INDEX:"searchByIndex",COMP_SUFFIX:"COMP_",SIM_PICTOR:"sim-pictor",SIM_PICTOR_PATH:"frameworkRoot/activities/simulation-activity",editorData:void 0,objEventController:void 0,objEventBroadcaster:void 0,objCompDict:void 0,regionData:void 0,allActivities:void 0,arrActivity:void 0,groupModelDict:void 0,activityRegion:void 0,objActivityList:void 0,objEventConst:void 0,playerConfig:void 0,localLanguageName:void 0,objActRef:void 0,compCounter:0,nActivityIndex:0,strRegionName:"",broadcastEventDict:void 0,showPreloader:!1,stageScaleValue:1,mPlayerModel:void 0,nTotalActivityLength:-1,data_loader:void 0,html_comp_list:void 0,allRegionActivityList:void 0,bDrawingMode:void 0,isReady:void 0,activityPreloadedData:void 0,actPreloadedData:{},objActivityRef:void 0,isPictorInitliazed:!1,constructor:function(t,o,r,s,a){this.html_comp_list=[],this.objEventController=new i,this.groupModelDict={},this.activityRegion=t,this.objEventConst=e,this.playerConfig=o,this.objActivityList={},this.objCompDict={},this.nActivityIndex=0,this.arrActivity=[],this.strRegionName=r,this.objEventBroadcaster=s,this.broadcastEventDict={},this.data_loader=new n,this.bDrawingMode=a,this.dispatchInitEvent(this.objEventConst.REGION_INITLIZE_START_EVENT),this.actPreloadedData=void 0},initlize:function(){console.log("initlized.....")}}),f.prototype.onComponentCreated=function(t){var e,i;i=t.componentRef,void 0!==t&&void 0!==t.data&&(t.data.updatedScale=this.stageScaleValue,t.data.objInlineTmplDict=this.objActivityRef.objInlineTmplDict),e=new i(t.data,this.stageScaleValue),this.objCompDict[t.id]=e,e.setID(t.id),t.context[t.strCallback](e),t=void 0,e.setStageScaleValue(this.stageScaleValue)},f.prototype.initController=function(t){var e;if(this.regionData=t,this.allActivities=this.regionData.activities,void 0===this.allActivities.activity.length)this.arrActivity.push(this.allActivities.activity);else for(e=0;e<this.allActivities.activity.length;e++)this.arrActivity.push(this.allActivities.activity[e]);this.nTotalActivityLength=this.arrActivity.length},f.prototype.launchDefaultActivity=function(){if(!(this.arrActivity.length>0))throw new Error(r.CONFIG_MISSING_ACTIVITY_DATA);this.allActivities.hasOwnProperty("defaultLaunchID")?this.launchActivityById(this.allActivities.defaultLaunchID):this.launchActivityByIndex(0)},f.prototype.launchActivityByIndex=function(t,e){this.activityPreloadedData=void 0,void 0!==e&&(this.activityPreloadedData=e.data);var i=this.arrActivity[t];void 0!==i&&(this.nActivityIndex=t,this.launchActivity(i))},f.prototype.launchActivityById=function(t,e){this.activityPreloadedData=void 0,void 0!==e&&(this.activityPreloadedData=e.data);var i=_.filter(this.arrActivity,function(e){return e.id===String(t)});if(!(i.length>0))throw new Error(r.ACTIVITY_NOT_FOUND_BY_THIS_ID);this.nActivityIndex=this.arrActivity.indexOf(i[0]),this.launchActivity(i[0])},f.prototype.dispatchInitEvent=function(t){var e={};e.type=this.objEventConst.REGION_INITLIZE_UPATE_EVENT,e.progressType=t,e.target=this,this.trigger(this.objEventConst.REGION_INITLIZE_UPATE_EVENT,e)},f.prototype.onPlayerInitComplete=function(){_.filter(this.objActivityList,function(t){t.onPlayerInitComplete()})},f.prototype.launchActivity=function(t){this.dispatchInitEvent(this.objEventConst.REGION_INITLIZE_START_EVENT);var e,i,n,o,r,s={};s.task=this.showPreloader===!0?this.objEventConst.SHOW_PRELOADER:this.objEventConst.HIDE_PRELOADER,s.type=this.objEventConst.PLAYER_COMMON_TASK_EVENT,this.trigger(this.objEventConst.PLAYER_COMMON_TASK_EVENT,s),r=this,o=t["class"],this.isPictorInitliazed=o===this.SIM_PICTOR,o=o===this.SIM_PICTOR?this.SIM_PICTOR_PATH:o,void 0!==t.groupName&&(n=void 0!==t.modelPath&&void 0===this.groupModelDict[t.groupName],i=void 0!==this.groupModelDict[t.groupName]),e=this.groupModelDict[t.groupName],void 0===e&&void 0!==t.modelPath&&t.modelPath.length>0?require([o,t.modelPath],function(o,s){e=new s,r.groupModelDict[t.groupName]=e,r.initLoadedActivity(t,n,i,o,e)
}):require([o],function(o){r.initLoadedActivity(t,n,i,o,e)}),this.mPlayerModel.set(this.strRegionName+"__index",this.nActivityIndex)},f.prototype.initLoadedActivity=function(t,e,i,n,o){if(void 0===t.html)this.loadAndRegisterActivity(t,e,i,n,o);else{var r={};r.controller=this,r.actData=t,r.bCreateModel=e,r.bUseModel=i,r.ObjActivity=n,r.objModel=o,this.trigger(this.objEventConst.CREATE_AND_INIT_ACTIVITY_HTML,r)}},f.prototype.onHtmlLoadComplete=function(t){var e=this.editorData,i={};void 0!==t.inlineTemplates?(i.task=this.objEventConst.PREPARE_INLINE_TEMPLATE_DATA,i.data=t,i.callback=!0,this.trigger(this.objEventConst.PLAYER_COMMON_TASK_EVENT,i)):this.loadAndRegisterActivity(e.actData,e.bCreateModel,e.bUseModel,e.ObjActivity,e.objModel,t)},f.prototype.appendComponentDiv=function(t,e){var i,n,o,s,a,l,c=e.createdCompList;for(_.filter(this.objActivityList,function(){}),t.mComp={},i=0;i<c.length;i+=1){if(s=c[i],o=s.id,void 0!==t.mComp[o])throw new Error('"id= '+o+'"!!!!! '+r.DUPLICATE_COMPONENT_ID_FOUND_IN_HTML);l=t.$el,a=new s.componentRef(s.defaultData),n=s.target.appendChild(l,s,a),n===!0&&(a.render(),void 0!==a.onShow&&a.onShow()),this.html_comp_list.push(a),a.id=o,t.mComp[o]=a}return!0},f.prototype.loadAndRegisterActivity=function(t,e,i,n,o,r){var s,a,l,c,h,u=this;h=void 0,h=o,c=new n({model:h,activityData:this.activityPreloadedData,dataPath:void 0!==t.data?t.data.source:void 0,stylePath:void 0!==t.style?t.style.source:void 0}),this.objActivityRef=c,this.objActivityRef.strRegionName=this.strRegionName,void 0!==r&&r.hasOwnProperty("activityTemplate")&&(c.template=_.template(r.activityTemplate)),c.setID(t.id),c.groupName=t.groupName,c.modelName=t.modelName,s=this.registerActivity(c),s===!0&&(void 0!==r&&r.hasOwnProperty("processData")&&c.setData(r.processData),c.preinitialize(),c.postInitialize(),this.setStageScaleValue(this.stageScaleValue),u.checkForLanguageSupport()===!0?(l="screentext.xml",a=this.playerConfig.language.rootPath+"/"+t.lang+"/"+this.getLocalLanguage()+"/"+l,this.objActRef=c,this.loadData(a,"xml","application/xml","xml",this.handleLangDataLoadComplete,this.handleDataLoadFailed)):u.appendActivity(c,r))},f.prototype.registerActivity=function(t){if(t.isBaseActivity!==!0)throw new Error(r.ACITIVITY_MUST_EXTEND_BASE_CLASS);if(this.objActivityList[t.getID()])throw new Error(this.objActivityList[t.getID()].getID()+r.ACTIVITY_ALREADY_REGISTERED);return t.strRegionName=this.strRegionName,t.localLangName=this.localLanguageName,this.objActivityList[t.getID()]=t,t.setEventController(this.objEventController),this.attachActivityEvents(t),!0},f.prototype.appendActivity=function(t,e){this.activityRegion.show(t),void 0!==e&&this.appendComponentDiv(t,e);var i,n={};n.regionName=this.strRegionName,n.activityLength=this.nTotalActivityLength,n.currentActivityIndex=this.nActivityIndex,n.isLastActivity=this.nTotalActivityLength===this.nActivityIndex+1,n.isFirstActivity=0===this.nActivityIndex,_.filter(this.objActivityList,function(t){i=t.getID()}),n.activityId=i,this.trigger(this.objEventConst.ON_ACTIVITY_SUCCESSFULLY_ADDED_IN_REGION,n),this.trigger(this.objEventConst.REMOVE_COMPONENT_EDITORS,this.strRegionName),t.allRegionActivityList=this.allRegionActivityList,this.dispatchInitEvent(this.objEventConst.REGION_INITLIZE_COMPLETE_EVENT),t.onActivityCreationComplete()},f.prototype.checkForLanguageSupport=function(){return"true"===this.playerConfig.language.support},f.prototype.setLocalLanguage=function(t){this.localLanguageName=t},f.prototype.getLocalLanguage=function(){return this.localLanguageName},f.prototype.showPreloaderBeforeActivityLaunch=function(t){this.showPreloader=t},f.prototype.loadData=function(t,e,i,n,o,r){var s=this;this.data_loader.on(this.data_loader.DATA_LOAD_SUCCESS,o),this.data_loader.on(this.data_loader.DATA_LOAD_FAILED,r),this.data_loader.load({url:t,dataType:e,contentType:i,returnType:n,scope:s})},f.prototype.handleLangDataLoadComplete=function(t,e){e.objActRef.localText=t,e.appendActivity(e.objActRef),e.data_loader.off(e.data_loader.DATA_LOAD_SUCCESS),e.data_loader.off(e.data_loader.DATA_LOAD_FAILED)},f.prototype.handleDataLoadFailed=function(){throw this.data_loader.off(this.data_loader.DATA_LOAD_SUCCESS),this.data_loader.off(this.data_loader.DATA_LOAD_FAILED),new Error(r.LOCALIZATION_LANGUAGE_LOAD_FAILD)},f.prototype.handleGoToNextActivityEvent=function(t){if(this.isValidIndexOrId(this.nActivityIndex+1,this.SEARCH_BY_INDEX)===!1)return console.warn("Invalid activity index"),void 0;var e=this.handleEndActvityEvent(t);e===!0&&(this.nActivityIndex=this.nActivityIndex+1,this.launchActivityByIndex(this.nActivityIndex))},f.prototype.moveToNextActivity=function(t){if(this.isValidIndexOrId(this.nActivityIndex+1,this.SEARCH_BY_INDEX)===!1)return console.warn("Invalid activity index"),void 0;var e=this.handleEndActvityEvent(t);e&&(this.nActivityIndex=this.nActivityIndex+1,this.launchActivityByIndex(this.nActivityIndex))},f.prototype.moveToPreviousActivity=function(t){if(this.isValidIndexOrId(this.nActivityIndex-1,this.SEARCH_BY_INDEX)===!1)return console.warn("Invalid activity index"),void 0;var e=this.handleEndActvityEvent(t);e&&(this.nActivityIndex=this.nActivityIndex-1,this.launchActivityByIndex(this.nActivityIndex))},f.prototype.handleGoToPreviousActivityEvent=function(t){var e=this.handleEndActvityEvent(t);return this.isValidIndexOrId(this.nActivityIndex-1,this.SEARCH_BY_INDEX)===!1?(console.warn("Invalid activity index"),void 0):(e===!0&&(this.nActivityIndex=this.nActivityIndex-1,this.launchActivityByIndex(this.nActivityIndex)),void 0)},f.prototype.handleEndActvityEvent=function(){var t,e;return e=this.classReference.classRef,t=this.objActivityRef,this.destroyActivity(t)},f.prototype.destroyActivity=function(t){var e,i,n=t.destroy();_.filter(this.objCompDict,function(t){if(t.isDestroyCalled===!1)throw new Error(r.ALL_ACTIVITY_COMPONENT_NOT_DESTROYED)});for(i in this.broadcastEventDict)this.broadcastEventDict.hasOwnProperty(i)&&this.objEventBroadcaster.off(this.broadcastEventDict[i].eventToListen);if(t.objEventController.isAllRegisteredListenerDeattached()===!1)return!1;if(n===!0&&t.isDestroyCalled!==!0||n!==!0)throw new Error(r.BASE_ACTIVITY_DESTROY_NOT_CALLED);for(e=0;e<this.html_comp_list.length;e+=1)this.html_comp_list[e].destroy();return this.html_comp_list=[],this.actPreloadedData={},this.deattachActivityEvents(t),this.broadcastEventDict={},t.close(),delete this.objActivityList[t.getID()],t=null,n},f.prototype.handleJumpToActivityByIndexEvent=function(t){var e,i;return this.isValidIndexOrId(t.activityIndex,this.SEARCH_BY_INDEX)===!1?(console.warn("invalid activity index ",t.activityIndex),void 0):(i=this.handleEndActvityEvent(t),i===!0&&(_.filter(this.objActivityList,function(t){t.mComp={}}),e=Number(t.activityIndex),this.launchActivityByIndex(e)),void 0)},f.prototype.isValidIndexOrId=function(t,e){var i,n=!1;switch(e){case this.SEARCH_BY_ID:i=_.filter(this.arrActivity,function(e){return e.id===String(t)}),n=i.length>0;break;case this.SEARCH_BY_INDEX:n=Number(t)<0?!1:Number(t)>=this.nTotalActivityLength?!1:!0}return n},f.prototype.handleJumpToActivityByIDEvent=function(t){console.log("handleJumpToActivityByIDEvent!!!!!!!!!");var e,i;return this.isValidIndexOrId(t.activityID,this.SEARCH_BY_ID)===!1?(console.warn("invalid activity id ",t.activityID),void 0):(i=this.handleEndActvityEvent(t),i===!0&&(e=t.activityID,this.launchActivityById(e),this.trigger(this.objEventConst.JUMP_TO_ACTIVITY_BY_ID_EVENT,t)),void 0)},f.prototype.deattachActivityEvents=function(t){t.off(this.objEventConst.JUMP_TO_ACTIVITY_BY_ID_EVENT),t.off(this.objEventConst.JUMP_TO_ACTIVITY_BY_INDEX_EVENT),t.off(this.objEventConst.ACTIVITY_END_EVENT),t.off(this.objEventConst.ACTIVITY_GO_TO_NEXT_ACTIVITY_EVENT),t.off(this.objEventConst.ACTIVITY_GO_TO_PREVIOUS_ACTIVITY_EVENT),t.off(this.objEventConst.CREATE_COMPONENT_EVENT),t.off(this.objEventConst.PLAYER_COMMON_TASK_EVENT),t.off(this.objEventConst.BROADCAST_EVENT),t.off(this.objEventConst.BROADCAST_EVENT_RECEIVER),t.off(this.objEventConst.STOP_BROADCAST_EVENT_RECEIVER),t.off(this.objEventConst.REMVOE_CSS_REFERENCE),t.off(this.objEventConst.PLAY_AUDIO),t.off(this.objEventConst.RESTART_AUDIO),t.off(this.objEventConst.STOP_AUDIO),t.off(this.objEventConst.PAUSE_AUDIO),t.off(this.objEventConst.RESUME_AUDIO),t.off(this.objEventConst.VOLUME_CHANGE),t.off(this.objEventConst.DEFAULT_VOLUME_CHANGE),t.off(this.objEventConst.REMVOE_REFERENCE),t.off(this.objEventConst.SET_DRAWING_CANVAS),t.off(this.objEventConst.DRAWING_COMMON_TASK)},f.prototype.handleCreateComponentEvent=function(t){t.id=this.COMP_SUFFIX+this.compCounter,t.actController=this,this.trigger(this.objEventConst.CREATE_COMPONENT_EVENT,t),this.compCounter+=1},f.prototype.handleActivityCommonTask=function(t){this.trigger(t.type,t)},f.prototype.handleAndBroadcastEvent=function(t){t.type=this.objEventConst.BROADCAST_EVENT,t.regionId=this.strRegionName,this.trigger(t.type,t)},f.prototype.broadcastEventReceiver=function(t){this.broadcastEventDict[t.eventToListen]=t},f.prototype.stopBroadcastEventReceiver=function(t){delete this.broadcastEventDict[t.eventToListen]},f.prototype.broadcastEventHandler=function(t){this.trigger(this.objEventConst.BROADCAST_EVENT_IN_AIR,t)},f.prototype.bubbleEvent=function(t){var e=this.broadcastEventDict[t.eventToBroadcast],i={};if(void 0!==e){if(t.regionId===this.strRegionName)return;i.type=t.eventToBroadcast,i.data=t.data,e.context[e.callback](i)}},f.prototype.onActivityLaunchRequestByAnotherRegion=function(t){var e=this.handleEndActvityEvent();if(e!==!1)switch(t.bLaunchByIndex){case!0:this.launchActivityByIndex(Number(t.strActivityID),t);break;case!1:this.launchActivityById(String(t.strActivityID),t)}},f.prototype.updateNevigationControl=function(t){this.objActivityRef.updateNevigationControl(t)},f.prototype.setDrawingCanvas=function(t){var e={};e.canvas=t,this.trigger(this.objEventConst.SET_DRAWING_CANVAS,e)},f.prototype.handleDrawingTask=function(){},f.prototype.removeJSCSSFileRefernece=function(t){var e,i,n,o,r,s,a=this.objEventConst;for(r=t.fileName,s=t.type,e=s===a.TYPE_JS?a.SCRIPT:s===a.TYPE_CSS?a.LINK:a.NONE,i=s===a.TYPE_JS?a.SRC:s===a.TYPE_CSS?a.HREF:a.NONE,n=document.getElementsByTagName(e),o=n.length;o>=0;o-=1)n[o]&&null!==n[o].getAttribute(i)&&-1!==n[o].getAttribute(i).indexOf(r)&&n[o].parentNode.removeChild(n[o])},f.prototype.setStageScaleValue=function(t){var e;for(_.filter(this.objCompDict,function(e){e.setStageScaleValue(t),void 0!==e.onPlayerResizeEvent&&e.onPlayerResizeEvent()}),_.filter(this.objActivityList,function(e){e.nStageScale=t}),this.stageScaleValue!==t&&(this.stageScaleValue=t),e=0;e<this.html_comp_list.length;e+=1)this.html_comp_list[e].nStageScale=t;this.isPictorInitliazed===!0&&this.objActivityRef.setStageValue(this.stageScaleValue)},f.prototype.setInlineTemplates=function(t){var e=this;$.each(this.objActivityList,function(i,n){n.objInlineTmplDict=t,e.actPreloadedData=t})},f.prototype.onRegionUpdate=function(t){_.filter(this.objActivityList,function(e){e.allRegionData=t,e.getRegionChangeNotification(t)})},f.prototype.attachActivityEvents=function(t){var e={},i=this;e.classRef=i,t.on(i.objEventConst.ACTIVITY_GO_TO_NEXT_ACTIVITY_EVENT,this.handleGoToNextActivityEvent,this),t.on(i.objEventConst.ACTIVITY_GO_TO_PREVIOUS_ACTIVITY_EVENT,this.handleGoToPreviousActivityEvent,this),t.on(i.objEventConst.JUMP_TO_ACTIVITY_BY_INDEX_EVENT,this.handleJumpToActivityByIndexEvent,this),t.on(i.objEventConst.JUMP_TO_ACTIVITY_BY_ID_EVENT,this.handleJumpToActivityByIDEvent,this),t.on(i.objEventConst.CREATE_COMPONENT_EVENT,this.handleCreateComponentEvent,this),t.on(i.objEventConst.ACTIVITY_END_EVENT,i.handleEndActvityEvent,this),t.on(i.objEventConst.PLAYER_COMMON_TASK_EVENT,i.handleActivityCommonTask,this),t.on(i.objEventConst.BROADCAST_EVENT,i.handleAndBroadcastEvent,this),t.on(i.objEventConst.BROADCAST_EVENT_RECEIVER,i.broadcastEventReceiver,this),t.on(i.objEventConst.STOP_BROADCAST_EVENT_RECEIVER,i.stopBroadcastEventReceiver,this),t.on(i.objEventConst.PLAY_AUDIO,s),t.on(i.objEventConst.RESTART_AUDIO,l),t.on(i.objEventConst.STOP_AUDIO,c),t.on(i.objEventConst.PAUSE_AUDIO,h),t.on(i.objEventConst.RESUME_AUDIO,u),t.on(i.objEventConst.VOLUME_CHANGE,p),t.on(i.objEventConst.DEFAULT_VOLUME_CHANGE,d),t.on(i.objEventConst.STOP_ALL_AUDIO,a),t.on(this.objEventConst.REMVOE_REFERENCE,i.removeJSCSSFileRefernece,this),this.bDrawingMode===!0&&(t.on(i.objEventConst.SET_DRAWING_CANVAS,i.setDrawingCanvas,this),t.on(i.objEventConst.DRAWING_COMMON_TASK,i.handleDrawingTask,this))},f.prototype.destroy=function(){return!0},f}),define("player/events/event-broadcaster",["marionette"],function(){var t=function(){return _.extend(this,Backbone.Events)};return t.prototype.BROADCAST_EVENT="broadcastEvent",t.prototype.BUBBLE_EVENT="bubbleEvent",t.prototype.broadcastEvent=function(t){var e,i;e=t.eventToBroadcast,i=t.data,this.trigger(this.BUBBLE_EVENT,t)},t}),define("player/factory/complist",[],function(){var t={components:{mComp:[{id:"ImageComp",name:"ImageComp",classpath:"components/image/image"},{id:"ContainerComp",name:"containerComp",classpath:"components/container"},{id:"ScreenComp",name:"screenComp",classpath:"components/screen"},{id:"AnimationPlayerComp",name:"animationPlayerComp",classpath:"components/animationplayer/animation-player"},{id:"CountDownTimerComp",name:"countDownTimerComp",classpath:"components/countdowntimer/countdown-timer"},{id:"DnDComp",name:"DnDComp",classpath:"components/dnd/js/dnd"},{id:"DnDAdvanceComp",name:"DnDAdvanceComp",classpath:"components/dnd/js/dnd-advance"},{id:"MCQComp",name:"MCQComp",classpath:"components/mcq/js/mcq"},{id:"AudioPlayerComp",name:"AudioPlayerComp",classpath:"components/audioplayer/source/js/audio-player"},{id:"VideoPlayerComp",name:"VideoPlayerComp",classpath:"components/videoplayer/videoplayer"},{id:"LifeMeterComp",name:"LifeMeterComp",classpath:"components/lifemeter/lifemeter"},{id:"SliderComp",name:"SliderComp",classpath:"components/slider/slider"},{id:"IdentifierComp",name:"IdentifierComp",classpath:"components/identifier/identifier"},{id:"CarouselComp",name:"CarouselComp",classpath:"components/carousel/carousel"},{id:"ToggleButtonComp",name:"ToggleButtonComp",classpath:"components/togglebutton/toggle-button"},{id:"ToggleButtonGroupComp",name:"ToggleButtonGroupComp",classpath:"components/togglebuttongroup/js/toggle-button-group"},{id:"ReadAloudPlayerComp",name:"ReadAloudPlayerComp",classpath:"components/readaloudplayer/read-aloud-player"},{id:"RadioButtonComp",name:"RadioButtonComp",classpath:"components/radiobutton/js/radiobutton"},{id:"CheckBoxComp",name:"CheckBoxComp",classpath:"components/checkbox/js/checkbox"},{id:"TableComp",name:"TableComp",classpath:"components/table/js/custom-table"},{id:"CalculatorComp",name:"CalculatorComp",classpath:"components/calculator/calculator"},{id:"PhysicsEngineComp",name:"PhysicsEngineComp",classpath:"components/physicsengine/physics-engine"},{id:"SectionNavigatorComp",name:"SectionNavigatorComp",classpath:"components/sectionnavigator/section-navigator"},{id:"ViewStackComp",name:"ViewStackComp",classpath:"components/viewstack/js/view-stack"},{id:"ReorderingComp",name:"ReorderingComp",classpath:"components/reordering/js/reordering"},{id:"OmMeterComp",name:"OmMeterComp",classpath:"components/ommeter/js/om-meter"},{id:"ConnectorComp",name:"ConnectorComp",classpath:"components/connector/connector"},{id:"ButtonComp",name:"ButtonComp",classpath:"components/button/button"},{id:"LabelComp",name:"LabelComp",classpath:"components/label/label"},{id:"CloseCaptionComp",name:"CloseCaptionComp",classpath:"components/closecaption/js/close-caption"},{id:"ScreenNavigatorComp",name:"ScreenNavigatorComp",classpath:"components/screennavigator/js/screen-navigator"},{id:"MessageBoxComp",name:"MessageBoxComp",classpath:"components/messagebox/js/message-box"},{id:"SVGComp",name:"SVGComp",classpath:"components/svg/svg"},{id:"TimerComp",name:"TimerComp",classpath:"components/nonvisualtimer/non-visual-timer"},{id:"TreeComp",name:"TreeComp",classpath:"components/tree/tree"},{id:"CalloutComp",name:"CalloutComp",classpath:"components/callout/callout"},{id:"DraggableComp",name:"DraggableComp",classpath:"components/draggable/draggable"},{id:"DroppableComp",name:"DroppableComp",classpath:"components/droppable/droppable"},{id:"GridComp",name:"GridComp",classpath:"components/gallery/grid"},{id:"GalleryComp",name:"GalleryComp",classpath:"components/gallery/gallery"},{id:"WidgetComp",name:"WidgetComp",classpath:"components/widgetwrapper/widget"}]}};return t}),define("player/factory/factory",["marionette","player/factory/complist"],function(t,e){var i=function(){return this.initFactory(),_.extend(this,Backbone.Events)};return i.prototype.COMP_CREATION_COMPLETE_EVENT="compCreationCompleteEvent",i.prototype.members={compDict:null,compRawData:null},i.prototype.initFactory=function(){this.members.compDict={},this.members.compRawData=e},i.prototype.successHandler=function(t){Data_Loader.off(Data_Loader.DATA_LOAD_SUCCESS),this.members.compRawData=t},i.prototype.getRawData=function(){return this.members.compRawData.components},i.prototype.getComponent=function(t){return this.createComponent(t)},i.prototype.createComponent=function(t){var e,i,n,o,r,s,a,l;return e=t.strCompType,l="Comp",i=l,n=this.getRawData().mComp,o=String(e+l).replace(/-/g,""),r=_.filter(n,function(t){return t.id.toLowerCase()===o.toLowerCase()}),s=r[0].classpath,a=this,require([s],function(e){a.onCompCreationComplete(e,t)})},i.prototype.onCompCreationComplete=function(t,e){var i=e.strCompType;e.componentRef=t,this.members.compDict[i]=t,this.trigger(this.COMP_CREATION_COMPLETE_EVENT,e)},i}),define("simPictor/factory/sim-factory",["marionette","player/factory/factory"],function(t,e){var i;return i=function(){return _.extend(this,new e)},i.prototype.getSimComponent=function(t,e){e.strCompType=t,this.getComponent(e)},i}),define("simPictor/pictor-const",["require","exports","module"],function(){var t={GLOBAL_COMP_LAYOUT_SCRIPT:"globalCompLayout",ANIMATION_PLAYER:"animation-player",SCREEN:"screen",ERROR_WHILE_DESTROY_ASSEMBLER:"Error while destroying Assembler!!!"};return t}),define("simPictor/assembler",["marionette","simPictor/factory/sim-factory","simPictor/pictor-const"],function(t,e,i){var n;return n=Backbone.Marionette.Controller.extend({screenDict:{},objEditorManager:null,arrCompToBeCreated:[],arrScreenCompList:[],objWarehouse:null,jsonData:null,objFactory:null,objActivity:null,editorController:null,objSimEventController:null,compCounter:0,compDict:void 0,requireScreenHelper:!1,screenJsPath:void 0,objScreenHelper:void 0,objScreenClassDefinitation:void 0,objGlobalScreenRef:void 0,globalCompDict:void 0,constructor:function(t,e,i,n,o){this.resetAllVariable(),this.jsonData=t,this.objEditorManager=n,this.htmlTemplates=e,this.objActivity=i,this.objSimEventController=o,this.objSimEventController.objActivityRef=this.objActivity,this.init()}}),n.COMP_CREATION_COMPLETE="comp_creation_complete",n.COMP_READY_TO_ATTACH="comp_ready_to_attach",n.GLOBAL_COMP_CREATED="gloabl_components_created",n.prototype.resetAllVariable=function(){this.arrScreenCompList.splice(0,this.arrScreenCompList.length),this.objActivity=null,this.objEditorManager=null,this.jsonData=null,this.objSimEventController=null},n.prototype.init=function(){var t=this;this.objFactory=new e,this.objFactory.on(t.objFactory.COMP_CREATION_COMPLETE_EVENT,t.onComponentCreated),this.objSimEventController.on(this.objActivity.ActivityEventConst.COMP_EVENT_REGISTER_COMPLETE,t.onCompEventRegisterComplete,t)},n.prototype.createGlobalComponents=function(){var t,e=this;t=new this.objScreenClassDefinitation({template:_.template(this.htmlTemplates[i.GLOBAL_COMP_LAYOUT_SCRIPT])}),this.objActivity.globalCompHolder.show(t),this.objGlobalScreenRef=t,this.arrCompToBeCreated=this.getComponentList(this.objActivity.jsonData.globalComponents,[])[0],this.compCounter=0,this.editorController=this.objEditorManager.getEditorController(this.objActivity.strRegionName),this.editorController.off(this.editorController.SIM_COMP_CREATION_COMPLETE),this.editorController.on(this.editorController.SIM_COMP_CREATION_COMPLETE,e.onGlobalCompCreationComplete,this),this.getComponent(this.arrCompToBeCreated[0])},n.prototype.assembleComponent=function(){var t=this;this.compCounter=0,this.compDict={},this.editorController=this.objEditorManager.getEditorController(this.objActivity.strRegionName),this.editorController.off(this.editorController.SIM_COMP_CREATION_COMPLETE).on(this.editorController.SIM_COMP_CREATION_COMPLETE,t.onSimCompCreationComplete,this),this.arrCompToBeCreated=this.getComponentList(this.jsonData,[]),this.getComponent(this.arrCompToBeCreated[0])},n.prototype.getComponentList=function(t,e,i){var n,o=0;if(i!==!1&&e.push(t),void 0!==t.components)do n=t.components[o],e.push(n),void 0!==n.components&&n.components.length>1&&this.getComponentList(n,e,!1),o+=1;while(o<t.components.length);return e},n.prototype.getComponent=function(t){var e=t;e.classRef=this,this.getComponentEditor(t.type,t)},n.prototype.getComponentEditor=function(t,e){this.editorController.createSimComp(t,e)},n.prototype.onSimCompCreationComplete=function(t){var e,n,o={},r={};if(delete t.compData.target,void 0!==this.compDict[t.compData.id])throw new Error("'"+t.compData.id+"'!!!! "+this.objActivity.objErrConst.DUPLICATE_COMPONENT_ID_FOUND_IN_JSON);switch(e=t.jsonData.parentId,t.compData.defaultData=void 0===t.compData.defaultData?{}:t.compData.defaultData,t.compData.defaultData.updatedScale=this.objActivity.nStageScale,t.jsonData.type!==i.SCREEN&&(n=new t.compData.componentRef(t.compData.defaultData),o.component=n,o.parent=e),t.jsonData.type){case i.SCREEN:this.objScreenClassDefinitation=t.compData.componentRef,n=new t.compData.componentRef({template:_.template(this.htmlTemplates[t.jsonData.templateId])}),this.objActivity.objScreen=n,this.objActivity.screenHolder.show(n),void 0!==t.jsonData.script&&(this.requireScreenHelper=!0,this.screenJsPath=t.jsonData.script),void 0!==t.compData.defaultData&&void 0!==t.compData.defaultData.styleClass&&$(n.$el).addClass(t.compData.defaultData.styleClass);break;case i.ANIMATION_PLAYER:this.objActivity.objScreen[t.jsonData.id]=n;break;default:void 0!==t.compData.defaultData&&void 0!==t.compData.defaultData.templateId&&(t.compData.defaultData.templateId=this.objActivity.getInlineTemplateById(t.compData.defaultData.templateId)),this.objActivity.objScreen.addChild(o),this.objActivity.objScreen[t.jsonData.id]=n,void 0!==t.jsonData.style&&this.applyStyleProperty(n,t.jsonData.style)}r={},r.parentId=e,r.objComp=n,r.jsonData=t.jsonData,r.type=t.jsonData.type,r.objComp.setID(t.jsonData.id),$($(n.el).children()[0]).attr("id",t.jsonData.id),this.arrScreenCompList.push(r),this.compDict[r.objComp.getID()]=r,this.compCounter=this.compCounter+1,this.objSimEventController.registerComponentEvents(r)},n.prototype.onGlobalCompCreationComplete=function(t){var e,n={},o={};switch(void 0===this.globalCompDict&&(this.globalCompDict={}),t.jsonData.type!==i.SCREEN&&(e=new t.compData.componentRef(t.compData.defaultData),n.component=e,n.parent=t.jsonData.parentId),t.jsonData.type){case i.ANIMATION_PLAYER:this.objGlobalScreenRef[t.jsonData.id]=e;break;default:this.objGlobalScreenRef.addChild(n),this.objGlobalScreenRef[t.jsonData.id]=e,void 0!==t.jsonData.style&&this.applyStyleProperty(e,t.jsonData.style)}o={},o.parentId=t.jsonData.parentId,o.objComp=e,o.jsonData=t.jsonData,o.type=t.jsonData.type,e.setID(t.jsonData.id),$($(e.el).children()[0]).attr("id",t.jsonData.id),this.globalCompDict[e.getID()]=o,this.compCounter=this.compCounter+1,this.objSimEventController.registerComponentEvents(o,!0)},n.prototype.onCompEventRegisterComplete=function(t){if(t!==!0){var e=this;this.arrCompToBeCreated.length>this.compCounter?this.getComponent(this.arrCompToBeCreated[this.compCounter]):(this.requireScreenHelper===!0?require([e.screenJsPath],function(t){e.objScreenHelper=new t,e.objScreenHelper.model=e.objActivity.model,$.each(e.compDict,function(t,i){e.objScreenHelper[t]=i.objComp}),e.objActivity.objScreenHelper=e.objScreenHelper,e.objScreenHelper.objActivity=e.objActivity,e.eventDispatcher(n.COMP_CREATION_COMPLETE),e.objScreenHelper.init()}):this.eventDispatcher(n.COMP_CREATION_COMPLETE),this.compCounter=0)}else this.arrCompToBeCreated.length>this.compCounter?this.getComponent(this.arrCompToBeCreated[this.compCounter]):this.eventDispatcher(n.GLOBAL_COMP_CREATED,{})},n.prototype.applyStyleProperty=function(t,e){void 0!==e&&void 0!==t.setStyle&&t.setStyle(e)},n.prototype.eventDispatcher=function(t,e){var i={};i.type=t,i.data=e,this.trigger(i.type,i)},n.prototype.flushScreen=function(){var t,e,n=this;return this.compCounter=0,$.each(this.compDict,function(e,o){o.type!==i.SCREEN&&(t=n.objSimEventController.unregisterComponentEvents(o))}),$.each(this.compDict,function(t,i){e={},e.component=i.objComp,e.parent=i.parentId,n.objActivity.objScreen.removeChild(e),i.objComp.destroy()}),t=this.objSimEventController.unregisterScreenCompEvnets(this.compDict[this.objActivity.objScreen.getID()]),t===!0&&(void 0!==this.objScreenHelper&&(this.objScreenHelper.destroy(),this.objScreenHelper=null),this.objActivity.screenHolder.close(),this.objActivity.objScreen.destroy(),this.objActivity.objScreen=null,this.arrScreenCompList=[],this.compDict={}),t},n.prototype.setStageScaleValue=function(t){$.each(this.compDict,function(e,n){n.type!==i.SCREEN&&(void 0!==n.objComp.setStageScaleValue&&n.objComp.setStageScaleValue(t),void 0!==n.objComp.onPlayerResizeEvent&&n.objComp.onPlayerResizeEvent())})},n.prototype.destroy=function(){var t;if(t=this.flushScreen(),t===!1)throw new Error(i.ERROR_WHILE_DESTROY_ASSEMBLER);return this.objFactory.off(this.objFactory.COMP_CREATION_COMPLETE_EVENT),this.editorController.off(this.editorController.SIM_COMP_CREATION_COMPLETE),this.editorController=null,this.objActivity.objScreen=null,t},n}),define("simPictor/sim-event-controller",["marionette"],function(){var t=Backbone.Marionette.Controller.extend({EVENT_TYPE:"type",ID:"id",objEvent_dict:null,objComp_dict:null,objActivityRef:null,objActivityHelper:null,constructor:function(){this.objEvent_dict={},this.objComp_dict={}}});return t.prototype.registerComponentEvents=function(t,e){var i,n,o,r={},s=[],a=this,l=[];i=t.objComp,void 0!==t.jsonData.events&&(s=Array.isArray(t.jsonData.events)===!1?[t.jsonData.events]:t.jsonData.events,_.each(s,function(t){if(_.each(t,function(t,e){if(n=e,l=[],Array.isArray(t)===!0)for(o=0;o<t.length;o+=1)r=a.createEventDict(i,t[o]),l.push(r);else r=a.createEventDict(i,t),l.push(r);i.on(n,$.proxy(a.handleSimComponentEvents,a))}),void 0!==a.objEvent_dict[i.getID()+"_"+n])throw new Error(i.getID()+" "+a.objActivityRef.objErrConst.IS_ALREADY_REGISTERED+" "+n);if(void 0!==a.objEvent_dict[i.getID()+"_"+n])throw new Error(i.getID()+" is alreay registred with "+n);a.objEvent_dict[i.getID()+"_"+n]=l})),a.objComp_dict[i.getID()]=i,this.trigger(a.objActivityRef.ActivityEventConst.COMP_EVENT_REGISTER_COMPLETE,e)},t.prototype.testMethod=function(){console.log("testMethod>>>>>>>>>>>>>....",this.objComp_dict)},t.prototype.unregisterScreenCompEvnets=function(t){var e=!1,i=this;return e=i.unregisterComponentEvents(t)},t.prototype.unregisterComponentEvents=function(t){var e,i,n,o=this,r=!1;return r=void 0===t.jsonData.events,void 0!==t.jsonData.events&&(e=t.jsonData.events,i=t.objComp,_.each(e,function(t,e){n=e,i.off(n),delete o.objComp_dict[i.getID()]}),r=!0),r},t.prototype.createEventDict=function(t,e){var i=[],n={},o=[];return n.targetId=e.target,n.methodName=e.method,n.region=e.region,_.each(e.params,function(t,e){if(i.push("true"===t?!0:"false"===t?!1:t),"self"===e){var n={};n.target=e,n.variableName=t,o.push(n)}}),n.params=i,n.calculate=o,n},t.prototype.handleSimComponentEvents=function(t){{var e,i,n;t.target}if(i=t.target.getID()+"_"+t.type,void 0!==t.target)for(i=t.target.getID()+"_"+t.type,e=this.objEvent_dict[i],n=0;n<e.length;n+=1)this.executeTask($.extend(!0,{},e[n]),t)},t.prototype.executeTask=function(t,e){var i;switch(t.targetId){case"self":t.region=this.objActivityRef.strRegionName===t.region?void 0:t.region,void 0!==t.region?(t.subTask=this.objActivityRef.ActivityEventConst.CALL_AND_UPDATE_COMPONENT,void 0!==e&&void 0!==e.customData&&(t.params.push(e.customData),t.eventTarget=e.target),this.objActivityRef.broadcastEvent(this.objActivityRef.ActivityEventConst.MANAGE_COMMON_BROADCAST_EVENT,t)):(void 0!==e&&t.params.push(e),this.calculateAndSetParameter(t),this.objActivityRef[t.methodName].apply(this.objActivityRef,t.params));break;case"helper":void 0!==t.region?(t.subTask=this.objActivityRef.ActivityEventConst.CALL_AND_UPDATE_COMPONENT,void 0!==e&&void 0!==e.customData&&(t.params.push(e.customData),t.eventTarget=e.target),this.objActivityRef.broadcastEvent(this.objActivityRef.ActivityEventConst.MANAGE_COMMON_BROADCAST_EVENT,t)):(void 0!==e&&t.params.push(e),this.calculateAndSetParameter(t),this.objActivityRef.objScreenHelper[t.methodName].apply(this.objActivityRef,t.params));break;default:if(void 0===e||void 0===e.customData||$.isEmptyObject(e.customData)||t.params.push(e.customData),void 0===t.region){try{this.objComp_dict[t.targetId][t.methodName].apply(this.objComp_dict[t.targetId],t.params)}catch(n){console.warn("'"+t.methodName+"' not found in "+i.name+" widget.")}break}t.subTask=this.objActivityRef.ActivityEventConst.CALL_AND_UPDATE_COMPONENT,void 0!==e&&void 0!==e.customData&&t.params.push(e.customData),this.objActivityRef.broadcastEvent(this.objActivityRef.ActivityEventConst.MANAGE_COMMON_BROADCAST_EVENT,t)}},t.prototype.calculateAndSetParameter=function(t){var e,i,n=0;for(n=0;n<t.calculate.length;n+=1)switch(t.calculate[n].target){case"self":e=t.eventTarget[t.calculate[n].variableName],i=t.params.indexOf(t.calculate[n].variableName),t.params[i]=e}},t}),define("simPictor/sim-pictor",["marionette","simPictor/assembler","simPictor/sim-event-controller"],function(t,e,i){var n;return n=Backbone.Marionette.Controller.extend({objData:null,objAssembler:void 0,objEventManager:null,objWarehouse:null,objScreen:null,objEditorManager:null,objSimActivityRef:null,objSimEventController:null,objActRef:null,constructor:function(t){this.objEditorManager=t.editorManager,this.objSimActivityRef=t.simActRef}}),n.prototype.initalize=function(t,e){this.objData=t,this.objActRef=e,this.initSimEventController(),this.initalizeAssembler()},n.prototype.setStageScaleValue=function(t){void 0!==this.objAssembler&&null!==this.objAssembler&&this.objAssembler.setStageScaleValue(t)},n.prototype.initalizeAssembler=function(){var t=this;this.objSimActivityRef=this.objActRef,this.objAssembler=new e(this.objData.jsonData,this.objData.template,this.objSimActivityRef,this.objEditorManager,this.objSimEventController),this.objAssembler.off(e.COMP_CREATION_COMPLETE),this.objAssembler.on(e.COMP_CREATION_COMPLETE,t.handleAssemberEvent,t),this.objAssembler.assembleComponent(),this.objSimActivityRef.screenEventName=this.objSimActivityRef.ActivityEventConst.MIDDLE_SCREEN_LOAD_EVENT,0===this.objSimActivityRef.nScreenIndex?this.objSimActivityRef.screenEventName=this.objSimActivityRef.ActivityEventConst.FIRST_SCREEN_LOAD_EVENT:this.objSimActivityRef.nScreenIndex===this.objSimActivityRef.nTotalScreen-1&&(this.objSimActivityRef.screenEventName=this.objSimActivityRef.ActivityEventConst.LAST_SCREEN_LOAD_EVENT)},n.prototype.handleAssemberEvent=function(){var t=this;this.objSimActivityRef.objScreen.dispatchScreenEvent(this.objSimActivityRef.screenEventName,{}),this.objSimActivityRef.objScreen.childCreationComplete(),this.objSimActivityRef.objScreen.globalComp=this.objAssembler.globalCompDict,this.objSimActivityRef.bGlobalComponents===!0&&(this.objSimActivityRef.bGlobalComponents=!1,this.objAssembler.on(e.GLOBAL_COMP_CREATED,t.onGlobalCompCreationComplete,t),this.objAssembler.createGlobalComponents())},n.prototype.onGlobalCompCreationComplete=function(){this.objSimActivityRef.objScreen.globalComp=this.objAssembler.globalCompDict},n.prototype.initSimEventController=function(){this.objSimEventController=new i
},n.prototype.destroyCurrentScreen=function(){return this.objAssembler.flushScreen()},n.prototype.callAndUpdateComponent=function(t){this.objSimEventController.executeTask(t)},n.prototype.destroy=function(){this.objAssembler.destroy(),this.objAssembler.off(e.COMP_CREATION_COMPLETE),this.objData=void 0,this.objAssembler=void 0,this.objEventManager=void 0,this.objWarehouse=void 0,this.objScreen=void 0,this.objEditorManager=void 0},n}),define("player/controllers/media-controller",["marionette"],function(){var t,e;return e=null,t=Backbone.Marionette.Controller.extend({media_dict:{}}),t.prototype.registerMedia=function(t,e){var i={};if(i.target=t,i.type=e,void 0!==this.media_dict[t.getID()])throw new Error("Already registered.....",t.getID());this.media_dict[t.getID()]=i},t.prototype.unregisterMedia=function(t){delete this.media_dict[t.getID()]},t.prototype.pauseAllMedia=function(){$.each(this.media_dict,function(t,e){e.target.pause()})},t.prototype.resumeAllMedia=function(){$.each(this.media_dict,function(t,e){e.target.resume()})},t.prototype.stopAllMedia=function(){$.each(this.media_dict,function(t,e){e.target.resume()})},{getInstance:function(){return null===e&&(e=new t),e}}}),define("text",["module"],function(t){var e,i,n,o,r,s=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],a=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,l=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,c="undefined"!=typeof location&&location.href,h=c&&location.protocol&&location.protocol.replace(/\:/,""),u=c&&location.hostname,p=c&&(location.port||void 0),d={},f=t.config&&t.config()||{};return e={version:"2.0.10",strip:function(t){if(t){t=t.replace(a,"");var e=t.match(l);e&&(t=e[1])}else t="";return t},jsEscape:function(t){return t.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:f.createXhr||function(){var t,e,i;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(e=0;3>e;e+=1){i=s[e];try{t=new ActiveXObject(i)}catch(n){}if(t){s=[i];break}}return t},parseName:function(t){var e,i,n,o=!1,r=t.indexOf("."),s=0===t.indexOf("./")||0===t.indexOf("../");return-1!==r&&(!s||r>1)?(e=t.substring(0,r),i=t.substring(r+1,t.length)):e=t,n=i||e,r=n.indexOf("!"),-1!==r&&(o="strip"===n.substring(r+1),n=n.substring(0,r),i?i=n:e=n),{moduleName:e,ext:i,strip:o}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(t,i,n,o){var r,s,a,l=e.xdRegExp.exec(t);return l?(r=l[2],s=l[3],s=s.split(":"),a=s[1],s=s[0],!(r&&r!==i||s&&s.toLowerCase()!==n.toLowerCase()||(a||s)&&a!==o)):!0},finishLoad:function(t,i,n,o){n=i?e.strip(n):n,f.isBuild&&(d[t]=n),o(n)},load:function(t,i,n,o){if(o.isBuild&&!o.inlineText)return n(),void 0;f.isBuild=o.isBuild;var r=e.parseName(t),s=r.moduleName+(r.ext?"."+r.ext:""),a=i.toUrl(s),l=f.useXhr||e.useXhr;return 0===a.indexOf("empty:")?(n(),void 0):(!c||l(a,h,u,p)?e.get(a,function(i){e.finishLoad(t,r.strip,i,n)},function(t){n.error&&n.error(t)}):i([s],function(t){e.finishLoad(r.moduleName+"."+r.ext,r.strip,t,n)}),void 0)},write:function(t,i,n){if(d.hasOwnProperty(i)){var o=e.jsEscape(d[i]);n.asModule(t+"!"+i,"define(function () { return '"+o+"';});\n")}},writeFile:function(t,i,n,o,r){var s=e.parseName(i),a=s.ext?"."+s.ext:"",l=s.moduleName+a,c=n.toUrl(s.moduleName+a)+".js";e.load(l,n,function(){var i=function(t){return o(c,t)};i.asModule=function(t,e){return o.asModule(t,c,e)},e.write(t,l,i,r)},r)}},"node"===f.env||!f.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]?(i=require.nodeRequire("fs"),e.get=function(t,e,n){try{var o=i.readFileSync(t,"utf8");0===o.indexOf("﻿")&&(o=o.substring(1)),e(o)}catch(r){n(r)}}):"xhr"===f.env||!f.env&&e.createXhr()?e.get=function(t,i,n,o){var r,s=e.createXhr();if(s.open("GET",t,!0),o)for(r in o)o.hasOwnProperty(r)&&s.setRequestHeader(r.toLowerCase(),o[r]);f.onXhr&&f.onXhr(s,t),s.onreadystatechange=function(){var e,o;4===s.readyState&&(e=s.status,e>399&&600>e?(o=new Error(t+" HTTP status: "+e),o.xhr=s,n(o)):i(s.responseText),f.onXhrComplete&&f.onXhrComplete(s,t))},s.send(null)}:"rhino"===f.env||!f.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?e.get=function(t,e){var i,n,o="utf-8",r=new java.io.File(t),s=java.lang.System.getProperty("line.separator"),a=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(r),o)),l="";try{for(i=new java.lang.StringBuffer,n=a.readLine(),n&&n.length()&&65279===n.charAt(0)&&(n=n.substring(1)),null!==n&&i.append(n);null!==(n=a.readLine());)i.append(s),i.append(n);l=String(i.toString())}finally{a.close()}e(l)}:("xpconnect"===f.env||!f.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(n=Components.classes,o=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),r="@mozilla.org/windows-registry-key;1"in n,e.get=function(t,e){var i,s,a,l={};r&&(t=t.replace(/\//g,"\\")),a=new FileUtils.File(t);try{i=n["@mozilla.org/network/file-input-stream;1"].createInstance(o.nsIFileInputStream),i.init(a,1,0,!1),s=n["@mozilla.org/intl/converter-input-stream;1"].createInstance(o.nsIConverterInputStream),s.init(i,"utf-8",i.available(),o.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),s.readString(i.available(),l),s.close(),i.close(),e(l.value)}catch(c){throw new Error((a&&a.path||"")+": "+c)}}),e}),define("text!player/components/toolbox/toolbox.html",[],function(){return'<div id="toolboxContainer">\n	<div id="toolboxHeader" class="toolboxHeader">Tool Box</div>\n</div>\n'}),define("player/components/toolbox/toolbox",["marionette","underscore","text!player/components/toolbox/toolbox.html"],function(t,e,i){var n;return n=Backbone.Marionette.Layout.extend({template:e.template(i),toolboxData:void 0,toolDict:void 0,currentTool:void 0,currentToolId:void 0,currentToolCursor:void 0,cursorDiv:void 0,arrToolToBeCreated:void 0,initialize:function(t){this.toolboxData=t,this.toolDict={},this.createToolbox()}}),n.prototype.createToolbox=function(){var t,e=$(i);$("#mPlayer").append(e),e.addClass(this.toolboxData.styleClass),"true"===this.toolboxData.float&&this.makeDraggable(e),void 0!==this.toolboxData.label&&(t=e.find("[id=toolboxHeader]"),t.empty(),$("<p>"+this.toolboxData.label+"</p>").appendTo(t)),void 0!==this.toolboxData.tool&&this.addItem($(e))},n.prototype.makeDraggable=function(t){$(t).draggable({handle:"#toolboxHeader",containment:"#mPlayer"})},n.prototype.addItem=function(t){var i,n,o=this,r=0,s=[],a=e.isArray(this.toolboxData.tool);s=a===!0?this.toolboxData.tool:[this.toolboxData.tool],this.arrToolToBeCreated=s,n=s[r],i=$('<div id="'+n.id+'"/>'),i.addClass(n.styleClass),t.append(i),require([n["class"]],function(e){o.onToolClassLoadComplete(e,i,t)})},n.prototype.onToolClassLoadComplete=function(t,e,i){var n,o,r,s="click",a=this;if(n=this.arrToolToBeCreated[0],this.arrToolToBeCreated.splice(0,1),void 0!==this.toolDict[n.id])throw new Error(n.id+" is alreay registred with the Toolbox!!!");o={},o.id=n.id,o.cursor=n.cursor,o.controller=new t,this.toolDict[n.id]=o,(device.mobile()===!0||device.tablet()===!0)&&(s="tap"),e.on(s,a,a.handleToolboxItemClick),this.arrToolToBeCreated.length>0?this.addItem(i):(r=$('<div id="customCursor"/>'),$("body").append(r),this.cursorDiv=r,r.css("position","absolute"))},n.prototype.handleToolboxItemClick=function(t){var e=t.data;void 0!==e.currentTool&&e.currentTool.stop(),e.canvasRef=$("#objCanvas"),e.currentTool=e.toolDict[t.target.id].controller,e.currentToolId=t.target.id,e.currentToolCursor=e.toolDict[t.target.id].cursor,e.currentTool.start(e.canvasRef[0]),console.log("classRef.currentToolId .........",e.currentToolId,e.currentToolCursor),void 0!==e.cursorDiv&&e.cursorDiv.removeClass(),e.cursorDiv.css("display","none"),$("#mPlayer").off("mousemove"),$("#mPlayer").off("mouseover"),$("#mPlayer").off("mouseout"),$("body").css("cursor","default"),void 0!==e.currentToolCursor&&(e.cursorDiv.addClass(e.currentToolCursor),e.addCursorAndMove())},n.prototype.addCursorAndMove=function(){var t,e=this;t=e.canvasRef,t.on("mousemove",function(t){$(e.cursorDiv).css("left",t.clientX+5+"px"),e.cursorDiv.css("top",t.clientY+5+"px")}),t.on("mouseout",function(t){$(e.cursorDiv).css("left",t.clientX+5+"px"),e.cursorDiv.css("top",t.clientY+5+"px"),e.cursorDiv.css("display","none"),$("body").css("cursor","default")}),t.on("mouseover",function(t){$(e.cursorDiv).css("display","block"),$(e.cursorDiv).css("left",t.clientX+5+"px"),e.cursorDiv.css("top",t.clientY+5+"px"),e.cursorDiv.css("display","block"),$("body").css("cursor","none")})},n}),define("player/controllers/toolbox-controller",["marionette","player/events/eventsconst","player/utils/data-loader","player/constants/errorconst","player/components/toolbox/toolbox"],function(t,e,i,n,o){var r;return r=Backbone.Marionette.Controller.extend({toolboxData:void 0,objToolbox:void 0,constructor:function(t){this.toolboxData=t,this.objToolbox=new o(t)}}),r.prototype.destroy=function(){},r}),define("player/manager/region-manager",["marionette","backbone","player/controllers/activity-controller","player/events/eventsconst","player/events/event-broadcaster","simPictor/sim-pictor","player/controllers/media-controller","player/constants/errorconst"],function(t,e,i,n,o,r,s,a){var l=e.Marionette.Controller.extend({objThis:void 0,regionState:{},mPlayerModel:void 0,objMPlayer:void 0,objPlayerConfig:void 0,objActConfig:void 0,objActivityControlle:void 0,objEventConst:void 0,groupModelDict:{},nActivityIndex:void 0,objActControllerDict:void 0,objEventBroadcaster:void 0,objInlineTemplates:{},objInlineTmplDict:{},bAllRegionReady:!1,arrKey:[],objActivtyToLaunch:{},bDrawingMode:!1,objToolController:void 0,_objActControllerDict:{},objTemplateData:void 0,constructor:function(t,e,i,r,s,a){var l,c;if(this.regionState={},this.mPlayerModel=r,this.objMPlayer=t,this.objPlayerConfig=e,this.objActConfig=i,this._objActControllerDict={},this.objInlineTemplates={},this.objEventConst=n,this.groupModelDict={},this.objEventBroadcaster=new o,this.objEventBroadcaster.on(this.objEventBroadcaster.BUBBLE_EVENT,this.bubbleEvent,this),this.bDrawingMode=s,this.objToolController=void 0,this.objTemplateData=a,void 0!==this.objTemplateData)for(l=0;l<this.objTemplateData.length;l+=1)c=$(this.objTemplateData[l]),this.objInlineTmplDict[c.attr("id")]=c.html()}});return l.prototype.initlizeAllRegions=function(){var t,e=0,i=[],n={};for(void 0===this.objActConfig.regions.region.length?i.push(this.objActConfig.regions.region):i=this.objActConfig.regions.region,this.mPlayerModel.set("arrRegionList",[]),this.mPlayerModel.set("objRegions",{}),e=0;e<i.length;e++)t=i[e].id,n[t]=this.initRegion(i[e]);this.mPlayerModel.set("objRegions",this._objActControllerDict),this.initlizeAllActivity(n),void 0!==this.objActConfig.toolbox&&this.initlizeToolbox()},l.prototype.initRegion=function(t){var e,n,o=this,r=t.id;return this.mPlayerModel.get("arrRegionList").push(t.id),e=new i(this.objMPlayer[r],this.objPlayerConfig,r,this.objEventBroadcaster,this.bDrawingMode),n={},n.classRef=e,n.testID=r,e.classReference=n,e.mPlayerModel=this.mPlayerModel,this._objActControllerDict[r]=e,this._objActControllerDict[r].setLocalLanguage(this.objMPlayer.getPlayerHelper().getLocalLanguage()),this._objActControllerDict[r].showPreloaderBeforeActivityLaunch(this.objMPlayer.getPlayerHelper().getPreloaderSetting()),this._objActControllerDict[r].initController(t),e.on(this.objEventConst.REGION_INITLIZE_UPATE_EVENT,o.handleActivityInitProcess,o),e.on(this.objEventConst.CREATE_COMPONENT_EVENT,o.createComponent,o),e.on(this.objEventConst.PLAYER_COMMON_TASK_EVENT,o.handlePlayerCommonTaskEvent,o),e.on(this.objEventConst.BROADCAST_EVENT,o.broadcastEvent,o),e.on(this.objEventConst.ON_ACTIVITY_SUCCESSFULLY_ADDED_IN_REGION,o.onActivityAddedInRegion,o),e.on(this.objEventConst.REMOVE_COMPONENT_EDITORS,o.flushEditor,o),e.on(this.objEventConst.CREATE_AND_INIT_ACTIVITY_HTML,o.createHTMLComponent,o),this.bDrawingMode===!0&&(e.on(objEventConst.SET_DRAWING_CANVAS,o.setDrawingCanvasEvent,o),e.on(objEventConst.DRAWING_COMMON_TASK,o.handleDrawingCommonTask,o)),this.objMPlayer.getPlayerHelper().onActivityInitlized(r),e.loadPriority=t.loadPriority,$.makeArray(t.activities.activity).slice()},l.prototype.initlizeAllActivity=function(t){var e;this.arrKey=[];for(e in this._objActControllerDict)if(this._objActControllerDict.hasOwnProperty(e))if(void 0===this._objActControllerDict[e].loadPriority)this._objActControllerDict[e].allRegionActivityList=t,this._objActControllerDict[e].launchDefaultActivity();else{if(this._objActControllerDict[e].loadPriority=Number(this._objActControllerDict[e].loadPriority),this.objActivtyToLaunch[this._objActControllerDict[e].loadPriority]=e,-1!==this.arrKey.indexOf(this._objActControllerDict[e].loadPriority))throw new Error(a.SAME_LOAD_PRIORITY_DEFINED);this.arrKey.push(Number(this._objActControllerDict[e].loadPriority))}this.arrKey.length>0&&(this.arrKey=this.arrKey.sort(this.sortRule),this.initActivityControllerByPriorityList(0))},l.prototype.sortRule=function(t,e){return t-e},l.prototype.initActivityControllerByPriorityList=function(t){t<this.arrKey.length&&this._objActControllerDict[this.objActivtyToLaunch[this.arrKey[t]]].launchDefaultActivity()},l.prototype.initlizeToolbox=function(){var t=this,e=objActConfig.toolbox;require(["player/controllers/toolbox-controller"],function(i){t.objToolController=new i(e)})},l.prototype.createComponent=function(t){this.objMPlayer.getPlayerHelper().getFactoryManager().getComponent(t)},l.prototype.createHTMLComponent=function(t){t.controller.editorData=t,this.objMPlayer.getPlayerHelper().getEditorManager().renderActivityHTML(t.controller.strRegionName,t.actData)},l.prototype.setDrawingCanvasEvent=function(t){objMPlayer.getPlayerHelper().getDrawingManager().setUserCanvas(t)},l.prototype.handleDrawingCommonTask=function(){},l.prototype.handleActivityInitProcess=function(t){var e,i,n=!1,o={},s={},a=this;switch(e=t.progressType){case this.objEventConst.REGION_INITLIZE_START_EVENT:t.target.isReady=!1;break;case this.objEventConst.REGION_INITLIZE_COMPLETE_EVENT:n=!0,t.target.isReady=!0,"simulation"===t.target.objActivityRef.type&&(s.editorManager=a.objMPlayer.getPlayerHelper().getEditorManager(),s.simActRef=t.target.objActivityRef,t.target.objActivityRef.setPictorRef(new r(s)));for(i in a._objActControllerDict)if(a._objActControllerDict.hasOwnProperty(i)&&a._objActControllerDict[i].isReady!==!0)return n=!1,-1!==a.arrKey.indexOf(t.target.loadPriority)&&a.initActivityControllerByPriorityList(this.arrKey.indexOf(t.target.loadPriority)+1),void 0;if(n===!0){o={},o.type=a.objEventConst.PLAYER_INITLIZE_COMPLETE_EVENT,o.target=a,a.objMPlayer.getPlayerHelper().onPlayerInitlizationComplete(o);for(i in a._objActControllerDict)a._objActControllerDict.hasOwnProperty(i)&&a._objActControllerDict[i].onPlayerInitComplete()}}this.bAllRegionReady=n},l.prototype.handlePlayerCommonTaskEvent=function(t){var e=t.task;switch(e){case this.objEventConst.SHOW_HIDE_REGION:this.objMPlayer.getPlayerHelper().showHideRegionById(t.regionId,t.state);break;case this.objEventConst.SHOW_PRELOADER:this.objMPlayer.getPlayerHelper().showPreloader();break;case this.objEventConst.HIDE_PRELOADER:this.objMPlayer.getPlayerHelper().hidePreloader();break;case this.objEventConst.LAUNCH_ACTIVITY_IN_REGION:this._objActControllerDict[t.regionId].onActivityLaunchRequestByAnotherRegion(t);break;case this.objEventConst.UPDATE_PLAYER_SIZE_EVENT:this.objMPlayer.getPlayerHelper().onPlayerInitlizationComplete(t);break;case this.objEventConst.PREPARE_INLINE_TEMPLATE_DATA:t.data.inlineTemplates=void 0,this.prepareInlineTemplates(t);break;case this.objEventConst.PAUSE_ALL_MEDIA:s.getInstance().pause();break;case this.objEventConst.RESUME_ALL_MEDIA:s.getInstance().resume();break;case this.objEventConst.MANAGE_NEXT_BACK_NEVIGATION_BUTTON:this.manageNextBackNevigationEvent(t)}},l.prototype.manageNextBackNevigationEvent=function(t){var e,i,n,o,r=t.controls;for(e=0;e<r.length;e+=1)i=r[e].id,n=r[e].region,o=r[e],o.param=t[r[e].param],this._objActControllerDict[n].updateNevigationControl(o)},l.prototype.bubbleEvent=function(t){var e;for(e in this._objActControllerDict)this._objActControllerDict.hasOwnProperty(e)&&this._objActControllerDict[e].bubbleEvent(t)},l.prototype.broadcastEvent=function(t){this.objEventBroadcaster.broadcastEvent(t)},l.prototype.flushEditor=function(t){this.objMPlayer.getPlayerHelper().getEditorManager().flushEditor(t)},l.prototype.onActivityAddedInRegion=function(t){this.regionState[t.regionName]=t;var e;for(e in this._objActControllerDict)this._objActControllerDict.hasOwnProperty(e)&&this._objActControllerDict[e].onRegionUpdate(this.regionState)},l.prototype.OnHTMLCreationCompleteComponent=function(t){var e=this._objActControllerDict[t.regionId];this.setInlineTemplates(t.regionId,t),e.onHtmlLoadComplete(t)},l.prototype.setInlineTemplates=function(t,e){e.hasOwnProperty("inlineTemplates")&&(this.objInlineTemplates[t]=e.inlineTemplates,this.bAllRegionReady&&this.prepareInlineTemplates())},l.prototype.prepareInlineTemplates=function(t){var e,i=this;$.each(i.objInlineTemplates,function(t,n){if(i.objInlineTemplates.hasOwnProperty(t))for(e=0;e<n.length;e+=1){var o=$(n[e]);i.objInlineTmplDict[o.attr("id")]=o.html()}}),$.each(i._objActControllerDict,function(t){i._objActControllerDict.hasOwnProperty(t)&&i._objActControllerDict[t].setInlineTemplates(i.objInlineTmplDict)}),void 0!==t&&t.callback===!0&&(t.data.processData=i.objInlineTmplDict,i._objActControllerDict[t.data.regionId].onHtmlLoadComplete(t.data))},l.prototype.onComponentCreationComplete=function(t){t.actController.onComponentCreated(t)},l.prototype.setStageScaleValue=function(t){var e,i=this;for(e in i._objActControllerDict)i._objActControllerDict.hasOwnProperty(e)&&i._objActControllerDict[e].setStageScaleValue(t)},l.prototype.getInlineTemplateData=function(){return this.objInlineTmplDict},l.prototype.destroy=function(){var t=this;t.removeEvents(),t.objEventBroadcaster.off(objClassRefobjEventBroadcaster.BUBBLE_EVENT);var e,i;for(e in objClassRef_objActControllerDict)t._objActControllerDict.hasOwnProperty(e)&&(i=t._objActControllerDict[e],i.off(t.objEventConst.CREATE_COMPONENT_EVENT),i.off(t.objEventConst.PLAYER_COMMON_TASK_EVENT),i.off(t.objEventConst.BROADCAST_EVENT),i.off(t.objEventConst.ON_ACTIVITY_SUCCESSFULLY_ADDED_IN_REGION),i.off(t.objEventConst.REMOVE_COMPONENT_EDITORS),i.off(t.objEventConst.CREATE_AND_INIT_ACTIVITY_HTML),i.off(t.objEventConst.SET_DRAWING_CANVAS),i.off(t.objEventConst.DRAWING_COMMON_TASK),i.off(t.objEventConst.DRAWING_COMMON_TASK),i.off(t.objEventConst.REGION_INITLIZE_START_EVENT));return t.objActivityController.destroy(),!0},l}),define("player/editor/editor-controller",["marionette","player/utils/data-loader","player/constants/errorconst"],function(t,e,i){var n;return n=Backbone.Marionette.Controller.extend({objPlayerRef:void 0,compEditor:void 0,data_loader:void 0,regionId:void 0,activityTemplate:void 0,activityData:void 0,arrCompList:void 0,arrCreatedCompList:void 0,ACTIVITY_CREATED_SUCCESSFULLY:"activitytCreationSuccess",SIM_COMP_CREATION_COMPLETE:"simCompCreationComplete",EDITOR_PATH:"player/editor/",EDITOR_SUFFIX:"-editor",COMP_NAME:"compName",jsonData:void 0,constructor:function(t,i){this.objPlayerRef=i,this.data_loader=new e,this.regionId=t,this.arrCreatedCompList=[]},initialize:function(t,e){var i,n=this;this.activityData=e,i="text!"+this.activityData.html.source,require([i],function(t){n.activityTemplate=t,n.getComponentList()})}}),n.prototype.getComponentList=function(){-1!==this.activityTemplate.search("mComp")&&(this.arrCompList=$("<div>"+this.activityTemplate+"<div>").find("[type=mComp]")),void 0!==this.arrCompList&&this.arrCompList.length>0?(this.arrCreatedCompList=[],this.createMCompComponents(this.arrCompList)):this.onHTMLParsingComplete()},n.prototype.createMCompComponents=function(t){var e,i=this;e=$(t[0]).attr(this.COMP_NAME)+this.EDITOR_SUFFIX,require([this.EDITOR_PATH+e],function(t){i.onEditorCreationComplete(t)})},n.prototype.onComponentCreationComplete=function(t){t.target.off(this.compEditor.ON_COMP_CREATED),this.arrCreatedCompList.push(t),this.arrCompList.splice(0,1),this.arrCompList.length>0?this.createMCompComponents(this.arrCompList):this.onHTMLParsingComplete()},n.prototype.flush=function(){var t,e,n;for(t=0;t<this.arrCreatedCompList.length;t+=1)if(e=this.arrCreatedCompList[t].target,n=e.destroy(),e.isDestroyCalled!==!0)throw new Error(i.PLEASE_CALL_SUPER_CLASS_DESTORY_FROM_COMPONENT_EDITOR)},n.prototype.onEditorCreationComplete=function(t){this.compEditor=new t,this.compEditor.on(this.compEditor.ON_COMP_CREATED,this.onComponentCreationComplete,this),this.compEditor.getComponent(this.arrCompList[0],this.objPlayerRef.getPlayerHelper().nUpdatedScaleValue)},n.prototype.onHTMLParsingComplete=function(){var t,e={},i=!1;-1!==this.activityTemplate.search("text/template")&&(i=!0,this.activityTemplate=$("<div>"+this.activityTemplate+"</div>"),t=this.activityTemplate.find("[type='text/template']")),void 0!==t&&t.length>0&&(e.inlineTemplates=t,t.remove()),e.regionId=this.regionId,e.activityTemplate=i?this.activityTemplate.html():this.activityTemplate,e.createdCompList=this.arrCreatedCompList,void 0!==this.compEditor&&this.compEditor.off(this.compEditor.ON_COMP_CREATED),this.trigger(this.ACTIVITY_CREATED_SUCCESSFULLY,e)},n.prototype.createSimComp=function(t,e){var i,n=this;i=t+this.EDITOR_SUFFIX,require([this.EDITOR_PATH+i],function(t){n.onSimCompEditorCreationComplete(t,e)})},n.prototype.onSimCompEditorCreationComplete=function(t,e){this.jsonData=e;var i=new t(e);i.on(i.ON_COMP_CREATED,this.onSimCompCreationComplete,this),i.getComponent(e,!0)},n.prototype.onSimCompCreationComplete=function(t){var e={};e.jsonData=this.jsonData,e.compData=t,t.target.off(t.target.ON_COMP_CREATED),this.trigger(this.SIM_COMP_CREATION_COMPLETE,e)},n.prototype.destroy=function(){void 0!==this.compEditor&&this.compEditor.off(this.compEditor.ON_COMP_CREATED)},n}),define("player/manager/editor-manager",["marionette","player/editor/editor-controller","player/factory/factory"],function(t,e){var i;return i=Backbone.Marionette.Controller.extend({objMPlayer:null,editor_dict:null,constructor:function(t){this.editor_dict={},this.objMPlayer=t,this.initialize()}}),i.prototype.initialize=function(){},i.prototype.createEditorController=function(t){var i=this,n=new e(t,this.objMPlayer);n.on(n.ACTIVITY_CREATED_SUCCESSFULLY,i.onActivityCreationSuccess,i),this.editor_dict[t]=n},i.prototype.getEditorController=function(t){var e=this.editor_dict[t];return e},i.prototype.renderActivityHTML=function(t,e){this.editor_dict[t].initialize(t,e)},i.prototype.onActivityCreationSuccess=function(t){this.objMPlayer.getPlayerHelper().getRegionManager().OnHTMLCreationCompleteComponent(t)},i.prototype.flushEditor=function(t){var e=this.editor_dict[t];e.flush(),e=void 0},i.prototype.destroy=function(){var t,e,i=this;for(t in i.editor_dict)this.editor_dict.hasOwnProperty(t)&&(e=i.editor_dict[t],e.destroy(),e.off(e.ACTIVITY_CREATED_SUCCESSFULLY),e=void 0);return i.editor_dict=void 0,!0},i}),define("player/manager/media-manager",["marionette","player/events/eventsconst"],function(){var t;return t=Backbone.Marionette.Controller.extend({objMPlayer:void 0,mediaDict:void 0,constructor:function(t){this.objMPlayer=t,this.mediaDict={}}}),t.prototype.registerMediaController=function(){},t.prototype.destroy=function(){},t}),define("player/model/mplayer-model",["require","exports","module","marionette"],function(t){var e,i,n;return n=t("marionette"),i=null,e=Backbone.Model.extend({defaults:{nActivityIndex:0,arrRegionList:[],objRegions:{},activityIndex:{}}}),e.prototype.getValue=function(){},{getInstance:function(){return i||(i=new e),i}}}),define("player/manager/factory-manager",["marionette","player/factory/factory"],function(t,e){var i;return i=Backbone.Marionette.Controller.extend({objFactory:void 0,objMPlayer:void 0,constructor:function(t){this.objFactory=void 0,this.objMPlayer=t,this.initlize()}}),i.prototype.onComponentCreationComplete=function(t){this.objMPlayer.getPlayerHelper().getRegionManager().onComponentCreationComplete(t)},i.prototype.initlize=function(){var t=this;this.objFactory=new e,this.objFactory.on(this.objFactory.COMP_CREATION_COMPLETE_EVENT,this.onComponentCreationComplete,t)},i.prototype.createComponent=function(t){this.objFactory.getComponent(t)},i.prototype.getComponent=function(t){this.createComponent(t)},i.prototype.destroy=function(){return this.objFactory.off(this.objFactory.COMP_CREATION_COMPLETE_EVENT),this.objFactory=void 0,!0},i}),define("player/drawing/toollist",[],function(){var t={toolBox:{tool:[{id:"Pen",name:"penTool",classpath:"player/drawing/tools/Pen",cursor:"cursor path",label:"Pen",toolTip:"Pen Tool"},{id:"Highlighter",name:"highlighter",classpath:"player/drawing/tools/Highlighter",cursor:"cursor path",label:"Highlighter",toolTip:"Highlighter Tool"}]}};return t}),define("player/drawing/drawing-controller",["marionette","player/drawing/toollist"],function(t,e){var i;return i=Backbone.Marionette.Controller.extend({activeToolId:void 0,activeTool:void 0,activeCustor:void 0,objCanvas:void 0,objToolDict:void 0,toolToBeLoaded:void 0,constructor:function(){this.initDrawingController()}}),i.prototype.initDrawingController=function(){this.initlizeToolBox()},i.prototype.setUserCanvasData=function(t){this.objCanvas=t.canvas,this.activeToolId="Highlighter",this.activateTool(this.activeToolId)},i.prototype.initlizeToolBox=function(){this.objToolDict={}},i.prototype.activateTool=function(t){switch(void 0===this.objToolDict[t]?this.requireToolClasses(t):(this.activeTool=this.objToolDict[t],this.activeTool.start()),t){case"PEN":}},i.prototype.requireToolClasses=function(t){var i,n=this;i=_.filter(e.toolBox.tool,function(e){return e.id===t}),this.toolToBeLoaded=i[0],require([this.toolToBeLoaded.classpath],function(e){n.activeTool=new e(n.objCanvas),n.objToolDict[t]=n.activeTool,n.activeTool.start(n.objCanvas)})},i}),define("player/manager/drawing-manager",["marionette","player/drawing/drawing-controller"],function(t,e){var i;return i=Backbone.Marionette.Controller.extend({objData:void 0,drawingController:void 0,constructor:function(){this.objData=void 0,this.drawingController=void 0,this.initDrawingManager()}}),i.prototype.initDrawingManager=function(){this.drawingController=new e},i.prototype.setUserCanvas=function(t){this.objData=t,this.drawingController.setUserCanvasData(this.objData)},i.prototype.enable=function(){},i.prototype.destroy=function(){return this.objData=null,this.drawingController=null,!0},i}),define("player/mplayer-helper",["marionette","player/manager/region-manager","player/manager/editor-manager","player/manager/media-manager","underscore","player/model/mplayer-model","player/manager/factory-manager","player/factory/factory","player/constants/errorconst"],function(t,e,i,n,o,r,s,a,l){var c;return c=Backbone.Marionette.Controller.extend({objPlayerRef:void 0,objRegionManager:void 0,objMediaManager:void 0,objEditorManager:void 0,objFactoryManager:void 0,objDrawingManager:void 0,bDrawingMode:void 0,nUpdatedScaleValue:void 0,constructor:function(t){this.objPlayerRef=t,this.objDrawingManager=void 0,this.bDrawingMode=!1,this.nUpdatedScaleValue=1}}),c.prototype.initlize=function(){this.setTheme(),this.bDrawingMode=this.initDrawingManager(),this.initlizeActivityManager(),this.initlizeFactoryManager(),this.initEditor(),this.launchDefaultActivity()},c.prototype.initlizeActivityManager=function(){this.objRegionManager=new e(this.objPlayerRef,this.objPlayerRef.getPlayerConfig(),this.objPlayerRef.getActivityConfig(),r.getInstance(),this.bDrawingMode,this.objPlayerRef.getPopupTemplatesData())},c.prototype.initMediaManager=function(){this.objMediaManager=new n(this.objPlayerRef)},c.prototype.initEditor=function(){this.objEditorManager=new i(this.objPlayerRef)},c.prototype.initlizeFactoryManager=function(){this.objFactoryManager=new s(this.objPlayerRef)},c.prototype.onActivityInitlized=function(t){this.objEditorManager.createEditorController(t)},c.prototype.launchDefaultActivity=function(){this.objPlayerRef.getActivityConfig();this.objRegionManager.initlizeAllRegions()},c.prototype.initDrawingManager=function(){var t=!1,e=this;return void 0!==this.objPlayerRef.getPlayerConfig().drawing&&(t="true"===this.objPlayerRef.getPlayerConfig().drawing.enable?!0:!1),t===!0&&require(["player/manager/drawing-manager"],function(t){e.objDrawingManager=new t}),t},c.prototype.onPlayerInitlizationComplete=function(t){this.objPlayerRef.onPlayerInitlizeComplete(t)},c.prototype.getDrawingManager=function(){return this.objDrawingManager},c.prototype.getEditorManager=function(){return this.objEditorManager},c.prototype.getRegionManager=function(){return this.objRegionManager},c.prototype.getFactoryManager=function(){return this.objFactoryManager},c.prototype.showHideRegionById=function(t,e){var i=$("#"+t);if(!i)throw new Error(l.NO_REGION_FIND+"["+t+"]!!!");e===!0?i.show():i.hide()},c.prototype.showPreloader=function(){$("#preloader").show()},c.prototype.hidePreloader=function(){$("#preloader").hide()},c.prototype.getLocalLanguage=function(){var t=this.objPlayerRef.getPlayerConfig().language["default"];return void 0!==jQuery.url.param("language")&&(t=jQuery.url.param("language")),t},c.prototype.getPreloaderSetting=function(){var t=!1;return void 0!==this.objPlayerRef.getPlayerConfig().showPreloader&&(t="true"===this.objPlayerRef.getPlayerConfig().showPreloader),t},c.prototype.setTheme=function(){var t,e,i,n,o,r;t=this.objPlayerRef.getPlayerConfig().themes,void 0!==t&&(void 0!==jQuery.url&&(e=jQuery.url.param("theme")),void 0===e&&(e=t.defaultTheme),i=t.prefix,n=i+e,o=void 0===t.theme.length?t.theme:this.getThemeObject(t,e),r="css!"+o.path,this.removeAllTheme(t,i),require([r],function(){$("body").addClass(n)}))},c.prototype.getThemeObject=function(t,e){var i=o.filter(t.theme,function(t){return t.id===e?t:void 0});return i[0]},c.prototype.removeAllTheme=function(t,e){o.filter(t.theme,function(t){var i=e+t.id;$("body").removeClass(i)})},c.prototype.updatePlayerScaleValue=function(t){this.nUpdatedScaleValue=t,this.objRegionManager.setStageScaleValue(t)},c.prototype.destroy=function(){this.objRegionManager.destroy()},c}),define("player/constants/playerconst",[],function(){var t={REGION_TYPE_HEADER:"header",REGION_TYPE_FOOTER:"footer",WEB_SERVICE_CALL:"webservicecall",HOST:"PORTAL",REST_SERVICE_CALL:"restservicecall",JSONP_CALL:"jsonpcall",JSON_CALL:"jsoncall",TEXT_CONTENT_CALL:"textfilecall",HTML_CONTENT_CALL:"htmlfilecall",SOAP_WEB_SERVICE:"soapwebservice",REST_WEB_SERVICE:"restwebservice",AUDIO_MEDIA_PLAYER:"audioMediaPlayer",VIDEO_MEDIA_PLAYER:"videoMediaPlayer",ANIMATION_MEDIA_PLAYER:"animationMediaPlayer"};return t}),function(t,e){function i(e,i){var o,r,s,a=e.nodeName.toLowerCase();return"area"===a?(o=e.parentNode,r=o.name,e.href&&r&&"map"===o.nodeName.toLowerCase()?(s=t("img[usemap=#"+r+"]")[0],!!s&&n(s)):!1):(/input|select|textarea|button|object/.test(a)?!e.disabled:"a"===a?e.href||i:i)&&n(e)}function n(e){return t.expr.filters.visible(e)&&!t(e).parents().addBack().filter(function(){return"hidden"===t.css(this,"visibility")}).length}var o=0,r=/^ui-id-\d+$/;t.ui=t.ui||{},t.extend(t.ui,{version:"1.10.3",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),t.fn.extend({focus:function(e){return function(i,n){return"number"==typeof i?this.each(function(){var e=this;setTimeout(function(){t(e).focus(),n&&n.call(e)},i)}):e.apply(this,arguments)}}(t.fn.focus),scrollParent:function(){var e;return e=t.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(t.css(this,"position"))&&/(auto|scroll)/.test(t.css(this,"overflow")+t.css(this,"overflow-y")+t.css(this,"overflow-x"))
}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(t.css(this,"overflow")+t.css(this,"overflow-y")+t.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!e.length?t(document):e},zIndex:function(i){if(i!==e)return this.css("zIndex",i);if(this.length)for(var n,o,r=t(this[0]);r.length&&r[0]!==document;){if(n=r.css("position"),("absolute"===n||"relative"===n||"fixed"===n)&&(o=parseInt(r.css("zIndex"),10),!isNaN(o)&&0!==o))return o;r=r.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++o)})},removeUniqueId:function(){return this.each(function(){r.test(this.id)&&t(this).removeAttr("id")})}}),t.extend(t.expr[":"],{data:t.expr.createPseudo?t.expr.createPseudo(function(e){return function(i){return!!t.data(i,e)}}):function(e,i,n){return!!t.data(e,n[3])},focusable:function(e){return i(e,!isNaN(t.attr(e,"tabindex")))},tabbable:function(e){var n=t.attr(e,"tabindex"),o=isNaN(n);return(o||n>=0)&&i(e,!o)}}),t("<a>").outerWidth(1).jquery||t.each(["Width","Height"],function(i,n){function o(e,i,n,o){return t.each(r,function(){i-=parseFloat(t.css(e,"padding"+this))||0,n&&(i-=parseFloat(t.css(e,"border"+this+"Width"))||0),o&&(i-=parseFloat(t.css(e,"margin"+this))||0)}),i}var r="Width"===n?["Left","Right"]:["Top","Bottom"],s=n.toLowerCase(),a={innerWidth:t.fn.innerWidth,innerHeight:t.fn.innerHeight,outerWidth:t.fn.outerWidth,outerHeight:t.fn.outerHeight};t.fn["inner"+n]=function(i){return i===e?a["inner"+n].call(this):this.each(function(){t(this).css(s,o(this,i)+"px")})},t.fn["outer"+n]=function(e,i){return"number"!=typeof e?a["outer"+n].call(this,e):this.each(function(){t(this).css(s,o(this,e,!0,i)+"px")})}}),t.fn.addBack||(t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(t.fn.removeData=function(e){return function(i){return arguments.length?e.call(this,t.camelCase(i)):e.call(this)}}(t.fn.removeData)),t.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),t.support.selectstart="onselectstart"in document.createElement("div"),t.fn.extend({disableSelection:function(){return this.bind((t.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(t){t.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),t.extend(t.ui,{plugin:{add:function(e,i,n){var o,r=t.ui[e].prototype;for(o in n)r.plugins[o]=r.plugins[o]||[],r.plugins[o].push([i,n[o]])},call:function(t,e,i){var n,o=t.plugins[e];if(o&&t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType)for(n=0;o.length>n;n++)t.options[o[n][0]]&&o[n][1].apply(t.element,i)}},hasScroll:function(e,i){if("hidden"===t(e).css("overflow"))return!1;var n=i&&"left"===i?"scrollLeft":"scrollTop",o=!1;return e[n]>0?!0:(e[n]=1,o=e[n]>0,e[n]=0,o)}})}(jQuery),function(t,e){var i=0,n=Array.prototype.slice,o=t.cleanData;t.cleanData=function(e){for(var i,n=0;null!=(i=e[n]);n++)try{t(i).triggerHandler("remove")}catch(r){}o(e)},t.widget=function(i,n,o){var r,s,a,l,c={},h=i.split(".")[0];i=i.split(".")[1],r=h+"-"+i,o||(o=n,n=t.Widget),t.expr[":"][r.toLowerCase()]=function(e){return!!t.data(e,r)},t[h]=t[h]||{},s=t[h][i],a=t[h][i]=function(t,i){return this._createWidget?(arguments.length&&this._createWidget(t,i),e):new a(t,i)},t.extend(a,s,{version:o.version,_proto:t.extend({},o),_childConstructors:[]}),l=new n,l.options=t.widget.extend({},l.options),t.each(o,function(i,o){return t.isFunction(o)?(c[i]=function(){var t=function(){return n.prototype[i].apply(this,arguments)},e=function(t){return n.prototype[i].apply(this,t)};return function(){var i,n=this._super,r=this._superApply;return this._super=t,this._superApply=e,i=o.apply(this,arguments),this._super=n,this._superApply=r,i}}(),e):(c[i]=o,e)}),a.prototype=t.widget.extend(l,{widgetEventPrefix:s?l.widgetEventPrefix:i},c,{constructor:a,namespace:h,widgetName:i,widgetFullName:r}),s?(t.each(s._childConstructors,function(e,i){var n=i.prototype;t.widget(n.namespace+"."+n.widgetName,a,i._proto)}),delete s._childConstructors):n._childConstructors.push(a),t.widget.bridge(i,a)},t.widget.extend=function(i){for(var o,r,s=n.call(arguments,1),a=0,l=s.length;l>a;a++)for(o in s[a])r=s[a][o],s[a].hasOwnProperty(o)&&r!==e&&(i[o]=t.isPlainObject(r)?t.isPlainObject(i[o])?t.widget.extend({},i[o],r):t.widget.extend({},r):r);return i},t.widget.bridge=function(i,o){var r=o.prototype.widgetFullName||i;t.fn[i]=function(s){var a="string"==typeof s,l=n.call(arguments,1),c=this;return s=!a&&l.length?t.widget.extend.apply(null,[s].concat(l)):s,a?this.each(function(){var n,o=t.data(this,r);return o?t.isFunction(o[s])&&"_"!==s.charAt(0)?(n=o[s].apply(o,l),n!==o&&n!==e?(c=n&&n.jquery?c.pushStack(n.get()):n,!1):e):t.error("no such method '"+s+"' for "+i+" widget instance"):t.error("cannot call methods on "+i+" prior to initialization; attempted to call method '"+s+"'")}):this.each(function(){var e=t.data(this,r);e?e.option(s||{})._init():t.data(this,r,new o(s,this))}),c}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(e,n){n=t(n||this.defaultElement||this)[0],this.element=t(n),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this.bindings=t(),this.hoverable=t(),this.focusable=t(),n!==this&&(t.data(n,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===n&&this.destroy()}}),this.document=t(n.style?n.ownerDocument:n.document||n),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:t.noop,_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(t.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:t.noop,widget:function(){return this.element},option:function(i,n){var o,r,s,a=i;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof i)if(a={},o=i.split("."),i=o.shift(),o.length){for(r=a[i]=t.widget.extend({},this.options[i]),s=0;o.length-1>s;s++)r[o[s]]=r[o[s]]||{},r=r[o[s]];if(i=o.pop(),n===e)return r[i]===e?null:r[i];r[i]=n}else{if(n===e)return this.options[i]===e?null:this.options[i];a[i]=n}return this._setOptions(a),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return this.options[t]=e,"disabled"===t&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!e).attr("aria-disabled",e),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(i,n,o){var r,s=this;"boolean"!=typeof i&&(o=n,n=i,i=!1),o?(n=r=t(n),this.bindings=this.bindings.add(n)):(o=n,n=this.element,r=this.widget()),t.each(o,function(o,a){function l(){return i||s.options.disabled!==!0&&!t(this).hasClass("ui-state-disabled")?("string"==typeof a?s[a]:a).apply(s,arguments):e}"string"!=typeof a&&(l.guid=a.guid=a.guid||l.guid||t.guid++);var c=o.match(/^(\w+)\s*(.*)$/),h=c[1]+s.eventNamespace,u=c[2];u?r.delegate(u,h,l):n.bind(h,l)})},_off:function(t,e){e=(e||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(e).undelegate(e)},_delay:function(t,e){function i(){return("string"==typeof t?n[t]:t).apply(n,arguments)}var n=this;return setTimeout(i,e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){t(e.currentTarget).addClass("ui-state-hover")},mouseleave:function(e){t(e.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){t(e.currentTarget).addClass("ui-state-focus")},focusout:function(e){t(e.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(e,i,n){var o,r,s=this.options[e];if(n=n||{},i=t.Event(i),i.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),i.target=this.element[0],r=i.originalEvent)for(o in r)o in i||(i[o]=r[o]);return this.element.trigger(i,n),!(t.isFunction(s)&&s.apply(this.element[0],[i].concat(n))===!1||i.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},function(e,i){t.Widget.prototype["_"+e]=function(n,o,r){"string"==typeof o&&(o={effect:o});var s,a=o?o===!0||"number"==typeof o?i:o.effect||i:e;o=o||{},"number"==typeof o&&(o={duration:o}),s=!t.isEmptyObject(o),o.complete=r,o.delay&&n.delay(o.delay),s&&t.effects&&t.effects.effect[a]?n[e](o):a!==e&&n[a]?n[a](o.duration,o.easing,r):n.queue(function(i){t(this)[e](),r&&r.call(n[0]),i()})}})}(jQuery),function(t){var e=!1;t(document).mouseup(function(){e=!1}),t.widget("ui.mouse",{version:"1.10.3",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.bind("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).bind("click."+this.widgetName,function(i){return!0===t.data(i.target,e.widgetName+".preventClickEvent")?(t.removeData(i.target,e.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&t(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(i){if(!e){this._mouseStarted&&this._mouseUp(i),this._mouseDownEvent=i;var n=this,o=1===i.which,r="string"==typeof this.options.cancel&&i.target.nodeName?t(i.target).closest(this.options.cancel).length:!1;return o&&!r&&this._mouseCapture(i)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){n.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(i)&&this._mouseDelayMet(i)&&(this._mouseStarted=this._mouseStart(i)!==!1,!this._mouseStarted)?(i.preventDefault(),!0):(!0===t.data(i.target,this.widgetName+".preventClickEvent")&&t.removeData(i.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return n._mouseMove(t)},this._mouseUpDelegate=function(t){return n._mouseUp(t)},t(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),i.preventDefault(),e=!0,!0)):!0}},_mouseMove:function(e){return t.ui.ie&&(!document.documentMode||9>document.documentMode)&&!e.button?this._mouseUp(e):this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,e)!==!1,this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(e){return t(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&t.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),!1},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(t,e){function i(t,e,i){return[parseFloat(t[0])*(d.test(t[0])?e/100:1),parseFloat(t[1])*(d.test(t[1])?i/100:1)]}function n(e,i){return parseInt(t.css(e,i),10)||0}function o(e){var i=e[0];return 9===i.nodeType?{width:e.width(),height:e.height(),offset:{top:0,left:0}}:t.isWindow(i)?{width:e.width(),height:e.height(),offset:{top:e.scrollTop(),left:e.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:e.outerWidth(),height:e.outerHeight(),offset:e.offset()}}t.ui=t.ui||{};var r,s=Math.max,a=Math.abs,l=Math.round,c=/left|center|right/,h=/top|center|bottom/,u=/[\+\-]\d+(\.[\d]+)?%?/,p=/^\w+/,d=/%$/,f=t.fn.position;t.position={scrollbarWidth:function(){if(r!==e)return r;var i,n,o=t("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),s=o.children()[0];return t("body").append(o),i=s.offsetWidth,o.css("overflow","scroll"),n=s.offsetWidth,i===n&&(n=o[0].clientWidth),o.remove(),r=i-n},getScrollInfo:function(e){var i=e.isWindow?"":e.element.css("overflow-x"),n=e.isWindow?"":e.element.css("overflow-y"),o="scroll"===i||"auto"===i&&e.width<e.element[0].scrollWidth,r="scroll"===n||"auto"===n&&e.height<e.element[0].scrollHeight;return{width:r?t.position.scrollbarWidth():0,height:o?t.position.scrollbarWidth():0}},getWithinInfo:function(e){var i=t(e||window),n=t.isWindow(i[0]);return{element:i,isWindow:n,offset:i.offset()||{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:n?i.width():i.outerWidth(),height:n?i.height():i.outerHeight()}}},t.fn.position=function(e){if(!e||!e.of)return f.apply(this,arguments);e=t.extend({},e);var r,d,g,m,v,y,b=t(e.of),_=t.position.getWithinInfo(e.within),C=t.position.getScrollInfo(_),E=(e.collision||"flip").split(" "),T={};return y=o(b),b[0].preventDefault&&(e.at="left top"),d=y.width,g=y.height,m=y.offset,v=t.extend({},m),t.each(["my","at"],function(){var t,i,n=(e[this]||"").split(" ");1===n.length&&(n=c.test(n[0])?n.concat(["center"]):h.test(n[0])?["center"].concat(n):["center","center"]),n[0]=c.test(n[0])?n[0]:"center",n[1]=h.test(n[1])?n[1]:"center",t=u.exec(n[0]),i=u.exec(n[1]),T[this]=[t?t[0]:0,i?i[0]:0],e[this]=[p.exec(n[0])[0],p.exec(n[1])[0]]}),1===E.length&&(E[1]=E[0]),"right"===e.at[0]?v.left+=d:"center"===e.at[0]&&(v.left+=d/2),"bottom"===e.at[1]?v.top+=g:"center"===e.at[1]&&(v.top+=g/2),r=i(T.at,d,g),v.left+=r[0],v.top+=r[1],this.each(function(){var o,c,h=t(this),u=h.outerWidth(),p=h.outerHeight(),f=n(this,"marginLeft"),y=n(this,"marginTop"),A=u+f+n(this,"marginRight")+C.width,w=p+y+n(this,"marginBottom")+C.height,D=t.extend({},v),x=i(T.my,h.outerWidth(),h.outerHeight());"right"===e.my[0]?D.left-=u:"center"===e.my[0]&&(D.left-=u/2),"bottom"===e.my[1]?D.top-=p:"center"===e.my[1]&&(D.top-=p/2),D.left+=x[0],D.top+=x[1],t.support.offsetFractions||(D.left=l(D.left),D.top=l(D.top)),o={marginLeft:f,marginTop:y},t.each(["left","top"],function(i,n){t.ui.position[E[i]]&&t.ui.position[E[i]][n](D,{targetWidth:d,targetHeight:g,elemWidth:u,elemHeight:p,collisionPosition:o,collisionWidth:A,collisionHeight:w,offset:[r[0]+x[0],r[1]+x[1]],my:e.my,at:e.at,within:_,elem:h})}),e.using&&(c=function(t){var i=m.left-D.left,n=i+d-u,o=m.top-D.top,r=o+g-p,l={target:{element:b,left:m.left,top:m.top,width:d,height:g},element:{element:h,left:D.left,top:D.top,width:u,height:p},horizontal:0>n?"left":i>0?"right":"center",vertical:0>r?"top":o>0?"bottom":"middle"};u>d&&d>a(i+n)&&(l.horizontal="center"),p>g&&g>a(o+r)&&(l.vertical="middle"),l.important=s(a(i),a(n))>s(a(o),a(r))?"horizontal":"vertical",e.using.call(this,t,l)}),h.offset(t.extend(D,{using:c}))})},t.ui.position={fit:{left:function(t,e){var i,n=e.within,o=n.isWindow?n.scrollLeft:n.offset.left,r=n.width,a=t.left-e.collisionPosition.marginLeft,l=o-a,c=a+e.collisionWidth-r-o;e.collisionWidth>r?l>0&&0>=c?(i=t.left+l+e.collisionWidth-r-o,t.left+=l-i):t.left=c>0&&0>=l?o:l>c?o+r-e.collisionWidth:o:l>0?t.left+=l:c>0?t.left-=c:t.left=s(t.left-a,t.left)},top:function(t,e){var i,n=e.within,o=n.isWindow?n.scrollTop:n.offset.top,r=e.within.height,a=t.top-e.collisionPosition.marginTop,l=o-a,c=a+e.collisionHeight-r-o;e.collisionHeight>r?l>0&&0>=c?(i=t.top+l+e.collisionHeight-r-o,t.top+=l-i):t.top=c>0&&0>=l?o:l>c?o+r-e.collisionHeight:o:l>0?t.top+=l:c>0?t.top-=c:t.top=s(t.top-a,t.top)}},flip:{left:function(t,e){var i,n,o=e.within,r=o.offset.left+o.scrollLeft,s=o.width,l=o.isWindow?o.scrollLeft:o.offset.left,c=t.left-e.collisionPosition.marginLeft,h=c-l,u=c+e.collisionWidth-s-l,p="left"===e.my[0]?-e.elemWidth:"right"===e.my[0]?e.elemWidth:0,d="left"===e.at[0]?e.targetWidth:"right"===e.at[0]?-e.targetWidth:0,f=-2*e.offset[0];0>h?(i=t.left+p+d+f+e.collisionWidth-s-r,(0>i||a(h)>i)&&(t.left+=p+d+f)):u>0&&(n=t.left-e.collisionPosition.marginLeft+p+d+f-l,(n>0||u>a(n))&&(t.left+=p+d+f))},top:function(t,e){var i,n,o=e.within,r=o.offset.top+o.scrollTop,s=o.height,l=o.isWindow?o.scrollTop:o.offset.top,c=t.top-e.collisionPosition.marginTop,h=c-l,u=c+e.collisionHeight-s-l,p="top"===e.my[1],d=p?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,f="top"===e.at[1]?e.targetHeight:"bottom"===e.at[1]?-e.targetHeight:0,g=-2*e.offset[1];0>h?(n=t.top+d+f+g+e.collisionHeight-s-r,t.top+d+f+g>h&&(0>n||a(h)>n)&&(t.top+=d+f+g)):u>0&&(i=t.top-e.collisionPosition.marginTop+d+f+g-l,t.top+d+f+g>u&&(i>0||u>a(i))&&(t.top+=d+f+g))}},flipfit:{left:function(){t.ui.position.flip.left.apply(this,arguments),t.ui.position.fit.left.apply(this,arguments)},top:function(){t.ui.position.flip.top.apply(this,arguments),t.ui.position.fit.top.apply(this,arguments)}}},function(){var e,i,n,o,r,s=document.getElementsByTagName("body")[0],a=document.createElement("div");e=document.createElement(s?"div":"body"),n={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},s&&t.extend(n,{position:"absolute",left:"-1000px",top:"-1000px"});for(r in n)e.style[r]=n[r];e.appendChild(a),i=s||document.documentElement,i.insertBefore(e,i.firstChild),a.style.cssText="position: absolute; left: 10.7432222px;",o=t(a).offset().left,t.support.offsetFractions=o>10&&11>o,e.innerHTML="",i.removeChild(e)}()}(jQuery),function(t){t.widget("ui.draggable",t.ui.mouse,{version:"1.10.3",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(e){var i=this.options;return this.helper||i.disabled||t(e.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(e),this.handle?(t(i.iframeFix===!0?"iframe":i.iframeFix).each(function(){t("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(t(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(e){var i=this.options;return this.helper=this._createHelper(e),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),t.ui.ddmanager&&(t.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offsetParent=this.helper.offsetParent(),this.offsetParentCssPosition=this.offsetParent.css("position"),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.offset.scroll=!1,t.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this._setContainment(),this._trigger("start",e)===!1?(this._clear(),!1):(this._cacheHelperProportions(),t.ui.ddmanager&&!i.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this._mouseDrag(e,!0),t.ui.ddmanager&&t.ui.ddmanager.dragStart(this,e),!0)},_mouseDrag:function(e,i){if("fixed"===this.offsetParentCssPosition&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),!i){var n=this._uiHash();if(this._trigger("drag",e,n)===!1)return this._mouseUp({}),!1;this.position=n.position}return this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),!1},_mouseStop:function(e){var i=this,n=!1;return t.ui.ddmanager&&!this.options.dropBehaviour&&(n=t.ui.ddmanager.drop(this,e)),this.dropped&&(n=this.dropped,this.dropped=!1),"original"!==this.options.helper||t.contains(this.element[0].ownerDocument,this.element[0])?("invalid"===this.options.revert&&!n||"valid"===this.options.revert&&n||this.options.revert===!0||t.isFunction(this.options.revert)&&this.options.revert.call(this.element,n)?t(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){i._trigger("stop",e)!==!1&&i._clear()}):this._trigger("stop",e)!==!1&&this._clear(),!1):!1},_mouseUp:function(e){return t("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),t.ui.ddmanager&&t.ui.ddmanager.dragStop(this,e),t.ui.mouse.prototype._mouseUp.call(this,e)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(e){return this.options.handle?!!t(e.target).closest(this.element.find(this.options.handle)).length:!0},_createHelper:function(e){var i=this.options,n=t.isFunction(i.helper)?t(i.helper.apply(this.element[0],[e])):"clone"===i.helper?this.element.clone().removeAttr("id"):this.element;return n.parents("body").length||n.appendTo("parent"===i.appendTo?this.element[0].parentNode:i.appendTo),n[0]===this.element[0]||/(fixed|absolute)/.test(n.css("position"))||n.css("position","absolute"),n},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){var e=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&t.ui.ie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var t=this.element.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,i,n,o=this.options;return o.containment?"window"===o.containment?(this.containment=[t(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,t(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,t(window).scrollLeft()+t(window).width()-this.helperProportions.width-this.margins.left,t(window).scrollTop()+(t(window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],void 0):"document"===o.containment?(this.containment=[0,0,t(document).width()-this.helperProportions.width-this.margins.left,(t(document).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],void 0):o.containment.constructor===Array?(this.containment=o.containment,void 0):("parent"===o.containment&&(o.containment=this.helper[0].parentNode),i=t(o.containment),n=i[0],n&&(e="hidden"!==i.css("overflow"),this.containment=[(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("paddingLeft"),10)||0),(parseInt(i.css("borderTopWidth"),10)||0)+(parseInt(i.css("paddingTop"),10)||0),(e?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(i.css("borderRightWidth"),10)||0)-(parseInt(i.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(i.css("borderBottomWidth"),10)||0)-(parseInt(i.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=i),void 0):(this.containment=null,void 0)},_convertPositionTo:function(e,i){i||(i=this.position);var n="absolute"===e?1:-1,o="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent;return this.offset.scroll||(this.offset.scroll={top:o.scrollTop(),left:o.scrollLeft()}),{top:i.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top)*n,left:i.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)*n}},_generatePosition:function(e){var i,n,o,r,s=this.options,a="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=e.pageX,c=e.pageY;return this.offset.scroll||(this.offset.scroll={top:a.scrollTop(),left:a.scrollLeft()}),this.originalPosition&&(this.containment&&(this.relative_container?(n=this.relative_container.offset(),i=[this.containment[0]+n.left,this.containment[1]+n.top,this.containment[2]+n.left,this.containment[3]+n.top]):i=this.containment,e.pageX-this.offset.click.left<i[0]&&(l=i[0]+this.offset.click.left),e.pageY-this.offset.click.top<i[1]&&(c=i[1]+this.offset.click.top),e.pageX-this.offset.click.left>i[2]&&(l=i[2]+this.offset.click.left),e.pageY-this.offset.click.top>i[3]&&(c=i[3]+this.offset.click.top)),s.grid&&(o=s.grid[1]?this.originalPageY+Math.round((c-this.originalPageY)/s.grid[1])*s.grid[1]:this.originalPageY,c=i?o-this.offset.click.top>=i[1]||o-this.offset.click.top>i[3]?o:o-this.offset.click.top>=i[1]?o-s.grid[1]:o+s.grid[1]:o,r=s.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/s.grid[0])*s.grid[0]:this.originalPageX,l=i?r-this.offset.click.left>=i[0]||r-this.offset.click.left>i[2]?r:r-this.offset.click.left>=i[0]?r-s.grid[0]:r+s.grid[0]:r)),{top:c-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(e,i,n){return n=n||this._uiHash(),t.ui.plugin.call(this,e,[i,n]),"drag"===e&&(this.positionAbs=this._convertPositionTo("absolute")),t.Widget.prototype._trigger.call(this,e,i,n)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),t.ui.plugin.add("draggable","connectToSortable",{start:function(e,i){var n=t(this).data("ui-draggable"),o=n.options,r=t.extend({},i,{item:n.element});n.sortables=[],t(o.connectToSortable).each(function(){var i=t.data(this,"ui-sortable");i&&!i.options.disabled&&(n.sortables.push({instance:i,shouldRevert:i.options.revert}),i.refreshPositions(),i._trigger("activate",e,r))})},stop:function(e,i){var n=t(this).data("ui-draggable"),o=t.extend({},i,{item:n.element});t.each(n.sortables,function(){this.instance.isOver?(this.instance.isOver=0,n.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(e),this.instance.options.helper=this.instance.options._helper,"original"===n.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",e,o))})},drag:function(e,i){var n=t(this).data("ui-draggable"),o=this;t.each(n.sortables,function(){var r=!1,s=this;this.instance.positionAbs=n.positionAbs,this.instance.helperProportions=n.helperProportions,this.instance.offset.click=n.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(r=!0,t.each(n.sortables,function(){return this.instance.positionAbs=n.positionAbs,this.instance.helperProportions=n.helperProportions,this.instance.offset.click=n.offset.click,this!==s&&this.instance._intersectsWith(this.instance.containerCache)&&t.contains(s.instance.element[0],this.instance.element[0])&&(r=!1),r})),r?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=t(o).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return i.helper[0]},e.target=this.instance.currentItem[0],this.instance._mouseCapture(e,!0),this.instance._mouseStart(e,!0,!0),this.instance.offset.click.top=n.offset.click.top,this.instance.offset.click.left=n.offset.click.left,this.instance.offset.parent.left-=n.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=n.offset.parent.top-this.instance.offset.parent.top,n._trigger("toSortable",e),n.dropped=this.instance.element,n.currentItem=n.element,this.instance.fromOutside=n),this.instance.currentItem&&this.instance._mouseDrag(e)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",e,this.instance._uiHash(this.instance)),this.instance._mouseStop(e,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),n._trigger("fromSortable",e),n.dropped=!1)})}}),t.ui.plugin.add("draggable","cursor",{start:function(){var e=t("body"),i=t(this).data("ui-draggable").options;e.css("cursor")&&(i._cursor=e.css("cursor")),e.css("cursor",i.cursor)},stop:function(){var e=t(this).data("ui-draggable").options;e._cursor&&t("body").css("cursor",e._cursor)}}),t.ui.plugin.add("draggable","opacity",{start:function(e,i){var n=t(i.helper),o=t(this).data("ui-draggable").options;n.css("opacity")&&(o._opacity=n.css("opacity")),n.css("opacity",o.opacity)},stop:function(e,i){var n=t(this).data("ui-draggable").options;n._opacity&&t(i.helper).css("opacity",n._opacity)}}),t.ui.plugin.add("draggable","scroll",{start:function(){var e=t(this).data("ui-draggable");
e.scrollParent[0]!==document&&"HTML"!==e.scrollParent[0].tagName&&(e.overflowOffset=e.scrollParent.offset())},drag:function(e){var i=t(this).data("ui-draggable"),n=i.options,o=!1;i.scrollParent[0]!==document&&"HTML"!==i.scrollParent[0].tagName?(n.axis&&"x"===n.axis||(i.overflowOffset.top+i.scrollParent[0].offsetHeight-e.pageY<n.scrollSensitivity?i.scrollParent[0].scrollTop=o=i.scrollParent[0].scrollTop+n.scrollSpeed:e.pageY-i.overflowOffset.top<n.scrollSensitivity&&(i.scrollParent[0].scrollTop=o=i.scrollParent[0].scrollTop-n.scrollSpeed)),n.axis&&"y"===n.axis||(i.overflowOffset.left+i.scrollParent[0].offsetWidth-e.pageX<n.scrollSensitivity?i.scrollParent[0].scrollLeft=o=i.scrollParent[0].scrollLeft+n.scrollSpeed:e.pageX-i.overflowOffset.left<n.scrollSensitivity&&(i.scrollParent[0].scrollLeft=o=i.scrollParent[0].scrollLeft-n.scrollSpeed))):(n.axis&&"x"===n.axis||(e.pageY-t(document).scrollTop()<n.scrollSensitivity?o=t(document).scrollTop(t(document).scrollTop()-n.scrollSpeed):t(window).height()-(e.pageY-t(document).scrollTop())<n.scrollSensitivity&&(o=t(document).scrollTop(t(document).scrollTop()+n.scrollSpeed))),n.axis&&"y"===n.axis||(e.pageX-t(document).scrollLeft()<n.scrollSensitivity?o=t(document).scrollLeft(t(document).scrollLeft()-n.scrollSpeed):t(window).width()-(e.pageX-t(document).scrollLeft())<n.scrollSensitivity&&(o=t(document).scrollLeft(t(document).scrollLeft()+n.scrollSpeed)))),o!==!1&&t.ui.ddmanager&&!n.dropBehaviour&&t.ui.ddmanager.prepareOffsets(i,e)}}),t.ui.plugin.add("draggable","snap",{start:function(){var e=t(this).data("ui-draggable"),i=e.options;e.snapElements=[],t(i.snap.constructor!==String?i.snap.items||":data(ui-draggable)":i.snap).each(function(){var i=t(this),n=i.offset();this!==e.element[0]&&e.snapElements.push({item:this,width:i.outerWidth(),height:i.outerHeight(),top:n.top,left:n.left})})},drag:function(e,i){var n,o,r,s,a,l,c,h,u,p,d=t(this).data("ui-draggable"),f=d.options,g=f.snapTolerance,m=i.offset.left,v=m+d.helperProportions.width,y=i.offset.top,b=y+d.helperProportions.height;for(u=d.snapElements.length-1;u>=0;u--)a=d.snapElements[u].left,l=a+d.snapElements[u].width,c=d.snapElements[u].top,h=c+d.snapElements[u].height,a-g>v||m>l+g||c-g>b||y>h+g||!t.contains(d.snapElements[u].item.ownerDocument,d.snapElements[u].item)?(d.snapElements[u].snapping&&d.options.snap.release&&d.options.snap.release.call(d.element,e,t.extend(d._uiHash(),{snapItem:d.snapElements[u].item})),d.snapElements[u].snapping=!1):("inner"!==f.snapMode&&(n=g>=Math.abs(c-b),o=g>=Math.abs(h-y),r=g>=Math.abs(a-v),s=g>=Math.abs(l-m),n&&(i.position.top=d._convertPositionTo("relative",{top:c-d.helperProportions.height,left:0}).top-d.margins.top),o&&(i.position.top=d._convertPositionTo("relative",{top:h,left:0}).top-d.margins.top),r&&(i.position.left=d._convertPositionTo("relative",{top:0,left:a-d.helperProportions.width}).left-d.margins.left),s&&(i.position.left=d._convertPositionTo("relative",{top:0,left:l}).left-d.margins.left)),p=n||o||r||s,"outer"!==f.snapMode&&(n=g>=Math.abs(c-y),o=g>=Math.abs(h-b),r=g>=Math.abs(a-m),s=g>=Math.abs(l-v),n&&(i.position.top=d._convertPositionTo("relative",{top:c,left:0}).top-d.margins.top),o&&(i.position.top=d._convertPositionTo("relative",{top:h-d.helperProportions.height,left:0}).top-d.margins.top),r&&(i.position.left=d._convertPositionTo("relative",{top:0,left:a}).left-d.margins.left),s&&(i.position.left=d._convertPositionTo("relative",{top:0,left:l-d.helperProportions.width}).left-d.margins.left)),!d.snapElements[u].snapping&&(n||o||r||s||p)&&d.options.snap.snap&&d.options.snap.snap.call(d.element,e,t.extend(d._uiHash(),{snapItem:d.snapElements[u].item})),d.snapElements[u].snapping=n||o||r||s||p)}}),t.ui.plugin.add("draggable","stack",{start:function(){var e,i=this.data("ui-draggable").options,n=t.makeArray(t(i.stack)).sort(function(e,i){return(parseInt(t(e).css("zIndex"),10)||0)-(parseInt(t(i).css("zIndex"),10)||0)});n.length&&(e=parseInt(t(n[0]).css("zIndex"),10)||0,t(n).each(function(i){t(this).css("zIndex",e+i)}),this.css("zIndex",e+n.length))}}),t.ui.plugin.add("draggable","zIndex",{start:function(e,i){var n=t(i.helper),o=t(this).data("ui-draggable").options;n.css("zIndex")&&(o._zIndex=n.css("zIndex")),n.css("zIndex",o.zIndex)},stop:function(e,i){var n=t(this).data("ui-draggable").options;n._zIndex&&t(i.helper).css("zIndex",n._zIndex)}})}(jQuery),function(t){function e(t,e,i){return t>e&&e+i>t}t.widget("ui.droppable",{version:"1.10.3",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var e=this.options,i=e.accept;this.isover=!1,this.isout=!0,this.accept=t.isFunction(i)?i:function(t){return t.is(i)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},t.ui.ddmanager.droppables[e.scope]=t.ui.ddmanager.droppables[e.scope]||[],t.ui.ddmanager.droppables[e.scope].push(this),e.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){for(var e=0,i=t.ui.ddmanager.droppables[this.options.scope];i.length>e;e++)i[e]===this&&i.splice(e,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(e,i){"accept"===e&&(this.accept=t.isFunction(i)?i:function(t){return t.is(i)}),t.Widget.prototype._setOption.apply(this,arguments)},_activate:function(e){var i=t.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),i&&this._trigger("activate",e,this.ui(i))},_deactivate:function(e){var i=t.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),i&&this._trigger("deactivate",e,this.ui(i))},_over:function(e){var i=t.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",e,this.ui(i)))},_out:function(e){var i=t.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",e,this.ui(i)))},_drop:function(e,i){var n=i||t.ui.ddmanager.current,o=!1;return n&&(n.currentItem||n.element)[0]!==this.element[0]?(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var e=t.data(this,"ui-droppable");return e.options.greedy&&!e.options.disabled&&e.options.scope===n.options.scope&&e.accept.call(e.element[0],n.currentItem||n.element)&&t.ui.intersect(n,t.extend(e,{offset:e.element.offset()}),e.options.tolerance)?(o=!0,!1):void 0}),o?!1:this.accept.call(this.element[0],n.currentItem||n.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",e,this.ui(n)),this.element):!1):!1},ui:function(t){return{draggable:t.currentItem||t.element,helper:t.helper,position:t.position,offset:t.positionAbs}}}),t.ui.intersect=function(t,i,n){if(!i.offset)return!1;var o,r,s=(t.positionAbs||t.position.absolute).left,a=s+t.helperProportions.width,l=(t.positionAbs||t.position.absolute).top,c=l+t.helperProportions.height,h=i.offset.left,u=h+i.proportions.width,p=i.offset.top,d=p+i.proportions.height;switch(n){case"fit":return s>=h&&u>=a&&l>=p&&d>=c;case"intersect":return s+t.helperProportions.width/2>h&&u>a-t.helperProportions.width/2&&l+t.helperProportions.height/2>p&&d>c-t.helperProportions.height/2;case"pointer":return o=(t.positionAbs||t.position.absolute).left+(t.clickOffset||t.offset.click).left,r=(t.positionAbs||t.position.absolute).top+(t.clickOffset||t.offset.click).top,e(r,p,i.proportions.height)&&e(o,h,i.proportions.width);case"touch":return(l>=p&&d>=l||c>=p&&d>=c||p>l&&c>d)&&(s>=h&&u>=s||a>=h&&u>=a||h>s&&a>u);default:return!1}},t.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(e,i){var n,o,r=t.ui.ddmanager.droppables[e.options.scope]||[],s=i?i.type:null,a=(e.currentItem||e.element).find(":data(ui-droppable)").addBack();t:for(n=0;r.length>n;n++)if(!(r[n].options.disabled||e&&!r[n].accept.call(r[n].element[0],e.currentItem||e.element))){for(o=0;a.length>o;o++)if(a[o]===r[n].element[0]){r[n].proportions.height=0;continue t}r[n].visible="none"!==r[n].element.css("display"),r[n].visible&&("mousedown"===s&&r[n]._activate.call(r[n],i),r[n].offset=r[n].element.offset(),r[n].proportions={width:r[n].element[0].offsetWidth,height:r[n].element[0].offsetHeight})}},drop:function(e,i){var n=!1;return t.each((t.ui.ddmanager.droppables[e.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&t.ui.intersect(e,this,this.options.tolerance)&&(n=this._drop.call(this,i)||n),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],e.currentItem||e.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,i)))}),n},dragStart:function(e,i){e.element.parentsUntil("body").bind("scroll.droppable",function(){e.options.refreshPositions||t.ui.ddmanager.prepareOffsets(e,i)})},drag:function(e,i){e.options.refreshPositions&&t.ui.ddmanager.prepareOffsets(e,i),t.each(t.ui.ddmanager.droppables[e.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var n,o,r,s=t.ui.intersect(e,this,this.options.tolerance),a=!s&&this.isover?"isout":s&&!this.isover?"isover":null;a&&(this.options.greedy&&(o=this.options.scope,r=this.element.parents(":data(ui-droppable)").filter(function(){return t.data(this,"ui-droppable").options.scope===o}),r.length&&(n=t.data(r[0],"ui-droppable"),n.greedyChild="isover"===a)),n&&"isover"===a&&(n.isover=!1,n.isout=!0,n._out.call(n,i)),this[a]=!0,this["isout"===a?"isover":"isout"]=!1,this["isover"===a?"_over":"_out"].call(this,i),n&&"isout"===a&&(n.isout=!1,n.isover=!0,n._over.call(n,i)))}})},dragStop:function(e,i){e.element.parentsUntil("body").unbind("scroll.droppable"),e.options.refreshPositions||t.ui.ddmanager.prepareOffsets(e,i)}}}(jQuery),function(t){function e(t){return parseInt(t,10)||0}function i(t){return!isNaN(parseInt(t,10))}t.widget("ui.resizable",t.ui.mouse,{version:"1.10.3",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var e,i,n,o,r,s=this,a=this.options;if(this.element.addClass("ui-resizable"),t.extend(this,{_aspectRatio:!!a.aspectRatio,aspectRatio:a.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:a.helper||a.ghost||a.animate?a.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(t("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=a.handles||(t(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),e=this.handles.split(","),this.handles={},i=0;e.length>i;i++)n=t.trim(e[i]),r="ui-resizable-"+n,o=t("<div class='ui-resizable-handle "+r+"'></div>"),o.css({zIndex:a.zIndex}),"se"===n&&o.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[n]=".ui-resizable-"+n,this.element.append(o);this._renderAxis=function(e){var i,n,o,r;e=e||this.element;for(i in this.handles)this.handles[i].constructor===String&&(this.handles[i]=t(this.handles[i],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(n=t(this.handles[i],this.element),r=/sw|ne|nw|se|n|s/.test(i)?n.outerHeight():n.outerWidth(),o=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join(""),e.css(o,r),this._proportionallyResize()),t(this.handles[i]).length},this._renderAxis(this.element),this._handles=t(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){s.resizing||(this.className&&(o=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),s.axis=o&&o[1]?o[1]:"se")}),a.autoHide&&(this._handles.hide(),t(this.element).addClass("ui-resizable-autohide").mouseenter(function(){a.disabled||(t(this).removeClass("ui-resizable-autohide"),s._handles.show())}).mouseleave(function(){a.disabled||s.resizing||(t(this).addClass("ui-resizable-autohide"),s._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var e,i=function(e){t(e).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(i(this.element),e=this.element,this.originalElement.css({position:e.css("position"),width:e.outerWidth(),height:e.outerHeight(),top:e.css("top"),left:e.css("left")}).insertAfter(e),e.remove()),this.originalElement.css("resize",this.originalResizeStyle),i(this.originalElement),this},_mouseCapture:function(e){var i,n,o=!1;for(i in this.handles)n=t(this.handles[i])[0],(n===e.target||t.contains(n,e.target))&&(o=!0);return!this.options.disabled&&o},_mouseStart:function(i){var n,o,r,s=this.options,a=this.element.position(),l=this.element;return this.resizing=!0,/absolute/.test(l.css("position"))?l.css({position:"absolute",top:l.css("top"),left:l.css("left")}):l.is(".ui-draggable")&&l.css({position:"absolute",top:a.top,left:a.left}),this._renderProxy(),n=e(this.helper.css("left")),o=e(this.helper.css("top")),s.containment&&(n+=t(s.containment).scrollLeft()||0,o+=t(s.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:n,top:o},this.size=this._helper?{width:l.outerWidth(),height:l.outerHeight()}:{width:l.width(),height:l.height()},this.originalSize=this._helper?{width:l.outerWidth(),height:l.outerHeight()}:{width:l.width(),height:l.height()},this.originalPosition={left:n,top:o},this.sizeDiff={width:l.outerWidth()-l.width(),height:l.outerHeight()-l.height()},this.originalMousePosition={left:i.pageX,top:i.pageY},this.aspectRatio="number"==typeof s.aspectRatio?s.aspectRatio:this.originalSize.width/this.originalSize.height||1,r=t(".ui-resizable-"+this.axis).css("cursor"),t("body").css("cursor","auto"===r?this.axis+"-resize":r),l.addClass("ui-resizable-resizing"),this._propagate("start",i),!0},_mouseDrag:function(e){var i,n=this.helper,o={},r=this.originalMousePosition,s=this.axis,a=this.position.top,l=this.position.left,c=this.size.width,h=this.size.height,u=e.pageX-r.left||0,p=e.pageY-r.top||0,d=this._change[s];return d?(i=d.apply(this,[e,u,p]),this._updateVirtualBoundaries(e.shiftKey),(this._aspectRatio||e.shiftKey)&&(i=this._updateRatio(i,e)),i=this._respectSize(i,e),this._updateCache(i),this._propagate("resize",e),this.position.top!==a&&(o.top=this.position.top+"px"),this.position.left!==l&&(o.left=this.position.left+"px"),this.size.width!==c&&(o.width=this.size.width+"px"),this.size.height!==h&&(o.height=this.size.height+"px"),n.css(o),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),t.isEmptyObject(o)||this._trigger("resize",e,this.ui()),!1):!1},_mouseStop:function(e){this.resizing=!1;var i,n,o,r,s,a,l,c=this.options,h=this;return this._helper&&(i=this._proportionallyResizeElements,n=i.length&&/textarea/i.test(i[0].nodeName),o=n&&t.ui.hasScroll(i[0],"left")?0:h.sizeDiff.height,r=n?0:h.sizeDiff.width,s={width:h.helper.width()-r,height:h.helper.height()-o},a=parseInt(h.element.css("left"),10)+(h.position.left-h.originalPosition.left)||null,l=parseInt(h.element.css("top"),10)+(h.position.top-h.originalPosition.top)||null,c.animate||this.element.css(t.extend(s,{top:l,left:a})),h.helper.height(h.size.height),h.helper.width(h.size.width),this._helper&&!c.animate&&this._proportionallyResize()),t("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",e),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(t){var e,n,o,r,s,a=this.options;s={minWidth:i(a.minWidth)?a.minWidth:0,maxWidth:i(a.maxWidth)?a.maxWidth:1/0,minHeight:i(a.minHeight)?a.minHeight:0,maxHeight:i(a.maxHeight)?a.maxHeight:1/0},(this._aspectRatio||t)&&(e=s.minHeight*this.aspectRatio,o=s.minWidth/this.aspectRatio,n=s.maxHeight*this.aspectRatio,r=s.maxWidth/this.aspectRatio,e>s.minWidth&&(s.minWidth=e),o>s.minHeight&&(s.minHeight=o),s.maxWidth>n&&(s.maxWidth=n),s.maxHeight>r&&(s.maxHeight=r)),this._vBoundaries=s},_updateCache:function(t){this.offset=this.helper.offset(),i(t.left)&&(this.position.left=t.left),i(t.top)&&(this.position.top=t.top),i(t.height)&&(this.size.height=t.height),i(t.width)&&(this.size.width=t.width)},_updateRatio:function(t){var e=this.position,n=this.size,o=this.axis;return i(t.height)?t.width=t.height*this.aspectRatio:i(t.width)&&(t.height=t.width/this.aspectRatio),"sw"===o&&(t.left=e.left+(n.width-t.width),t.top=null),"nw"===o&&(t.top=e.top+(n.height-t.height),t.left=e.left+(n.width-t.width)),t},_respectSize:function(t){var e=this._vBoundaries,n=this.axis,o=i(t.width)&&e.maxWidth&&e.maxWidth<t.width,r=i(t.height)&&e.maxHeight&&e.maxHeight<t.height,s=i(t.width)&&e.minWidth&&e.minWidth>t.width,a=i(t.height)&&e.minHeight&&e.minHeight>t.height,l=this.originalPosition.left+this.originalSize.width,c=this.position.top+this.size.height,h=/sw|nw|w/.test(n),u=/nw|ne|n/.test(n);return s&&(t.width=e.minWidth),a&&(t.height=e.minHeight),o&&(t.width=e.maxWidth),r&&(t.height=e.maxHeight),s&&h&&(t.left=l-e.minWidth),o&&h&&(t.left=l-e.maxWidth),a&&u&&(t.top=c-e.minHeight),r&&u&&(t.top=c-e.maxHeight),t.width||t.height||t.left||!t.top?t.width||t.height||t.top||!t.left||(t.left=null):t.top=null,t},_proportionallyResize:function(){if(this._proportionallyResizeElements.length){var t,e,i,n,o,r=this.helper||this.element;for(t=0;this._proportionallyResizeElements.length>t;t++){if(o=this._proportionallyResizeElements[t],!this.borderDif)for(this.borderDif=[],i=[o.css("borderTopWidth"),o.css("borderRightWidth"),o.css("borderBottomWidth"),o.css("borderLeftWidth")],n=[o.css("paddingTop"),o.css("paddingRight"),o.css("paddingBottom"),o.css("paddingLeft")],e=0;i.length>e;e++)this.borderDif[e]=(parseInt(i[e],10)||0)+(parseInt(n[e],10)||0);o.css({height:r.height()-this.borderDif[0]-this.borderDif[2]||0,width:r.width()-this.borderDif[1]-this.borderDif[3]||0})}}},_renderProxy:function(){var e=this.element,i=this.options;this.elementOffset=e.offset(),this._helper?(this.helper=this.helper||t("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(t,e){return{width:this.originalSize.width+e}},w:function(t,e){var i=this.originalSize,n=this.originalPosition;return{left:n.left+e,width:i.width-e}},n:function(t,e,i){var n=this.originalSize,o=this.originalPosition;return{top:o.top+i,height:n.height-i}},s:function(t,e,i){return{height:this.originalSize.height+i}},se:function(e,i,n){return t.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[e,i,n]))},sw:function(e,i,n){return t.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[e,i,n]))},ne:function(e,i,n){return t.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[e,i,n]))},nw:function(e,i,n){return t.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[e,i,n]))}},_propagate:function(e,i){t.ui.plugin.call(this,e,[i,this.ui()]),"resize"!==e&&this._trigger(e,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),t.ui.plugin.add("resizable","animate",{stop:function(e){var i=t(this).data("ui-resizable"),n=i.options,o=i._proportionallyResizeElements,r=o.length&&/textarea/i.test(o[0].nodeName),s=r&&t.ui.hasScroll(o[0],"left")?0:i.sizeDiff.height,a=r?0:i.sizeDiff.width,l={width:i.size.width-a,height:i.size.height-s},c=parseInt(i.element.css("left"),10)+(i.position.left-i.originalPosition.left)||null,h=parseInt(i.element.css("top"),10)+(i.position.top-i.originalPosition.top)||null;i.element.animate(t.extend(l,h&&c?{top:h,left:c}:{}),{duration:n.animateDuration,easing:n.animateEasing,step:function(){var n={width:parseInt(i.element.css("width"),10),height:parseInt(i.element.css("height"),10),top:parseInt(i.element.css("top"),10),left:parseInt(i.element.css("left"),10)};o&&o.length&&t(o[0]).css({width:n.width,height:n.height}),i._updateCache(n),i._propagate("resize",e)}})}}),t.ui.plugin.add("resizable","containment",{start:function(){var i,n,o,r,s,a,l,c=t(this).data("ui-resizable"),h=c.options,u=c.element,p=h.containment,d=p instanceof t?p.get(0):/parent/.test(p)?u.parent().get(0):p;d&&(c.containerElement=t(d),/document/.test(p)||p===document?(c.containerOffset={left:0,top:0},c.containerPosition={left:0,top:0},c.parentData={element:t(document),left:0,top:0,width:t(document).width(),height:t(document).height()||document.body.parentNode.scrollHeight}):(i=t(d),n=[],t(["Top","Right","Left","Bottom"]).each(function(t,o){n[t]=e(i.css("padding"+o))}),c.containerOffset=i.offset(),c.containerPosition=i.position(),c.containerSize={height:i.innerHeight()-n[3],width:i.innerWidth()-n[1]},o=c.containerOffset,r=c.containerSize.height,s=c.containerSize.width,a=t.ui.hasScroll(d,"left")?d.scrollWidth:s,l=t.ui.hasScroll(d)?d.scrollHeight:r,c.parentData={element:d,left:o.left,top:o.top,width:a,height:l}))},resize:function(e){var i,n,o,r,s=t(this).data("ui-resizable"),a=s.options,l=s.containerOffset,c=s.position,h=s._aspectRatio||e.shiftKey,u={top:0,left:0},p=s.containerElement;p[0]!==document&&/static/.test(p.css("position"))&&(u=l),c.left<(s._helper?l.left:0)&&(s.size.width=s.size.width+(s._helper?s.position.left-l.left:s.position.left-u.left),h&&(s.size.height=s.size.width/s.aspectRatio),s.position.left=a.helper?l.left:0),c.top<(s._helper?l.top:0)&&(s.size.height=s.size.height+(s._helper?s.position.top-l.top:s.position.top),h&&(s.size.width=s.size.height*s.aspectRatio),s.position.top=s._helper?l.top:0),s.offset.left=s.parentData.left+s.position.left,s.offset.top=s.parentData.top+s.position.top,i=Math.abs((s._helper?s.offset.left-u.left:s.offset.left-u.left)+s.sizeDiff.width),n=Math.abs((s._helper?s.offset.top-u.top:s.offset.top-l.top)+s.sizeDiff.height),o=s.containerElement.get(0)===s.element.parent().get(0),r=/relative|absolute/.test(s.containerElement.css("position")),o&&r&&(i-=s.parentData.left),i+s.size.width>=s.parentData.width&&(s.size.width=s.parentData.width-i,h&&(s.size.height=s.size.width/s.aspectRatio)),n+s.size.height>=s.parentData.height&&(s.size.height=s.parentData.height-n,h&&(s.size.width=s.size.height*s.aspectRatio))},stop:function(){var e=t(this).data("ui-resizable"),i=e.options,n=e.containerOffset,o=e.containerPosition,r=e.containerElement,s=t(e.helper),a=s.offset(),l=s.outerWidth()-e.sizeDiff.width,c=s.outerHeight()-e.sizeDiff.height;e._helper&&!i.animate&&/relative/.test(r.css("position"))&&t(this).css({left:a.left-o.left-n.left,width:l,height:c}),e._helper&&!i.animate&&/static/.test(r.css("position"))&&t(this).css({left:a.left-o.left-n.left,width:l,height:c})}}),t.ui.plugin.add("resizable","alsoResize",{start:function(){var e=t(this).data("ui-resizable"),i=e.options,n=function(e){t(e).each(function(){var e=t(this);e.data("ui-resizable-alsoresize",{width:parseInt(e.width(),10),height:parseInt(e.height(),10),left:parseInt(e.css("left"),10),top:parseInt(e.css("top"),10)})})};"object"!=typeof i.alsoResize||i.alsoResize.parentNode?n(i.alsoResize):i.alsoResize.length?(i.alsoResize=i.alsoResize[0],n(i.alsoResize)):t.each(i.alsoResize,function(t){n(t)})},resize:function(e,i){var n=t(this).data("ui-resizable"),o=n.options,r=n.originalSize,s=n.originalPosition,a={height:n.size.height-r.height||0,width:n.size.width-r.width||0,top:n.position.top-s.top||0,left:n.position.left-s.left||0},l=function(e,n){t(e).each(function(){var e=t(this),o=t(this).data("ui-resizable-alsoresize"),r={},s=n&&n.length?n:e.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];t.each(s,function(t,e){var i=(o[e]||0)+(a[e]||0);i&&i>=0&&(r[e]=i||null)}),e.css(r)})};"object"!=typeof o.alsoResize||o.alsoResize.nodeType?l(o.alsoResize):t.each(o.alsoResize,function(t,e){l(t,e)})},stop:function(){t(this).removeData("resizable-alsoresize")}}),t.ui.plugin.add("resizable","ghost",{start:function(){var e=t(this).data("ui-resizable"),i=e.options,n=e.size;e.ghost=e.originalElement.clone(),e.ghost.css({opacity:.25,display:"block",position:"relative",height:n.height,width:n.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof i.ghost?i.ghost:""),e.ghost.appendTo(e.helper)},resize:function(){var e=t(this).data("ui-resizable");e.ghost&&e.ghost.css({position:"relative",height:e.size.height,width:e.size.width})},stop:function(){var e=t(this).data("ui-resizable");e.ghost&&e.helper&&e.helper.get(0).removeChild(e.ghost.get(0))}}),t.ui.plugin.add("resizable","grid",{resize:function(){var e=t(this).data("ui-resizable"),i=e.options,n=e.size,o=e.originalSize,r=e.originalPosition,s=e.axis,a="number"==typeof i.grid?[i.grid,i.grid]:i.grid,l=a[0]||1,c=a[1]||1,h=Math.round((n.width-o.width)/l)*l,u=Math.round((n.height-o.height)/c)*c,p=o.width+h,d=o.height+u,f=i.maxWidth&&p>i.maxWidth,g=i.maxHeight&&d>i.maxHeight,m=i.minWidth&&i.minWidth>p,v=i.minHeight&&i.minHeight>d;i.grid=a,m&&(p+=l),v&&(d+=c),f&&(p-=l),g&&(d-=c),/^(se|s|e)$/.test(s)?(e.size.width=p,e.size.height=d):/^(ne)$/.test(s)?(e.size.width=p,e.size.height=d,e.position.top=r.top-u):/^(sw)$/.test(s)?(e.size.width=p,e.size.height=d,e.position.left=r.left-h):(e.size.width=p,e.size.height=d,e.position.top=r.top-u,e.position.left=r.left-h)}})}(jQuery),function(t){t.widget("ui.selectable",t.ui.mouse,{version:"1.10.3",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var e,i=this;this.element.addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){e=t(i.options.filter,i.element[0]),e.addClass("ui-selectee"),e.each(function(){var e=t(this),i=e.offset();t.data(this,"selectable-item",{element:this,$element:e,left:i.left,top:i.top,right:i.left+e.outerWidth(),bottom:i.top+e.outerHeight(),startselected:!1,selected:e.hasClass("ui-selected"),selecting:e.hasClass("ui-selecting"),unselecting:e.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=e.addClass("ui-selectee"),this._mouseInit(),this.helper=t("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(e){var i=this,n=this.options;this.opos=[e.pageX,e.pageY],this.options.disabled||(this.selectees=t(n.filter,this.element[0]),this._trigger("start",e),t(n.appendTo).append(this.helper),this.helper.css({left:e.pageX,top:e.pageY,width:0,height:0}),n.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var n=t.data(this,"selectable-item");n.startselected=!0,e.metaKey||e.ctrlKey||(n.$element.removeClass("ui-selected"),n.selected=!1,n.$element.addClass("ui-unselecting"),n.unselecting=!0,i._trigger("unselecting",e,{unselecting:n.element}))}),t(e.target).parents().addBack().each(function(){var n,o=t.data(this,"selectable-item");return o?(n=!e.metaKey&&!e.ctrlKey||!o.$element.hasClass("ui-selected"),o.$element.removeClass(n?"ui-unselecting":"ui-selected").addClass(n?"ui-selecting":"ui-unselecting"),o.unselecting=!n,o.selecting=n,o.selected=n,n?i._trigger("selecting",e,{selecting:o.element}):i._trigger("unselecting",e,{unselecting:o.element}),!1):void 0}))},_mouseDrag:function(e){if(this.dragged=!0,!this.options.disabled){var i,n=this,o=this.options,r=this.opos[0],s=this.opos[1],a=e.pageX,l=e.pageY;return r>a&&(i=a,a=r,r=i),s>l&&(i=l,l=s,s=i),this.helper.css({left:r,top:s,width:a-r,height:l-s}),this.selectees.each(function(){var i=t.data(this,"selectable-item"),c=!1;i&&i.element!==n.element[0]&&("touch"===o.tolerance?c=!(i.left>a||r>i.right||i.top>l||s>i.bottom):"fit"===o.tolerance&&(c=i.left>r&&a>i.right&&i.top>s&&l>i.bottom),c?(i.selected&&(i.$element.removeClass("ui-selected"),i.selected=!1),i.unselecting&&(i.$element.removeClass("ui-unselecting"),i.unselecting=!1),i.selecting||(i.$element.addClass("ui-selecting"),i.selecting=!0,n._trigger("selecting",e,{selecting:i.element}))):(i.selecting&&((e.metaKey||e.ctrlKey)&&i.startselected?(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.$element.addClass("ui-selected"),i.selected=!0):(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.startselected&&(i.$element.addClass("ui-unselecting"),i.unselecting=!0),n._trigger("unselecting",e,{unselecting:i.element}))),i.selected&&(e.metaKey||e.ctrlKey||i.startselected||(i.$element.removeClass("ui-selected"),i.selected=!1,i.$element.addClass("ui-unselecting"),i.unselecting=!0,n._trigger("unselecting",e,{unselecting:i.element})))))}),!1}},_mouseStop:function(e){var i=this;return this.dragged=!1,t(".ui-unselecting",this.element[0]).each(function(){var n=t.data(this,"selectable-item");n.$element.removeClass("ui-unselecting"),n.unselecting=!1,n.startselected=!1,i._trigger("unselected",e,{unselected:n.element})}),t(".ui-selecting",this.element[0]).each(function(){var n=t.data(this,"selectable-item");n.$element.removeClass("ui-selecting").addClass("ui-selected"),n.selecting=!1,n.selected=!0,n.startselected=!0,i._trigger("selected",e,{selected:n.element})}),this._trigger("stop",e),this.helper.remove(),!1}})}(jQuery),function(t){function e(t,e,i){return t>e&&e+i>t}function i(t){return/left|right/.test(t.css("float"))||/inline|table-cell/.test(t.css("display"))}t.widget("ui.sortable",t.ui.mouse,{version:"1.10.3",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var t=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?"x"===t.axis||i(this.items[0].item):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0
},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var t=this.items.length-1;t>=0;t--)this.items[t].item.removeData(this.widgetName+"-item");return this},_setOption:function(e,i){"disabled"===e?(this.options[e]=i,this.widget().toggleClass("ui-sortable-disabled",!!i)):t.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(e,i){var n=null,o=!1,r=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(e),t(e.target).parents().each(function(){return t.data(this,r.widgetName+"-item")===r?(n=t(this),!1):void 0}),t.data(e.target,r.widgetName+"-item")===r&&(n=t(e.target)),n?!this.options.handle||i||(t(this.options.handle,n).find("*").addBack().each(function(){this===e.target&&(o=!0)}),o)?(this.currentItem=n,this._removeCurrentsFromItems(),!0):!1:!1)},_mouseStart:function(e,i,n){var o,r,s=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(e),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},t.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,s.cursorAt&&this._adjustOffsetFromHelper(s.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),s.containment&&this._setContainment(),s.cursor&&"auto"!==s.cursor&&(r=this.document.find("body"),this.storedCursor=r.css("cursor"),r.css("cursor",s.cursor),this.storedStylesheet=t("<style>*{ cursor: "+s.cursor+" !important; }</style>").appendTo(r)),s.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",s.opacity)),s.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",s.zIndex)),this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",e,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!n)for(o=this.containers.length-1;o>=0;o--)this.containers[o]._trigger("activate",e,this._uiHash(this));return t.ui.ddmanager&&(t.ui.ddmanager.current=this),t.ui.ddmanager&&!s.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(e),!0},_mouseDrag:function(e){var i,n,o,r,s=this.options,a=!1;for(this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-e.pageY<s.scrollSensitivity?this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop+s.scrollSpeed:e.pageY-this.overflowOffset.top<s.scrollSensitivity&&(this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop-s.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-e.pageX<s.scrollSensitivity?this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft+s.scrollSpeed:e.pageX-this.overflowOffset.left<s.scrollSensitivity&&(this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft-s.scrollSpeed)):(e.pageY-t(document).scrollTop()<s.scrollSensitivity?a=t(document).scrollTop(t(document).scrollTop()-s.scrollSpeed):t(window).height()-(e.pageY-t(document).scrollTop())<s.scrollSensitivity&&(a=t(document).scrollTop(t(document).scrollTop()+s.scrollSpeed)),e.pageX-t(document).scrollLeft()<s.scrollSensitivity?a=t(document).scrollLeft(t(document).scrollLeft()-s.scrollSpeed):t(window).width()-(e.pageX-t(document).scrollLeft())<s.scrollSensitivity&&(a=t(document).scrollLeft(t(document).scrollLeft()+s.scrollSpeed))),a!==!1&&t.ui.ddmanager&&!s.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),i=this.items.length-1;i>=0;i--)if(n=this.items[i],o=n.item[0],r=this._intersectsWithPointer(n),r&&n.instance===this.currentContainer&&o!==this.currentItem[0]&&this.placeholder[1===r?"next":"prev"]()[0]!==o&&!t.contains(this.placeholder[0],o)&&("semi-dynamic"===this.options.type?!t.contains(this.element[0],o):!0)){if(this.direction=1===r?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(n))break;this._rearrange(e,n),this._trigger("change",e,this._uiHash());break}return this._contactContainers(e),t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),this._trigger("sort",e,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(e,i){if(e){if(t.ui.ddmanager&&!this.options.dropBehaviour&&t.ui.ddmanager.drop(this,e),this.options.revert){var n=this,o=this.placeholder.offset(),r=this.options.axis,s={};r&&"x"!==r||(s.left=o.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft)),r&&"y"!==r||(s.top=o.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,t(this.helper).animate(s,parseInt(this.options.revert,10)||500,function(){n._clear(e)})}else this._clear(e,i);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var e=this.containers.length-1;e>=0;e--)this.containers[e]._trigger("deactivate",null,this._uiHash(this)),this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",null,this._uiHash(this)),this.containers[e].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),t.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?t(this.domPosition.prev).after(this.currentItem):t(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(e){var i=this._getItemsAsjQuery(e&&e.connected),n=[];return e=e||{},t(i).each(function(){var i=(t(e.item||this).attr(e.attribute||"id")||"").match(e.expression||/(.+)[\-=_](.+)/);i&&n.push((e.key||i[1]+"[]")+"="+(e.key&&e.expression?i[1]:i[2]))}),!n.length&&e.key&&n.push(e.key+"="),n.join("&")},toArray:function(e){var i=this._getItemsAsjQuery(e&&e.connected),n=[];return e=e||{},i.each(function(){n.push(t(e.item||this).attr(e.attribute||"id")||"")}),n},_intersectsWith:function(t){var e=this.positionAbs.left,i=e+this.helperProportions.width,n=this.positionAbs.top,o=n+this.helperProportions.height,r=t.left,s=r+t.width,a=t.top,l=a+t.height,c=this.offset.click.top,h=this.offset.click.left,u="x"===this.options.axis||n+c>a&&l>n+c,p="y"===this.options.axis||e+h>r&&s>e+h,d=u&&p;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>t[this.floating?"width":"height"]?d:e+this.helperProportions.width/2>r&&s>i-this.helperProportions.width/2&&n+this.helperProportions.height/2>a&&l>o-this.helperProportions.height/2},_intersectsWithPointer:function(t){var i="x"===this.options.axis||e(this.positionAbs.top+this.offset.click.top,t.top,t.height),n="y"===this.options.axis||e(this.positionAbs.left+this.offset.click.left,t.left,t.width),o=i&&n,r=this._getDragVerticalDirection(),s=this._getDragHorizontalDirection();return o?this.floating?s&&"right"===s||"down"===r?2:1:r&&("down"===r?2:1):!1},_intersectsWithSides:function(t){var i=e(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),n=e(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),o=this._getDragVerticalDirection(),r=this._getDragHorizontalDirection();return this.floating&&r?"right"===r&&n||"left"===r&&!n:o&&("down"===o&&i||"up"===o&&!i)},_getDragVerticalDirection:function(){var t=this.positionAbs.top-this.lastPositionAbs.top;return 0!==t&&(t>0?"down":"up")},_getDragHorizontalDirection:function(){var t=this.positionAbs.left-this.lastPositionAbs.left;return 0!==t&&(t>0?"right":"left")},refresh:function(t){return this._refreshItems(t),this.refreshPositions(),this},_connectWith:function(){var t=this.options;return t.connectWith.constructor===String?[t.connectWith]:t.connectWith},_getItemsAsjQuery:function(e){var i,n,o,r,s=[],a=[],l=this._connectWith();if(l&&e)for(i=l.length-1;i>=0;i--)for(o=t(l[i]),n=o.length-1;n>=0;n--)r=t.data(o[n],this.widgetFullName),r&&r!==this&&!r.options.disabled&&a.push([t.isFunction(r.options.items)?r.options.items.call(r.element):t(r.options.items,r.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),r]);for(a.push([t.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):t(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),i=a.length-1;i>=0;i--)a[i][0].each(function(){s.push(this)});return t(s)},_removeCurrentsFromItems:function(){var e=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=t.grep(this.items,function(t){for(var i=0;e.length>i;i++)if(e[i]===t.item[0])return!1;return!0})},_refreshItems:function(e){this.items=[],this.containers=[this];var i,n,o,r,s,a,l,c,h=this.items,u=[[t.isFunction(this.options.items)?this.options.items.call(this.element[0],e,{item:this.currentItem}):t(this.options.items,this.element),this]],p=this._connectWith();if(p&&this.ready)for(i=p.length-1;i>=0;i--)for(o=t(p[i]),n=o.length-1;n>=0;n--)r=t.data(o[n],this.widgetFullName),r&&r!==this&&!r.options.disabled&&(u.push([t.isFunction(r.options.items)?r.options.items.call(r.element[0],e,{item:this.currentItem}):t(r.options.items,r.element),r]),this.containers.push(r));for(i=u.length-1;i>=0;i--)for(s=u[i][1],a=u[i][0],n=0,c=a.length;c>n;n++)l=t(a[n]),l.data(this.widgetName+"-item",s),h.push({item:l,instance:s,width:0,height:0,left:0,top:0})},refreshPositions:function(e){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var i,n,o,r;for(i=this.items.length-1;i>=0;i--)n=this.items[i],n.instance!==this.currentContainer&&this.currentContainer&&n.item[0]!==this.currentItem[0]||(o=this.options.toleranceElement?t(this.options.toleranceElement,n.item):n.item,e||(n.width=o.outerWidth(),n.height=o.outerHeight()),r=o.offset(),n.left=r.left,n.top=r.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(i=this.containers.length-1;i>=0;i--)r=this.containers[i].element.offset(),this.containers[i].containerCache.left=r.left,this.containers[i].containerCache.top=r.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight();return this},_createPlaceholder:function(e){e=e||this;var i,n=e.options;n.placeholder&&n.placeholder.constructor!==String||(i=n.placeholder,n.placeholder={element:function(){var n=e.currentItem[0].nodeName.toLowerCase(),o=t("<"+n+">",e.document[0]).addClass(i||e.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tr"===n?e.currentItem.children().each(function(){t("<td>&#160;</td>",e.document[0]).attr("colspan",t(this).attr("colspan")||1).appendTo(o)}):"img"===n&&o.attr("src",e.currentItem.attr("src")),i||o.css("visibility","hidden"),o},update:function(t,o){(!i||n.forcePlaceholderSize)&&(o.height()||o.height(e.currentItem.innerHeight()-parseInt(e.currentItem.css("paddingTop")||0,10)-parseInt(e.currentItem.css("paddingBottom")||0,10)),o.width()||o.width(e.currentItem.innerWidth()-parseInt(e.currentItem.css("paddingLeft")||0,10)-parseInt(e.currentItem.css("paddingRight")||0,10)))}}),e.placeholder=t(n.placeholder.element.call(e.element,e.currentItem)),e.currentItem.after(e.placeholder),n.placeholder.update(e,e.placeholder)},_contactContainers:function(n){var o,r,s,a,l,c,h,u,p,d,f=null,g=null;for(o=this.containers.length-1;o>=0;o--)if(!t.contains(this.currentItem[0],this.containers[o].element[0]))if(this._intersectsWith(this.containers[o].containerCache)){if(f&&t.contains(this.containers[o].element[0],f.element[0]))continue;f=this.containers[o],g=o}else this.containers[o].containerCache.over&&(this.containers[o]._trigger("out",n,this._uiHash(this)),this.containers[o].containerCache.over=0);if(f)if(1===this.containers.length)this.containers[g].containerCache.over||(this.containers[g]._trigger("over",n,this._uiHash(this)),this.containers[g].containerCache.over=1);else{for(s=1e4,a=null,d=f.floating||i(this.currentItem),l=d?"left":"top",c=d?"width":"height",h=this.positionAbs[l]+this.offset.click[l],r=this.items.length-1;r>=0;r--)t.contains(this.containers[g].element[0],this.items[r].item[0])&&this.items[r].item[0]!==this.currentItem[0]&&(!d||e(this.positionAbs.top+this.offset.click.top,this.items[r].top,this.items[r].height))&&(u=this.items[r].item.offset()[l],p=!1,Math.abs(u-h)>Math.abs(u+this.items[r][c]-h)&&(p=!0,u+=this.items[r][c]),s>Math.abs(u-h)&&(s=Math.abs(u-h),a=this.items[r],this.direction=p?"up":"down"));if(!a&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[g])return;a?this._rearrange(n,a,null,!0):this._rearrange(n,null,this.containers[g].element,!0),this._trigger("change",n,this._uiHash()),this.containers[g]._trigger("change",n,this._uiHash(this)),this.currentContainer=this.containers[g],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[g]._trigger("over",n,this._uiHash(this)),this.containers[g].containerCache.over=1}},_createHelper:function(e){var i=this.options,n=t.isFunction(i.helper)?t(i.helper.apply(this.element[0],[e,this.currentItem])):"clone"===i.helper?this.currentItem.clone():this.currentItem;return n.parents("body").length||t("parent"!==i.appendTo?i.appendTo:this.currentItem[0].parentNode)[0].appendChild(n[0]),n[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!n[0].style.width||i.forceHelperSize)&&n.width(this.currentItem.width()),(!n[0].style.height||i.forceHelperSize)&&n.height(this.currentItem.height()),n},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var e=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&t.ui.ie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var t=this.currentItem.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,i,n,o=this.options;"parent"===o.containment&&(o.containment=this.helper[0].parentNode),("document"===o.containment||"window"===o.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,t("document"===o.containment?document:window).width()-this.helperProportions.width-this.margins.left,(t("document"===o.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(o.containment)||(e=t(o.containment)[0],i=t(o.containment).offset(),n="hidden"!==t(e).css("overflow"),this.containment=[i.left+(parseInt(t(e).css("borderLeftWidth"),10)||0)+(parseInt(t(e).css("paddingLeft"),10)||0)-this.margins.left,i.top+(parseInt(t(e).css("borderTopWidth"),10)||0)+(parseInt(t(e).css("paddingTop"),10)||0)-this.margins.top,i.left+(n?Math.max(e.scrollWidth,e.offsetWidth):e.offsetWidth)-(parseInt(t(e).css("borderLeftWidth"),10)||0)-(parseInt(t(e).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,i.top+(n?Math.max(e.scrollHeight,e.offsetHeight):e.offsetHeight)-(parseInt(t(e).css("borderTopWidth"),10)||0)-(parseInt(t(e).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(e,i){i||(i=this.position);var n="absolute"===e?1:-1,o="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,r=/(html|body)/i.test(o[0].tagName);return{top:i.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():r?0:o.scrollTop())*n,left:i.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():r?0:o.scrollLeft())*n}},_generatePosition:function(e){var i,n,o=this.options,r=e.pageX,s=e.pageY,a="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=/(html|body)/i.test(a[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(e.pageX-this.offset.click.left<this.containment[0]&&(r=this.containment[0]+this.offset.click.left),e.pageY-this.offset.click.top<this.containment[1]&&(s=this.containment[1]+this.offset.click.top),e.pageX-this.offset.click.left>this.containment[2]&&(r=this.containment[2]+this.offset.click.left),e.pageY-this.offset.click.top>this.containment[3]&&(s=this.containment[3]+this.offset.click.top)),o.grid&&(i=this.originalPageY+Math.round((s-this.originalPageY)/o.grid[1])*o.grid[1],s=this.containment?i-this.offset.click.top>=this.containment[1]&&i-this.offset.click.top<=this.containment[3]?i:i-this.offset.click.top>=this.containment[1]?i-o.grid[1]:i+o.grid[1]:i,n=this.originalPageX+Math.round((r-this.originalPageX)/o.grid[0])*o.grid[0],r=this.containment?n-this.offset.click.left>=this.containment[0]&&n-this.offset.click.left<=this.containment[2]?n:n-this.offset.click.left>=this.containment[0]?n-o.grid[0]:n+o.grid[0]:n)),{top:s-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():l?0:a.scrollTop()),left:r-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():l?0:a.scrollLeft())}},_rearrange:function(t,e,i,n){i?i[0].appendChild(this.placeholder[0]):e.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?e.item[0]:e.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var o=this.counter;this._delay(function(){o===this.counter&&this.refreshPositions(!n)})},_clear:function(t,e){this.reverting=!1;var i,n=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(i in this._storedCSS)("auto"===this._storedCSS[i]||"static"===this._storedCSS[i])&&(this._storedCSS[i]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!e&&n.push(function(t){this._trigger("receive",t,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||e||n.push(function(t){this._trigger("update",t,this._uiHash())}),this!==this.currentContainer&&(e||(n.push(function(t){this._trigger("remove",t,this._uiHash())}),n.push(function(t){return function(e){t._trigger("receive",e,this._uiHash(this))}}.call(this,this.currentContainer)),n.push(function(t){return function(e){t._trigger("update",e,this._uiHash(this))}}.call(this,this.currentContainer)))),i=this.containers.length-1;i>=0;i--)e||n.push(function(t){return function(e){t._trigger("deactivate",e,this._uiHash(this))}}.call(this,this.containers[i])),this.containers[i].containerCache.over&&(n.push(function(t){return function(e){t._trigger("out",e,this._uiHash(this))}}.call(this,this.containers[i])),this.containers[i].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!e){for(this._trigger("beforeStop",t,this._uiHash()),i=0;n.length>i;i++)n[i].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!1}if(e||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null,!e){for(i=0;n.length>i;i++)n[i].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){t.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(e){var i=e||this;return{helper:i.helper,placeholder:i.placeholder||t([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:e?e.element:null}}})}(jQuery),define("jqueryUI",["jquery"],function(){}),define("player/mplayer",["marionette","player/mplayer-helper","player/constants/playerconst","jqueryUI"],function(t,e,i){var n;return n=new Backbone.Marionette.Application({objConfigData:void 0,objActivityConfigData:void 0,objPopupTemplates:void 0,objRouter:void 0,objActivityManager:void 0,objPlayerHelper:void 0,initalize:function(){}}),n.addInitializer(function(t){var n,o,r;if(this.objActivityConfigData=t.activityConfig,this.objConfigData=t.playerConfig,this.objRouter=t.router,this.objPopupTemplates=t.popupTemplates,this.objPlayerHelper=new e(this),this.objPlayerHelper.initlize(),r=this.objActivityConfigData.regions.region,r.length>0)for(n=0;n<r.length;n+=1)o=!0,r[n].type===i.REGION_TYPE_HEADER&&"false"===this.objConfigData.header.visible&&(o=!1),r[n].type===i.REGION_TYPE_FOOTER&&"false"===this.objConfigData.footer.visible&&(o=!1),this.objPlayerHelper.showHideRegionById(r[n].id,o)}),n.onPlayerInitlizeComplete=function(t){t.target=this,this.trigger(t.type,t)},n.getPlayerHelper=function(){return this.objPlayerHelper},n.getPlayerConfig=function(){return this.objConfigData},n.getActivityConfig=function(){return this.objActivityConfigData},n.getPopupTemplatesData=function(){return this.objPopupTemplates},n.destroy=function(){return objPlayerHelper.destroy()},n}),define("player/controllers/router-helper",[],function(){var t={changeIndex:function(){},activityLaunchByIndex:function(){var t;this.launchActivity(t)},activityLaunchByName:function(){var t;this.launchActivity(t)},launchActivity:function(){},appendActivity:function(){}};return t}),define("player/manager/popup-manager",["marionette"],function(){var t,e;return t=null,e=Backbone.View.extend({blockerDivRef:void 0,popupTemplDict:{},popupRefDict:{},popupAnimationsRef:{},LAUNCH_ANIMATION:"launchAnimation",CLOSE_ANIMATION:"closeAnimation",members:{objPopup:null,strPopupParent:null,popupContent:$("#popupContent"),popupHolder:$("#popupHolder"),objScreenBlocker:$("#screenBlocker")},intialize:function(){},showPopup:function(t){this.members.objPopup=t,this.members.objPopupParent=$(this.members.objPopup.parent()),this.members.popupContent.append(this.members.objPopup),this.members.popupHolder.show(),this.setScreenInCenter(),this.members.objPopup.show(),this.members.objScreenBlocker.show()},setScreenInCenter:function(){var t,e,i,n;t=this.members.objPopup,this.isPopupOpen()!==!1&&(e=$(t.parent()),i=(this.members.popupHolder.width()-t.width())/2,n=(this.members.popupHolder.height()-t.height())/2,t.css({left:i+"px",top:n+"px"}))},disabledScreen:function(t){t?this.members.objScreenBlocker.show():this.members.objScreenBlocker.hide()},isPopupOpen:function(){return null!==this.members.objPopup},setBlockerDivRef:function(t){this.blockerDivRef=t},setPopupTemplateRef:function(t){this.popupTemplDict=t},setAnimationObjects:function(t){this.popupAnimationsRef=t},launchAsPopup:function(t,e,i,n,o,r,s){var a,l,c={},h=$("body").find("#"+e);h.length<1&&(h=$("body")),a={},i===!0&&(a.blocker=$(this.blockerDivRef),h.append(a.blocker)),a.id=t,a.parentId=e,a.popup=$(this.popupTemplDict[t]),a.context=n,a.strCallback=o,a.launchAnimation=r,a.closeAnimation=s,void 0!==a.popup.attr(this.LAUNCH_ANIMATION)&&(l=this.popupAnimationsRef.animations[a.popup.attr(this.LAUNCH_ANIMATION)]),void 0===l?a.popup.hide().appendTo(h).show():(a.popup.hide().appendTo(h).show(),a.popup.animate(l,parseInt(l.duration))),void 0!==a.strCallback&&void 0!==a.context&&(c.state="popupOpen",c.popupId=t,a.context[a.strCallback].apply(a.context,c)),a.closeBtn=$.find("#btnClose",a.popup[0]),this.popupRefDict[a.id]=a,this.addCloseButtonEvent(a)},addCloseButtonEvent:function(t){var e=$(t.closeBtn),i=this;void 0!==e&&(e.attr("popupId",t.id),e.bind("click",i,i.handleCloseBtnClick))},handleCloseBtnClick:function(t){var e,i,n=t.data,o=$(t.target).attr("popupId");e=n.popupRefDict[o],i=$(n.popupRefDict[o].popup).attr(n.CLOSE_ANIMATION),void 0!==i&&(i=n.popupAnimationsRef.animations[i]),void 0!==i?$(n.popupRefDict[o].popup).animate(i,parseInt(i.duration),function(){n.removePopup(o)}):n.removePopup(o)},removePopup:function(t){var e={},i=this.popupRefDict[t];i.popup.remove(),void 0!==i.blocker&&i.blocker.remove(),void 0!==i.strCallback&&void 0!==i.context&&(e.state="popupClose",e.popupId=i.id,i.context[i.strCallback].apply(i.context,e)),void 0!==$(i.closeBtn)&&$(i.closeBtn).unbind("click"),delete this.popupRefDict[t]}}),{getInstance:function(){return t||(t=new e),t}}}),define("player/router",["marionette"],function(t){var e=t.AppRouter.extend({appRoutes:{}});return e}),jQuery.url=function(){var t={},e={},i={url:window.location,strictMode:!1,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},n=function(){str=decodeURI(i.url);for(var t=i.parser[i.strictMode?"strict":"loose"].exec(str),e={},n=14;n--;)e[i.key[n]]=t[n]||"";return e[i.q.name]={},e[i.key[12]].replace(i.q.parser,function(t,n,o){n&&(e[i.q.name][n]=o)}),e},o=function(t){return e.length||s(),"base"==t?null!==e.port&&""!==e.port?e.protocol+"://"+e.host+":"+e.port+"/":e.protocol+"://"+e.host+"/":""===e[t]?null:e[t]},r=function(t){return e.length||s(),null===e.queryKey[t]?null:e.queryKey[t]},s=function(){e=n(),a()},a=function(){var i=e.path;t=[],t=1==e.path.length?{}:("/"==i.charAt(i.length-1)?i.substring(1,i.length-1):path=i.substring(1)).split("/")};return{setMode:function(t){return strictMode="strict"==t?!0:!1,this},setUrl:function(t){return i.url=void 0===t?window.location:t,s(),this},segment:function(i){return e.length||s(),void 0===i?t.length:""===t[i]||void 0===t[i]?null:t[i]},attr:o,param:r}}(),define("jqueryURL",["jquery"],function(){}),function(t){function e(t,e){if(!(t.originalEvent.touches.length>1)){t.preventDefault();var i=t.originalEvent.changedTouches[0],n=document.createEvent("MouseEvents");n.initMouseEvent(e,!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),t.target.dispatchEvent(n)}}if(t.support.touch="ontouchend"in document,t.support.touch){var i,n=t.ui.mouse.prototype,o=n._mouseInit;n._touchStart=function(t){var n=this;!i&&n._mouseCapture(t.originalEvent.changedTouches[0])&&(i=!0,n._touchMoved=!1,e(t,"mouseover"),e(t,"mousemove"),e(t,"mousedown"))},n._touchMove=function(t){i&&(this._touchMoved=!0,e(t,"mousemove"))},n._touchEnd=function(t){i&&(e(t,"mouseup"),e(t,"mouseout"),this._touchMoved||e(t,"click"),i=!1)},n._mouseInit=function(){var e=this;e.element.bind("touchstart",t.proxy(e,"_touchStart")).bind("touchmove",t.proxy(e,"_touchMove")).bind("touchend",t.proxy(e,"_touchEnd")),o.call(e)}}}(jQuery),define("jqueryTouchPunch",["jqueryUI"],function(){}),define("player/utils/debugger",["marionette","jqueryTouchPunch"],function(){var t=function(t){this.FONT_SIZE=12,this.TEXT_COLOR="black",this.WARNING_COLOR="green",this.ERROR_COLOR="red",this.OBJECT_KEY_COLOR="#8080CC",this.OBJECT_TEXT_COLOR="#1919A3",this.DEBUGGER_SIZE={},this.DEBUGGER_SIZE.maxHeight=600,this.DEBUGGER_SIZE.maxWidth=800,this.DEBUGGER_SIZE.minHeight=150,this.DEBUGGER_SIZE.minWidth=250,this.domElement=$("#"+t),this.debuggerArea=this.domElement.find("#debugTextHeaderAndTextArea"),this.bEnableDebugger=!1,this.consoleHolder=console,this.errorHolder=window.onerror,this.txtDebugger=this.domElement.find("#debugTextArea"),this.btnHide=this.domElement.find("#btnHideDebugger"),this.btnShow=this.domElement.find("#btnShowDebugger"),this.btnClear=this.domElement.find("#btnClearDebugger"),this.isDragging=!1,this.isMinimize=void 0};return t.prototype.enableDebugger=function(t,e,i){this.isMinimize=i,this.bEnableDebugger=t,this.bEnableErrorLogger=e,this.strErrorLoggerData="",this.overrideConsole(t,e),this.initDebuggerButtons()},t.prototype.initDebuggerButtons=function(){var t,e=this,i="none";this.btnClear.bind("click",this,function(){e.txtDebugger.html("")}),t=e.domElement.find("#debugTextHeaderAndTextArea"),this.btnShow.bind("click",this,function(){return e.isDragging===!0?!1:(i="block",t=e.domElement.find("#debugTextHeaderAndTextArea"),t.css("left",e.btnShow.css("left")),t.css("top",e.btnShow.css("top")),t.css("display",i),e.btnShow.css("display","none"),void 0)}),this.btnHide.bind("click",this,function(){i="none",t=e.domElement.find("#debugTextHeaderAndTextArea"),t.css("display",i),e.btnShow.css("left",t.css("left")),e.btnShow.css("top",t.css("top")),e.btnShow.css("display","block")}),this.isMinimize===!0&&(t.css("display",i),e.btnShow.css("left",t.css("left")),e.btnShow.css("top",t.css("top")),e.btnShow.css("display","block"))
},t.prototype.overrideConsole=function(t,e){window.console={},t===!0||e===!0?(console.warn=$.proxy(this.showWarning,this),console.log=$.proxy(this.consoleLog,this),window.onerror=$.proxy(this.errorLog,this),this.addResizer(this.debuggerArea),this.makeDraggable(this.debuggerArea)):(window.console=this.consoleHolder,window.onerror=this.errorHolder),t===!0&&this.domElement.css("display","block")},t.prototype.consoleLog=function(){var t,e,i="";for(t=0;t<arguments.length;t+=1)if(_.isObject(arguments[t])&&_.isArray(arguments[t])===!1)for(e in arguments[t])arguments[t].hasOwnProperty(e)&&(i=i+"<I><B><font color='"+this.OBJECT_KEY_COLOR+"'>"+e+"</font></B></I>:<font color='"+this.OBJECT_TEXT_COLOR+"'>"+arguments[t][e]+"</font>   ");else _.isArray(arguments[t])?(i=i+"[ "+arguments[t]+" ] ",i=i+"> length:"+arguments[t].length):i=i+arguments[t]+" ";this.txtDebugger.append("<font color='"+this.TEXT_COLOR+"'>"+i+"</font><br>"),this.strErrorLoggerData=this.strErrorLoggerData+"\n "+i,void 0!==this.consoleHolder.log&&this.consoleHolder.log.apply(this.consoleHolder,arguments),this.txtDebugger.scrollTop(this.txtDebugger.innerHeight())},t.prototype.errorLog=function(t,e,i){var n=t+" > "+e+":"+i;this.txtDebugger.append("<font color='red'>"+n+"</font><br>"),this.strErrorLoggerData=this.strErrorLoggerData+"\n "+n,this.txtDebugger.scrollTop(this.txtDebugger.innerHeight())},t.prototype.showWarning=function(t,e,i){this.txtDebugger.append("<font color='"+this.WARNING_COLOR+"'>Warning: "+t+"</font><br>"),this.strErrorLoggerData=this.strErrorLoggerData+"\n "+t+" ::: "+e+" ::: "+i,this.consoleHolder.warn(t),this.txtDebugger.scrollTop(this.txtDebugger.innerHeight())},t.prototype.addResizer=function(t){var e,i=this;t.resizable({maxHeight:i.DEBUGGER_SIZE.maxHeight,maxWidth:i.DEBUGGER_SIZE.maxWidth,minHeight:i.DEBUGGER_SIZE.minHeight,minWidth:i.DEBUGGER_SIZE.minWidth}),e=this.domElement.find(".ui-resizable-handle"),e.removeClass(),e.addClass("resizerHandler")},t.prototype.makeDraggable=function(t){t.draggable({handle:"#objHeadaer",containment:"document"});var e=this;this.btnShow.draggable({containment:"document",drag:function(){e.isDragging=!0},stop:_.debounce(function(){e.isDragging=!1},100)})},t.prototype.getErrorLogData=function(){return this.strErrorLoggerData},t});var Data_Loader,mPlayer,Popup_Manager,CONSOLE,objRequireConfigData={baseUrl:reqBaseUrl,paths:{player:basePath+"framework/player",simPictor:basePath+"framework/pictor",jquery:basePath+"framework/libs/jquery/jquery-2.0.3.min",jqueryUI:basePath+"framework/libs/jquery/plugins/jquery-ui-1.10.3.custom.min",jqueryTouchPunch:basePath+"framework/libs/jquery/plugins/jquery.ui.touch-punch.min",jqueryURL:basePath+"framework/libs/jquery/plugins/jquery.url",json2xml:basePath+"framework/libs/jquery/plugins/jquery.json2xml",xml2json:basePath+"framework/libs/jquery/plugins/jquery.xml2json",underscore:basePath+"framework/libs/underscore/underscore-min",backbone:basePath+"framework/libs/backbone/backbone-min",marionette:basePath+"framework/libs/backbone/backbone.marionette",text:basePath+"framework/libs/require/text",css:basePath+"framework/libs/require/css",image:basePath+"framework/libs/require/image",templates:basePath+"framework/player/templates",components:basePath+"framework/player/components",activity:"activity",eventsConst:basePath+"framework/player/events/eventsconst",frameworkRoot:basePath+"framework"},shim:{jqueryUI:{deps:["jquery"]},jqueryURL:{deps:["jquery"]},jqueryTouchPunch:{deps:["jqueryUI"]},xml2json:{deps:["jquery"]},json2xml:{deps:["jquery"]},underscore:{exports:"_"},backbone:{deps:["underscore","jquery"],exports:"Backbone"},marionette:{deps:["jquery","underscore","backbone"],exports:"Backbone.Marionette"}},deps:["jquery","underscore"]};require.config(objRequireConfigData),require(["player/mplayer","player/controllers/router-helper","player/utils/data-loader","player/manager/popup-manager","player/router","jqueryURL"],function(t,e,i,n,o){function r(){j+=1;var t,e="resize";t=navigator.userAgent,t.indexOf("iPad")>-1&&(e="onorientationchange"),P===j&&void 0!==R.size&&R.hasOwnProperty("size")&&("true"===R.size.scale.isScalable?($(window).resize(function(){W(R.size)}),W(R.size)):($(window).resize(function(){F(R.size)}),F(R.size)))}function s(){var t,e,i,n,o;for(void 0===N.regions&&(N.regions={},N.regions.region=N.region,delete N.region),void 0===N.regions.region.length?(o=[],o.push(N.regions.region)):o=N.regions.region,P=o.length,e={},n=P-1;n>=0;n-=1)i=$("<div></div>").attr({id:o[n].id,"class":o[n].styleClass}),$("#mPlayer").prepend(i),e[o[n].id]="#"+o[n].id;mPlayer.addRegions(e),j=0;for(t in e)e.hasOwnProperty(t)&&mPlayer.getRegion(t).on("show",r)}function a(t){void 0!==t.keyword&&void 0!==t.relativePath&&(objRequireConfigData.paths[t.keyword]=t.relativePath,require.config(objRequireConfigData))}function l(){var t,i,n={},r={};n.playerConfig=R,n.activityConfig=N,n.router=O,n.popupTemplates=I,Popup_Manager.setAnimationObjects(x),void 0!==R.activityPath&&a(R.activityPath),O=new o(e),s(N),i=window.location.search.replace("?",""),t=i.split("&"),$.each(t,function(t,e){var i=e.split("=");r[i[0]]=i[1]}),n.queryData=r,mPlayer.start(n)}function c(){var t,e=!1;return void 0!==jQuery.url&&(t=jQuery.url.param("debug")),e=void 0===t?"true"===R.debug.mode?!0:!1:"true"===t?!0:!1}function h(t){var e,i,n=new t("debuggerHolder");e="true"===R.debug.lunchInMinimizedMode?!0:!1,i="true"===R.debug.errorLogger?!0:!1,n.enableDebugger(c(),i,e),l()}function u(){Data_Loader.off(Data_Loader.DATA_LOAD_SUCCESS),Data_Loader.off(Data_Loader.DATA_LOAD_FAILED)}function p(t,e,n,o,r,s){null!==Data_Loader&&(Data_Loader=new i),Data_Loader.on(Data_Loader.DATA_LOAD_SUCCESS,r),Data_Loader.on(Data_Loader.DATA_LOAD_FAILED,s),Data_Loader.load({url:t,dataType:e,contentType:n,returnType:o})}function d(){var t,e,i=$("#preloaderContent");i.hasClass("container")&&i.removeClass("container"),t=(window.innerWidth-i.width())/2,e=(window.innerHeight-i.height())/2,i.css("left",t+"px"),i.css("top",e+"px")}function f(){CONSOLE=window.console,console.log=function(){}}function g(){var t,e,i=[];void 0!==N.utilities?(I=N.utilities.popupTemplate,t=I.html.source,e=I.animation,e=void 0!==e?e.source:void 0,(void 0!==t||null!==t)&&i.push("text!"+t),void 0!==e&&i.push("text!"+e),require(i,function(t,e){e=jQuery.parseJSON(e),m(t,e)})):m()}function m(t,e){I=t,void 0!==t&&-1!==t.search("text/template")&&(t=$("<div>"+I+"</div>"),I=t.find("[type='text/template']")),void 0!==e&&(x=e),c()===!0?k():l()}function v(t){var e;R=t,Data_Loader.off(Data_Loader.DATA_LOAD_SUCCESS),Data_Loader.off(Data_Loader.DATA_LOAD_FAILED),e=void 0===R.release?!1:"true"===R.release?!0:!1,c()===!0?R.debug.mode="true":e===!0&&f(),g()}function y(){p(S.playerConfig.src,z,V,B,v,u)}function b(t){N=t,Data_Loader.off(Data_Loader.DATA_LOAD_SUCCESS),Data_Loader.off(Data_Loader.DATA_LOAD_FAILED)}function C(t){S=t,void 0!==t.playerConfig?(void 0===t.regions?(console.log("1...."),p(S.activityConfig.src,z,V,B,b,u)):(console.log("2...."),b(t.regions)),void 0===t.player?(console.log("3...."),y()):(console.log("4...."),v(t.player))):p(S.activityConfig.src,z,V,B,E,u)}function E(t){N=t,Data_Loader.off(Data_Loader.DATA_LOAD_SUCCESS),Data_Loader.off(Data_Loader.DATA_LOAD_FAILED),v(t.playerSettings)}function T(){r(),mPlayer.off("playerInitlizeCompleteEvent"),A()}function A(){var t,e;void 0!==jQuery.url.param("popupId")&&(t=jQuery.url.param("popupId"),e=mPlayer.getPlayerHelper().getRegionManager().getInlineTemplateData(),Popup_Manager.setBlockerDivRef(e.templatePopupBlocker),Popup_Manager.setPopupTemplateRef(e),Popup_Manager.launchAsPopup(t,null,!0,this,"testinMain"))}function w(t){var e=t.task;switch(e){case"updatePlayerSizeEvent":r()}}function D(){var t=configPath;(void 0===configPath||""===configPath)&&(t=H),void 0!==jQuery.url.param("product")&&(t=jQuery.url.param("product")+".xml"),mPlayer.on("playerInitlizeCompleteEvent",T),mPlayer.on("playerCommonTaskEvent",w),p(t,z,V,B,C,u)}Popup_Manager=n.getInstance(),_.templateSettings={evaluate:/\{\{#(.+?)\}\}/g,interpolate:/\{\{([^#].*?)\}\}/g,escape:/\{\{-(.+?)\}\}/g},mPlayer=t;var x,I,P,j,S,R,N,O,L,M,k,H,z,B,V,F,W,U,q;q=50,H="data/product-config.xml",z="xml",B="json",V="application/xml",L=800,M=600,k=function(){require(["player/utils/debugger"],function(t){h(t)})},F=_.debounce(function(t){var e,i,n,o,r,s,a,l;e=L,i=M,s=$("#playerContainer").width(),a=$("#playerContainer").height(),r=$("#mPlayer"),t&&(t.hasOwnProperty("width")?(e=parseInt(t.width,10),isNaN(e)||0>=e?r.css("width","100%"):r.width(e)):r.css("width","100%"),t.hasOwnProperty("height")?(i=parseInt(t.height,10),isNaN(i)||0>=i?r.css("height","100%"):r.height(i)):r.css("height","100%")),l={},"center"===t.align.horizontal?n=(s-r.width())/2:"left"===t.align.horizontal&&(n=0),0>n&&(n=0),l.left=n+"px","middle"===t.align.vertical?o=(a-r.height())/2:"top"===t.align.vertical&&(o=0),0>o&&(o=0),l.top=o+"px",r.css(l),$("#mPlayer").show(),Popup_Manager.setScreenInCenter(),d()},q),W=_.debounce(function(t){var e,i,n,o,r,s,a,l,c=0,h=0;e=1,i=$("#mPlayer"),n=$("#playerContainer").width(),o=$("#playerContainer").height(),r=L,s=M,t.hasOwnProperty("width")&&(r=t.width),t.hasOwnProperty("height")&&(s=t.height),e=r/s>n/o?n/r:o/s,e>t.scale.maxScale&&(e=t.scale.maxScale),e<t.scale.minScale&&(e=t.scale.minScale),a="scale("+e+")",l={},"center"===t.align.horizontal?h=(n-i.width()*e)/2:"left"===t.align.horizontal&&(h=0),0>h&&(h=0),l.left=h+"px","middle"===t.align.vertical?c=(o-i.height()*e)/2:"top"===t.align.vertical&&(c=0),0>c&&(c=0),l.top=c+"px",l.transform=a,l["-ms-transform"]=a,l["-moz-transform"]=a,l["-webkit-transform"]=a,l["-o-transform"]=a,l["transform-origin"]="0% 0%",l["-ms-transform-origin"]="0% 0%",l["-moz-transform-origin"]="0% 0%",l["-webkit-transform-origin"]="0% 0%",l["-o-transform-origin"]="0% 0%",$(i).css(l),U(e),Popup_Manager.setScreenInCenter(),d(),$("#mPlayer").show()},q),U=function(t){t=Number(t).toFixed(2),mPlayer.getPlayerHelper().updatePlayerScaleValue(t)},D()}),define("player/main",function(){});