define(["marionette","player/base/base-layout-comp","components/dnd/js/dnd-helper-advance","text!components/dnd/dnd.html","css!components/dnd/css/dnd.css","jqueryTouchPunch"],function(e,t,o,r){var n=t.extend({template:_.template(r),initialize:function(e){this.itemViewContainer="#dndHolder",this.members={questionData:void 0,dragList:void 0,droptList:void 0},e.hasOwnProperty("draggableItem")&&e.hasOwnProperty("droppableItem")&&(this.members.questionData=e),void 0!==e&&void 0!==e.updatedScale&&this.setStageScaleValue(e.updatedScale)},onRender:function(){void 0!==this.members.questionData&&(this.members.objDnDHelper=new o(this),this.processQuestionData(this.members.questionData))},onShow:function(){var e=this;this.$el.on("click",$.proxy(e.compClick,e)),this.$el.on("mouseover",$.proxy(e.compRollover,e)),this.$el.on("mouseout",$.proxy(e.compRollout,e)),this.members.objDnDHelper&&this.members.objDnDHelper.handleScaling()},onPlayerResizeEvent:function(){this.members&&this.members.objDnDHelper&&this.members.objDnDHelper.handleScaling()}});return n.prototype.__super__=t,n.prototype.DND_ITEM_DRAG_START_EVENT="dndItemDragStartEvent",n.prototype.DND_ITEM_DRAG_MOVE_EVENT="dndItemDragMoveEvent",n.prototype.DND_ITEM_DROP_EVENT="dndItemDropEvent",n.prototype.DND_ITEM_DRAG_STOP_EVENT="dndItemDragStopEvent",n.prototype.processQuestionData=function(e){this.members.questionData=e,this.$el.removeClass(),this.$el.addClass(e.theme),this.processDnD(),this.members.objDnDHelper.handleScaling()},n.prototype.setQuestionData=function(e){this.members.questionData=e,this.render()},n.prototype.processDnD=function(){var e,t=this.members;e=t.objDnDHelper,e.setContainment(t.questionData.containment),e.revertToPosition(t.questionData.revert),e.revertToOriginalPosition(t.questionData.revertToOriginalPosition),t.dragList=t.questionData.draggableItem.option,t.droptList=t.questionData.droppableItem.option,e.dndType(t.questionData.type),e.dropCopy(t.questionData.dropCopy),e.dragCopy(t.questionData.dragCopy),e.multiAccept(t.questionData.multiAccept),e.acceptCorrectOnly(t.questionData.onlyCorrect),e.replaceExisting(t.questionData.replace),t.objDnDHelper.CreateDraggble(this.verifyData(t.dragList),this.$el),t.objDnDHelper.CreateDroppable(this.verifyData(t.droptList),this.$el)},n.prototype.verifyData=function(e){if(void 0!==e&&void 0===e.length){var t=[];return t.push(e),t}return e},n.prototype.reset=function(e){this.members.objDnDHelper.resetItem(e)},n.prototype.resetAll=function(){this.members.objDnDHelper.resetAll()},n.prototype.showAnswer=function(){return this.members.objDnDHelper.showAnswer()},n.prototype.freezOption=function(e){this.members.objDnDHelper.freezOption(e)},n.prototype.unfreezOption=function(e){this.members.objDnDHelper.unfreezOption(e)},n.prototype.removeDragFeatureFromOption=function(e){this.members.objDnDHelper.removeDragFeatureFromOption(e)},n.prototype.dispatchDnDEvent=function(e,t){this.customEventDispatcher(e,this,t)},n.prototype.acceptCorrectOnly=function(e){this.members.objDnDHelper(e)},n.prototype.changeCorrectFor=function(e,t){this.members.objDnDHelper.changeCorrectFor(e,t)},n.prototype.destroy=function(){return this.$el.off("click"),this.$el.off("mouseover"),this.$el.off("mouseout"),this.members.objDnDHelper.destroy(),this.members.objDnDHelper=void 0,this.members.questionData={},this.itemViewContainer=void 0,this.$el.remove(),delete this.members,this.__super__.prototype.destroy(!0)},n});