!function(e){e.widget("custom.CustomKeyboardWidget",{options:{actualKeycodes:[{id:"0",keycode:"48"},{id:"1",keycode:"49"},{id:"2",keycode:"50"},{id:"3",keycode:"51"},{id:"4",keycode:"52"},{id:"5",keycode:"53"},{id:"6",keycode:"54"},{id:"7",keycode:"55"},{id:"8",keycode:"56"},{id:"9",keycode:"57"},{id:"a",keycode:"97"},{id:"b",keycode:"98"},{id:"c",keycode:"99"},{id:"d",keycode:"100"},{id:"e",keycode:"101"},{id:"f",keycode:"102"},{id:"g",keycode:"103"},{id:"h",keycode:"104"},{id:"i",keycode:"105"},{id:"j",keycode:"106"},{id:"k",keycode:"107"},{id:"l",keycode:"108"},{id:"b",keycode:"109"},{id:"n",keycode:"110"},{id:"o",keycode:"111"},{id:"p",keycode:"112"},{id:"q",keycode:"113"},{id:"r",keycode:"114"},{id:"s",keycode:"115"},{id:"t",keycode:"116"},{id:"u",keycode:"117"},{id:"v",keycode:"118"},{id:"w",keycode:"119"},{id:"x",keycode:"120"},{id:"y",keycode:"121"},{id:"z",keycode:"122"},{id:"A",keycode:"65"},{id:"B",keycode:"66"},{id:"C",keycode:"67"},{id:"D",keycode:"68"},{id:"E",keycode:"69"},{id:"F",keycode:"70"},{id:"G",keycode:"71"},{id:"H",keycode:"72"},{id:"I",keycode:"73"},{id:"J",keycode:"74"},{id:"K",keycode:"75"},{id:"L",keycode:"76"},{id:"M",keycode:"77"},{id:"N",keycode:"78"},{id:"O",keycode:"79"},{id:"P",keycode:"80"},{id:"Q",keycode:"81"},{id:"R",keycode:"82"},{id:"S",keycode:"83"},{id:"T",keycode:"84"},{id:"U",keycode:"85"},{id:"V",keycode:"86"},{id:"W",keycode:"87"},{id:"X",keycode:"88"},{id:"Y",keycode:"89"},{id:"Z",keycode:"90"},{id:"exclamation",keycode:"33"},{id:"atTheRate",keycode:"64"},{id:"hash",keycode:"35"},{id:"percentage",keycode:"37"},{id:"carrot",keycode:"94"},{id:"empersand",keycode:"38"},{id:"asterisk",keycode:"42"},{id:"bracketOpen",keycode:"40"},{id:"bracketClose",keycode:"41"},{id:"minus",keycode:"45"},{id:"plus",keycode:"43"},{id:"divide",keycode:"47"},{id:"decimal",keycode:"46"},{id:"equals",keycode:"61"},{id:"questionMark",keycode:"63"},{id:"underscore",keycode:"95"},{id:"curlyBracketOpen",keycode:"123"},{id:"curlyBracketClose",keycode:"125"},{id:"squareBracketOpen",keycode:"91"},{id:"squareBracketClose",keycode:"93"},{id:"pipe",keycode:"124"},{id:"backslash",keycode:"92"},{id:"colon",keycode:"58"},{id:"semicolon",keycode:"59"},{id:"doubleQuotes",keycode:"34"},{id:"singleQuotes",keycode:"39"},{id:"comma",keycode:"44"},{id:"tilde",keycode:"126"},{id:"graveAcent",keycode:"96"},{id:"backspace",keycode:"8"},{id:"space",keycode:"32"},{id:"tab",keycode:"9"},{id:"shift",keycode:"16"},{id:"ctrl",keycode:"17"},{id:"alt",keycode:"18"},{id:"capsLock",keycode:"20"},{id:"arrowUp",keycode:"38"},{id:"arrowDown",keycode:"40"},{id:"arrowLeft",keycode:"37"},{id:"arrowRight",keycode:"39"},{id:"enter",keycode:"13"}],keys:{numeric:[{label:"0",labelSubScript:"",styleName:"CalcBtnStyleZero",id:"0",keycode:"48",shiftKeyCode:"48",type:"digit"},{label:"1",labelSubScript:"",styleName:"CalcBtnStyle1",id:"1",keycode:"49",shiftKeyCode:"49",type:"digit"},{label:"2",labelSubScript:"",styleName:"CalcBtnStyle2",id:"2",keycode:"50",shiftKeyCode:"50",type:"digit"},{label:"3",labelSubScript:"",styleName:"CalcBtnStyle3",id:"3",keycode:"51",shiftKeyCode:"51",type:"digit"},{label:"4",labelSubScript:"",styleName:"CalcBtnStyle4",id:"4",keycode:"52",shiftKeyCode:"52",type:"digit"},{label:"5",labelSubScript:"",styleName:"CalcBtnStyle5",id:"5",keycode:"53",shiftKeyCode:"53",type:"digit"},{label:"6",labelSubScript:"",styleName:"CalcBtnStyle6",id:"6",keycode:"54",shiftKeyCode:"54",type:"digit"},{label:"7",labelSubScript:"",styleName:"CalcBtnStyle7",id:"7",keycode:"55",shiftKeyCode:"55",type:"digit"},{label:"8",labelSubScript:"",styleName:"CalcBtnStyle8",id:"8",keycode:"56",shiftKeyCode:"56",type:"digit"},{label:"9",labelSubScript:"",styleName:"CalcBtnStyle9",id:"9",keycode:"57",shiftKeyCode:"57",type:"digit"}],characters:[{label:"A",labelSubScript:"a",styleName:"CalcBtnStyleA",id:"a",keycode:"97",shiftKeyCode:"65",type:"character"},{label:"b",labelSubScript:"B",styleName:"CalcBtnStyleB",id:"b",keycode:"98",shiftKeyCode:"66",type:"character"},{label:"C",labelSubScript:"c",styleName:"CalcBtnStyleC",id:"c",keycode:"99",shiftKeyCode:"67",type:"character"},{label:"d",labelSubScript:"D",styleName:"CalcBtnStyleD",id:"d",keycode:"100",shiftKeyCode:"68",type:"character"},{label:"E",labelSubScript:"e",styleName:"CalcBtnStyleE",id:"e",keycode:"101",shiftKeyCode:"69",type:"character"},{label:"F",labelSubScript:"f",styleName:"CalcBtnStyleF",id:"f",keycode:"102",shiftKeyCode:"70",type:"character"},{label:"G",labelSubScript:"g",styleName:"CalcBtnStyleG",id:"g",keycode:"103",shiftKeyCode:"71",type:"character"},{label:"H",labelSubScript:"h",styleName:"CalcBtnStyleH",id:"h",keycode:"104",shiftKeyCode:"72",type:"character"},{label:"I",labelSubScript:"i",styleName:"CalcBtnStyleI",id:"i",keycode:"105",shiftKeyCode:"73",type:"character"},{label:"J",labelSubScript:"j",styleName:"CalcBtnStyleJ",id:"j",keycode:"106",shiftKeyCode:"74",type:"character"},{label:"K",labelSubScript:"k",styleName:"CalcBtnStyleK",id:"k",keycode:"107",shiftKeyCode:"75",type:"character"},{label:"L",labelSubScript:"l",styleName:"CalcBtnStyleL",id:"l",keycode:"108",shiftKeyCode:"76",type:"character"},{label:"M",labelSubScript:"m",styleName:"CalcBtnStyleM",id:"m",keycode:"109",shiftKeyCode:"77",type:"character"},{label:"N",labelSubScript:"n",styleName:"CalcBtnStyleN",id:"n",keycode:"110",shiftKeyCode:"78",type:"character"},{label:"O",labelSubScript:"o",styleName:"CalcBtnStyleO",id:"o",keycode:"111",shiftKeyCode:"79",type:"character"},{label:"P",labelSubScript:"p",styleName:"CalcBtnStyleP",id:"p",keycode:"112",shiftKeyCode:"80",type:"character"},{label:"Q",labelSubScript:"q",styleName:"CalcBtnStyleQ",id:"q",keycode:"113",shiftKeyCode:"81",type:"character"},{label:"R",labelSubScript:"r",styleName:"CalcBtnStyleR",id:"r",keycode:"114",shiftKeyCode:"82",type:"character"},{label:"S",labelSubScript:"s",styleName:"CalcBtnStyleS",id:"s",keycode:"115",shiftKeyCode:"83",type:"character"},{label:"T",labelSubScript:"t",styleName:"CalcBtnStyleT",id:"t",keycode:"116",shiftKeyCode:"84",type:"character"},{label:"U",labelSubScript:"u",styleName:"CalcBtnStyleU",id:"u",keycode:"117",shiftKeyCode:"85",type:"character"},{label:"V",labelSubScript:"v",styleName:"CalcBtnStyleV",id:"v",keycode:"118",shiftKeyCode:"86",type:"character"},{label:"W",labelSubScript:"w",styleName:"CalcBtnStyleW",id:"w",keycode:"119",shiftKeyCode:"87",type:"character"},{label:"X",labelSubScript:"x",styleName:"CalcBtnStyleX",id:"x",keycode:"120",shiftKeyCode:"88",type:"character"},{label:"Y",labelSubScript:"y",styleName:"CalcBtnStyleY",id:"y",keycode:"121",shiftKeyCode:"89",type:"character"},{label:"Z",labelSubScript:"z",styleName:"CalcBtnStyleZ",id:"z",keycode:"122",shiftKeyCode:"90",type:"character"}],specialCharacters:[{label:"!",labelSubScript:"",styleName:"CalcBtnStyleExclamation",id:"exclamation",keycode:"33",shiftKeyCode:"33",type:"specialCharacter"},{label:"@",labelSubScript:"",styleName:"CalcBtnStyleAt",id:"atTheRate",keycode:"64",shiftKeyCode:"64",type:"specialCharacter"},{label:"#",labelSubScript:"",styleName:"CalcBtnStyleHash",id:"hash",keycode:"35",shiftKeyCode:"35",type:"specialCharacter"},{label:"%",labelSubScript:"",styleName:"CalcBtnStylePercent",id:"percentage",keycode:"37",shiftKeyCode:"37",type:"specialCharacter"},{label:"^",labelSubScript:"",styleName:"CalcBtnStyleCarrot",id:"carrot",keycode:"94",shiftKeyCode:"94",type:"specialCharacter"},{label:"&",labelSubScript:"",styleName:"CalcBtnStyleEmpersand",id:"empersand",keycode:"38",shiftKeyCode:"48",type:"specialCharacter"},{label:"*",labelSubScript:"",styleName:"CalcBtnStyleMultiplication",id:"asterisk",keycode:"42",shiftKeyCode:"42",type:"specialCharacter"},{label:"(",labelSubScript:"",styleName:"CalcBtnStyleBracketOpen",id:"bracketOpen",keycode:"40",shiftKeyCode:"40",type:"specialCharacter"},{label:")",labelSubScript:"",styleName:"CalcBtnStyleBracketClose",id:"bracketClose",keycode:"41",shiftKeyCode:"41",type:"specialCharacter"},{label:"-",labelSubScript:"",styleName:"CalcBtnStyleMinus",id:"minus",keycode:"45",shiftKeyCode:"45",type:"specialCharacter"},{label:"+",labelSubScript:"",styleName:"CalcBtnStyleSum",id:"plus",keycode:"43",shiftKeyCode:"43",type:"specialCharacter"},{label:"/",labelSubScript:"",styleName:"CalcBtnStyleDivision",id:"divide",keycode:"47",shiftKeyCode:"47",type:"specialCharacter"},{label:".",labelSubScript:"",styleName:"CalcBtnStyleDecimal",id:"decimal",keycode:"46",shiftKeyCode:"46",type:"specialCharacter"},{label:"=",labelSubScript:"",styleName:"CalcBtnStyleEqulas",id:"equals",keycode:"61",shiftKeyCode:"61",type:"specialCharacter"},{label:"?",labelSubScript:"",styleName:"CalcBtnStyleQuestionMark",id:"questionMark",keycode:"63",shiftKeyCode:"63",type:"specialCharacter"},{label:"_",labelSubScript:"",styleName:"CalcBtnStyleUnderscore",id:"underscore",keycode:"95",shiftKeyCode:"95",type:"specialCharacter"},{label:"{",labelSubScript:"",styleName:"CalcBtnStyleCurlyOpen",id:"curlyBracketOpen",keycode:"123",shiftKeyCode:"123",type:"specialCharacter"},{label:"}",labelSubScript:"",styleName:"CalcBtnStyleCurlyClose",id:"curlyBracketClose",keycode:"125",shiftKeyCode:"125",type:"specialCharacter"},{label:"[",labelSubScript:"",styleName:"CalcBtnStyleSquareOpen",id:"squareBracketOpen",keycode:"91",shiftKeyCode:"91",type:"specialCharacter"},{label:"]",labelSubScript:"",styleName:"CalcBtnStyleSquareClose",id:"squareBracketClose",keycode:"93",shiftKeyCode:"93",type:"specialCharacter"},{label:"|",labelSubScript:"",styleName:"CalcBtnStyleOR",id:"pipe",keycode:"124",shiftKeyCode:"124",type:"specialCharacter"},{label:"\\",labelSubScript:"",styleName:"CalcBtnStyleBackslash",id:"backslash",keycode:"92",shiftKeyCode:"92",type:"specialCharacter"},{label:":",labelSubScript:"",styleName:"CalcBtnStyleColon",id:"colon",keycode:"58",shiftKeyCode:"58",type:"specialCharacter"},{label:";",labelSubScript:"",styleName:"CalcBtnStyleSemiColon",id:"semicolon",keycode:"59",shiftKeyCode:"59",type:"specialCharacter"},{label:'"',labelSubScript:"",styleName:"CalcBtnStyleDoubleQuotes",id:"doubleQuotes",keycode:"34",shiftKeyCode:"34",type:"specialCharacter"},{label:"'",labelSubScript:"",styleName:"CalcBtnStyleSingleQuotes",id:"singleQuotes",keycode:"39",shiftKeyCode:"39",type:"specialCharacter"},{label:",",labelSubScript:"",styleName:"CalcBtnStyleComma",id:"comma",keycode:"44",shiftKeyCode:"44",type:"specialCharacter"},{label:"~",labelSubScript:"",styleName:"CalcBtnStyleTilde",id:"tilde",keycode:"126",shiftKeyCode:"126",type:"specialCharacter"},{label:"'",labelSubScript:"",styleName:"CalcBtnStyleGraveAcent",id:"graveAcent",keycode:"96",shiftKeyCode:"96",type:"specialCharacter"}],specialKeys:[{label:"Backspace",labelSubScript:"",styleName:"CalcBtnStyleBackspace",id:"backspace",keycode:"8",shiftKeyCode:"8",type:"specialKeys"},{label:"Space",labelSubScript:"",styleName:"CalcBtnStylespace",id:"space",keycode:"32",shiftKeyCode:"32",type:"specialKeys"},{label:"Tab",labelSubScript:"",styleName:"CalcBtnStyleTab",id:"tab",keycode:"9",shiftKeyCode:"9",type:"specialKeys"},{label:"Shift",labelSubScript:"",styleName:"CalcBtnStyleShift",id:"shift",keycode:"16",shiftKeyCode:"16",type:"specialKeys"},{label:"Ctrl",labelSubScript:"",styleName:"CalcBtnStyleCtrl",id:"ctrl",keycode:"17",shiftKeyCode:"17",type:"specialKeys"},{label:"Alt",labelSubScript:"",styleName:"CalcBtnStyleAlt",id:"alt",keycode:"18",shiftKeyCode:"18",type:"specialKeys"},{label:"Caps",labelSubScript:"",styleName:"CalcBtnStyleCaps",id:"capslock",keycode:"20",shiftKeyCode:"20",type:"specialKeys"},{label:"Up",labelSubScript:"",styleName:"CalcBtnStyleArrowUp",id:"arrowUp",keycode:"38",shiftKeyCode:"38",type:"specialKeys"},{label:"Down",labelSubScript:"",styleName:"CalcBtnStyleArrowDown",id:"arrowDown",keycode:"40",shiftKeyCode:"40",type:"specialKeys"},{label:"Left",labelSubScript:"",styleName:"CalcBtnStyleArrowLeft",id:"arrowLeft",keycode:"37",shiftKeyCode:"37",type:"specialKeys"},{label:"Right",labelSubScript:"",styleName:"CalcBtnStyleArrowRight",id:"arrowRight",keycode:"39",shiftKeyCode:"39",type:"specialKeys"},{label:"Enter",labelSubScript:"",styleName:"CalcBtnStyleEnter",id:"enter",keycode:"13",shiftKeyCode:"13",type:"specialKeys"},{label:"123",labelSubScript:"",styleName:"NumericToggleButtonStyleName",id:"NumericKeyset",keycode:"numeric",shiftKeyCode:"numeric",type:"keySetToggle"},{label:"abc",labelSubScript:"",styleName:"CharToggleButtonStyleName",id:"CharKeyset",keycode:"character",shiftKeyCode:"character",type:"keySetToggle"},{label:"#+=",labelSubScript:"",styleName:"SpecialCharToggleButtonStyle",id:"SpecialCharKeyset",keycode:"Specialcharacter",shiftKeyCode:"Specialcharacter",type:"keySetToggle"}]},specialCharacterCustomMapping:[{key:"!",mappedKey:"exclamation"},{key:"@",mappedKey:"atTheRate"},{key:"#",mappedKey:"hash"},{key:"%",mappedKey:"percentage"},{key:"^",mappedKey:"carrot"},{key:"&",mappedKey:"empersand"},{key:"*",mappedKey:"asterisk"},{key:"(",mappedKey:"bracketOpen"},{key:")",mappedKey:"bracketClose"},{key:"-",mappedKey:"minus"},{key:"+",mappedKey:"plus"},{key:"/",mappedKey:"divide"},{key:".",mappedKey:"decimal"},{key:"=",mappedKey:"equals"},{key:"?",mappedKey:"questionMark"},{key:"_",mappedKey:"underscore"},{key:"{",mappedKey:"curlyBracketOpen"},{key:"}",mappedKey:"curlyBracketClose"},{key:"[",mappedKey:"squareBracketOpen"},{key:"]",mappedKey:"squareBracketClose"},{key:"|",mappedKey:"pipe"},{key:"\\",mappedKey:"backslash"},{key:":",mappedKey:"colon"},{key:";",mappedKey:"semicolon"},{key:'"',mappedKey:"doubleQuotes"},{key:"'",mappedKey:"singleQuotes"},{key:",",mappedKey:"comma"},{key:"~",mappedKey:"tilde"},{key:"`",mappedKey:"graveAcent"}],bCapsLockEnabled:!1,bShiftEnabled:!1,bAltEnabled:!1,bCtrlEnabled:!1,specialKeyid:null,KeyboardWrapper:null,numericKeyWrapper:null,characterKeyWrapper:null,specialCharacterKeyWrapper:null,specialKeysWrapper:null,wrapper:null,currentActiveKeySet:null,currentActiveToggleKey:null,eventData:{shiftKey:!1,ctrlkey:!1,altKey:!1,capsKey:!1,keycode:""},isRunningOnDevice:!1,bUseHWKeyboard:!0,bCapsKeyValidationDone:!1,keySelected:"keySelected",backspace:"backspace",tab:"tab",shift:"shift",ctrl:"ctrl",alt:"alt",capslock:"capslock",arrowUp:"arrowUp",arrowDown:"arrowDown",arrowLeft:"arrowLeft",arrowRight:"arrowRight",enter:"enter",numericToggleKeyID:"NumericKeyset",numericToggleKeyCode:"numeric",charToggleKeyID:"CharKeyset",charToggleKeyCode:"character",specialCharToggleKeyID:"SpecialCharKeyset",specialCharToggleKeyCode:"Specialcharacter",css_link:e("<link>",{rel:"stylesheet",type:"text/css",href:basePath+"framework/player/widgets/customkeyboard/css/custom-keyboard-widget.css"})},constants:function(){return this.options.keySelected},_isOtherKey:function(e,t){var a=!1;switch(t){case 8:e.options.specialKeyid=e.options.backspace,a=!0;break;case 37:e.options.specialKeyid=e.options.arrowLeft,a=!0;break;case 38:e.options.specialKeyid=e.options.arrowUp,a=!0;break;case 39:e.options.specialKeyid=e.options.arrowRight,a=!0;break;case 40:e.options.specialKeyid=e.options.arrowDown,a=!0;break;case 20:e.options.specialKeyid=e.options.capslock,e.options.bCapsLockEnabled=!e.options.bCapsLockEnabled,a=!0;break;case 9:e.options.specialKeyid=e.options.tab,a=!0;break;case 16:e.options.specialKeyid=e.options.shift,a=!0;break;case 17:e.options.specialKeyid=e.options.ctrl,a=!0;break;case 18:e.options.specialKeyid=e.options.alt,a=!0}return a},_keyDownOnVirtualKeyboard:function(t){console.log("key down>>>>>>>>...",e(t.currentTarget)),e(t.currentTarget).addClass("DownStyle")},_keyUpOnVirtualKeyboard:function(t){console.log("key up>>>>>>>>...",e(t.currentTarget)),e(t.currentTarget).removeClass("DownStyle");var a,i,s,o,c,l,y;y=t.currentTarget,c=e(y).attr("type"),void 0===c&&(y=e(y).parent(),c=e(y).attr("type")),("character"===c||"specialCharacter"===c||"digit"===c||"specialKeys"===c||"keySetToggle"===c)&&(a=t.data,l="[keyid="+a.options.capslock+"]",i=e(y).attr("keyid"),s=e(y).attr("keycode"),"keySetToggle"===c?a._toggleKeyboard(i):("specialKeys"===c&&"capslock"===i&&(a.options.bCapsLockEnabled=!a.options.bCapsLockEnabled),"specialKeys"===c&&"ctrl"===i&&(a.options.bCtrlEnabled=!a.options.bCtrlEnabled),"specialKeys"===c&&"alt"===i&&(a.options.bAltEnabled=!a.options.bAltEnabled),a.options.eventData.shiftKey=a.options.bShiftEnabled,a.options.eventData.ctrlkey=a.options.bCtrlEnabled,a.options.eventData.altKey=a.options.bAltEnabled,a.options.eventData.capsKey=a.options.bCapsLockEnabled,a.options.bCapsLockEnabled?(a._activateCapsLockButton(!0,a),o=e(y).attr("shiftkeycode"),a.options.eventData.keycode=Number(o)):(a._activateCapsLockButton(!1,a),a.options.eventData.keycode=Number(s)),a.options.wrapper.trigger(a.options.keySelected,a.options.eventData),a.options.bCtrlEnabled=!1,a.options.bAltEnabled=!1))},_handleKeyPressOnWindow:function(e){var t,a,i,s;t=e.data,t.options.bUseHWKeyboard&&(i=e.charCode,t.options.bCapsKeyValidationDone||t._capsKeyValidation(e),t.options.eventData.shiftKey=e.shiftKey,t.options.eventData.ctrlkey=e.ctrlKey,t.options.eventData.altKey=e.altKey,t.options.eventData.capsKey=t.options.bCapsLockEnabled,t.options.bCapsLockEnabled||e.shiftKey?e.charCode>=65&&e.charCode<=90?(s=String.fromCharCode(i+32),a=t._getShiftKeyCodeById(s)):a=t._getMappedKeyCodeById(String.fromCharCode(i)):a=32===i?i:t._getMappedKeyCodeById(String.fromCharCode(i)),t.options.eventData.keycode=Number(a),t.options.wrapper.trigger(t.options.keySelected,t.options.eventData))},_handleKeyDownOnWindow:function(e){var t,a,i;t=e.data,t.options.bUseHWKeyboard&&(a=e.keyCode,8===e.keyCode&&e.preventDefault(),!e.shiftKey&&t._isOtherKey(t,a)?(t.options.eventData.shiftKey=e.shiftKey,t.options.eventData.ctrlkey=e.ctrlKey,t.options.eventData.altKey=e.altKey,t.options.eventData.capsKey=t.options.bCapsLockEnabled,t.options.bCapsLockEnabled?t._activateCapsLockButton(!0,t):t._activateCapsLockButton(!1,t),a=t._getMappedKeyCodeById(t.options.specialKeyid),t.options.eventData.keycode=Number(a),t.options.wrapper.trigger(t.options.keySelected,t.options.eventData)):e.shiftKey||!e.ctrlKey&&!e.altKey||(t.options.eventData.shiftKey=e.shiftKey,t.options.eventData.ctrlkey=e.ctrlKey,t.options.eventData.altKey=e.altKey,t.options.eventData.capsKey=t.options.bCapsLockEnabled,i=String.fromCharCode(a+32),a=t._getShiftKeyCodeById(i),t.options.eventData.keycode=Number(a),t.options.wrapper.trigger(t.options.keySelected,t.options.eventData)))},_capsKeyValidation:function(e){var t;t=e.data,65<=e.charCode&&e.charCode<=90&&(e.shiftKey||(t._activateCapsLockButton(!0,t),t.options.bCapsKeyValidationDone=!0,t.options.bCapsLockEnabled=!0))},_activateCapsLockButton:function(t,a){var i,s;s="[keyid="+a.options.capslock+"]",i=e(a.options.KeyboardWrapper).find(s),t?e(i).addClass("active"):e(i).removeClass("active")},_getSpecialCharacterMapping:function(e){var t,a,i,s={};for(t=this.options.specialCharacterCustomMapping.length,a=0;t>a;a+=1)if(s=this.options.specialCharacterCustomMapping[a],s.key===e){i=s.mappedKey;break}return i},_getMappedKeyCodeById:function(t){var a,i;i="[keyid="+t+"]";try{a=e(this.options.KeyboardWrapper).find(i).attr("keycode")}catch(s){i="[keyid="+this._getSpecialCharacterMapping(t)+"]",a=e(this.options.KeyboardWrapper).find(i).attr("keycode")}return a},_getShiftKeyCodeById:function(t){var a,i;return i="[keyid="+t+"]",a=e(this.options.KeyboardWrapper).find(i).attr("shiftkeycode")},_init:function(){this.options.css_link.appendTo("head")},_create:function(){this.options.isRunningOnDevice=device.mobile()||device.tablet()?!0:!1,console.log("on device:",this.options.isRunningOnDevice),this._attachListeners(),this.options.wrapper=e(this.element),this.options.wrapper.append("<div id='keyboardWrapper' class='keyboardWrapperStyle'></div>"),this.options.KeyboardWrapper=e(this.options.wrapper).find("#keyboardWrapper"),this._renderKeys()},_renderKeys:function(){var t,a,i,s,o,c,l;if(c=void 0===this.options.keys.specialKeys?0:this.options.keys.specialKeys.length,i=void 0===this.options.keys.characters?0:this.options.keys.characters.length,s=void 0===this.options.keys.numeric?0:this.options.keys.numeric.length,o=void 0===this.options.keys.specialCharacters?0:this.options.keys.specialCharacters.length,c>0){for(this.options.KeyboardWrapper.append("<div id='specialKeysWrapper' class='specialKeysWrapperStyle'></div>"),this.options.specialKeysWrapper=e(this.options.KeyboardWrapper).find("#specialKeysWrapper"),t=0;c>t;t+=1)l=this.options.keys.specialKeys[t].labelSubScript,a=""!==l&&void 0!==l?'<div keyid="'+this.options.keys.specialKeys[t].id+'" class="'+this.options.keys.specialKeys[t].styleName+'" keycode="'+this.options.keys.specialKeys[t].keycode+'" type="'+this.options.keys.specialKeys[t].type+'" shiftKeyCode="'+this.options.keys.specialKeys[t].shiftKeyCode+'"><div class="Uppercase">'+this.options.keys.specialKeys[t].label+'</div><div class="Lowercase">'+this.options.keys.specialKeys[t].labelSubScript+"</div></div>":'<div keyid="'+this.options.keys.specialKeys[t].id+'" class="'+this.options.keys.specialKeys[t].styleName+'" keycode="'+this.options.keys.specialKeys[t].keycode+'" type="'+this.options.keys.specialKeys[t].type+'" shiftKeyCode="'+this.options.keys.specialKeys[t].shiftKeyCode+'">'+this.options.keys.specialKeys[t].label+"</div>",this.options.specialKeysWrapper.append(a);this.options.isRunningOnDevice?(e("#specialKeysWrapper>div").unbind("touchstart").bind("touchstart",this,this._keyDownOnVirtualKeyboard),e("#specialKeysWrapper>div").unbind("touchend").bind("touchend",this,this._keyUpOnVirtualKeyboard)):(e("#specialKeysWrapper>div").unbind("mousedown").bind("mousedown",this,this._keyDownOnVirtualKeyboard),e("#specialKeysWrapper>div").unbind("mouseup").bind("mouseup",this,this._keyUpOnVirtualKeyboard))}if(s>0){for(this.options.KeyboardWrapper.append("<div id='numericKeyWrapper' class='numericWrapperStyle'></div>"),this.options.numericKeyWrapper=e(this.options.KeyboardWrapper).find("#numericKeyWrapper"),t=0;s>t;t+=1)l=this.options.keys.numeric[t].labelSubScript,a=""!==l&&void 0!==l?'<div keyid="'+this.options.keys.numeric[t].id+'" class="'+this.options.keys.numeric[t].styleName+'" keycode="'+this.options.keys.numeric[t].keycode+'" type="'+this.options.keys.numeric[t].type+'" shiftKeyCode="'+this.options.keys.numeric[t].shiftKeyCode+'"><div class="Uppercase">'+this.options.keys.numeric[t].label+'</div><div class="Lowercase">'+this.options.keys.numeric[t].labelSubScript+"</div></div>":'<div keyid="'+this.options.keys.numeric[t].id+'" class="'+this.options.keys.numeric[t].styleName+'" keycode="'+this.options.keys.numeric[t].keycode+'" type="'+this.options.keys.numeric[t].type+'" shiftKeyCode="'+this.options.keys.numeric[t].shiftKeyCode+'">'+this.options.keys.numeric[t].label+"</div>",this.options.numericKeyWrapper.append(a);this.options.isRunningOnDevice?(e("#numericKeyWrapper>div").unbind("touchstart").bind("touchstart",this,this._keyDownOnVirtualKeyboard),e("#numericKeyWrapper>div").unbind("touchend").bind("touchend",this,this._keyUpOnVirtualKeyboard)):(e("#numericKeyWrapper>div").unbind("mousedown").bind("mousedown",this,this._keyDownOnVirtualKeyboard),e("#numericKeyWrapper>div").unbind("mouseup").bind("mouseup",this,this._keyUpOnVirtualKeyboard))}if(i>0){for(this.options.KeyboardWrapper.append("<div id='characterKeyWrapper' class='characterWrapperStyle'></div>"),this.options.characterKeyWrapper=e(this.options.KeyboardWrapper).find("#characterKeyWrapper"),t=0;i>t;t+=1)l=this.options.keys.characters[t].labelSubScript,a=""!==l&&void 0!==l?'<div keyid="'+this.options.keys.characters[t].id+'" class="'+this.options.keys.characters[t].styleName+'" keycode="'+this.options.keys.characters[t].keycode+'" type="'+this.options.keys.characters[t].type+'" shiftKeyCode="'+this.options.keys.characters[t].shiftKeyCode+'"><div class="Uppercase">'+this.options.keys.characters[t].label+'</div><div class="Lowercase">'+this.options.keys.characters[t].labelSubScript+"</div></div>":'<div keyid="'+this.options.keys.characters[t].id+'" class="'+this.options.keys.characters[t].styleName+'" keycode="'+this.options.keys.characters[t].keycode+'" type="'+this.options.keys.characters[t].type+'" shiftKeyCode="'+this.options.keys.characters[t].shiftKeyCode+'">'+this.options.keys.characters[t].label+"</div>",this.options.characterKeyWrapper.append(a);this.options.isRunningOnDevice?(e("#characterKeyWrapper>div").unbind("touchstart").bind("touchstart",this,this._keyDownOnVirtualKeyboard),e("#characterKeyWrapper>div").unbind("touchend").bind("touchend",this,this._keyUpOnVirtualKeyboard)):(e("#characterKeyWrapper>div").unbind("mousedown").bind("mousedown",this,this._keyDownOnVirtualKeyboard),e("#characterKeyWrapper>div").unbind("mouseup").bind("mouseup",this,this._keyUpOnVirtualKeyboard))}if(o>0){for(this.options.KeyboardWrapper.append("<div id='specialCharWrapper' class='specialCharWrapperStyle'></div>"),this.options.specialCharacterKeyWrapper=e(this.options.KeyboardWrapper).find("#specialCharWrapper"),t=0;o>t;t+=1)l=this.options.keys.specialCharacters[t].labelSubScript,a=""!==l&&void 0!==l?'<div keyid="'+this.options.keys.specialCharacters[t].id+'" class="'+this.options.keys.specialCharacters[t].styleName+'" keycode="'+this.options.keys.specialCharacters[t].keycode+'" type="'+this.options.keys.specialCharacters[t].type+'" shiftKeyCode="'+this.options.keys.specialCharacters[t].shiftKeyCode+'"><div class="Uppercase">'+this.options.keys.specialCharacters[t].label+'</div><div class="Lowercase">'+this.options.keys.specialCharacters[t].labelSubScript+"</div></div>":'<div keyid="'+this.options.keys.specialCharacters[t].id+'" class="'+this.options.keys.specialCharacters[t].styleName+'" keycode="'+this.options.keys.specialCharacters[t].keycode+'" type="'+this.options.keys.specialCharacters[t].type+'" shiftKeyCode="'+this.options.keys.specialCharacters[t].shiftKeyCode+'">'+this.options.keys.specialCharacters[t].label+"</div>",this.options.specialCharacterKeyWrapper.append(a);this.options.isRunningOnDevice?(e("#specialCharWrapper>div").unbind("touchstart").bind("touchstart",this,this._keyDownOnVirtualKeyboard),e("#specialCharWrapper>div").unbind("touchend").bind("touchend",this,this._keyUpOnVirtualKeyboard)):(e("#specialCharWrapper>div").unbind("mousedown").bind("mousedown",this,this._keyDownOnVirtualKeyboard),e("#specialCharWrapper>div").unbind("mouseup").bind("mouseup",this,this._keyUpOnVirtualKeyboard))}this._toggleKeyboard(this.options.defaultKeySet)},_toggleKeyboard:function(t){var a;switch(this.options.currentActiveKeySet&&(e(this.options.currentActiveToggleKey).removeClass("active"),e(this.options.currentActiveKeySet).css("display","none")),t){case this.options.numericToggleKeyID:this.options.currentActiveKeySet=this.options.numericKeyWrapper;break;case this.options.charToggleKeyID:this.options.currentActiveKeySet=this.options.characterKeyWrapper;break;case this.options.specialCharToggleKeyID:this.options.currentActiveKeySet=this.options.specialCharacterKeyWrapper}a="[keyid = "+t+"]",this.options.currentActiveToggleKey=e(this.options.specialKeysWrapper).find(a),this.options.currentActiveToggleKey.addClass("active"),e(this.options.currentActiveKeySet).css("display","inline")},setKeyboard:function(e){this._toggleKeyboard(e)},useHWKeyboard:function(e){this.options.bUseHWKeyboard=e},_attachListeners:function(){e(window).bind("keypress",this,this._handleKeyPressOnWindow),e(window).bind("keydown",this,this._handleKeyDownOnWindow)},_destroy:function(){e(window).unbind("keypress"),e(window).unbind("keydown"),this.options.isRunningOnDevice?(e("#specialKeysWrapper>div").unbind("touchstart"),e("#specialKeysWrapper>div").unbind("touchend"),e("#numericKeyWrapper>div").unbind("touchstart"),e("#numericKeyWrapper>div").unbind("touchend"),e("#characterKeyWrapper>div").unbind("touchstart"),e("#characterKeyWrapper>div").unbind("touchend"),e("#specialCharWrapper>div").unbind("touchstart"),e("#specialCharWrapper>div").unbind("touchend")):(e("#specialKeysWrapper>div").unbind("mousedown"),e("#specialKeysWrapper>div").unbind("mouseup"),e("#numericKeyWrapper>div").unbind("mousedown"),e("#numericKeyWrapper>div").unbind("mouseup"),e("#characterKeyWrapper>div").unbind("mousedown"),e("#characterKeyWrapper>div").unbind("mouseup"),e("#specialCharWrapper>div").unbind("mousedown"),e("#specialCharWrapper>div").unbind("mouseup")),this.options={}}})}(jQuery);