define(["player/base/base-composite-comp","text!components/messagebox/templates/message-box.html"],function(e,t){var o=e.extend({template:_.template(t),EVENT_SUBMIT:"eventSubmit",ui:{btnSubmit:"#messageBoxOkBtn",txtMessageBoxInput:"#messageBoxInput"},initialize:function(e){if(!e.hasOwnProperty("data"))throw new Error("Please provide required data!");this.prepareData(e.data),e.hasOwnProperty("ui")&&(this.ui=e.ui)},onShow:function(){var e=this;if(this.model.off("change").on("change",this.render),!this.model.get("readonly")){if(!this.ui)throw new Error("ui element reference is needed to make the message box work properly!");this.ui.btnSubmit.off("click").on("click",$.proxy(this.handleOkButtonClick,this))}this.$el.on("click",$.proxy(e.compClick,e)),this.$el.on("mouseover",$.proxy(e.compRollover,e)),this.$el.on("mouseout",$.proxy(e.compRollout,e))}});return o.prototype.__super__=e,o.prototype.updateData=function(e){this.model.set(e)},o.prototype.handleOkButtonClick=function(){this.trigger(this.EVENT_SUBMIT)},o.prototype.prepareData=function(e){var t=Backbone.Model.extend({});void 0===this.model&&(this.model=new t(e)),console.log(this.model.get("readonly")),e.hasOwnProperty("readonly")?this.model.set("readonly",e.readonly):this.model.set("readonly",!0)},o.prototype.destroy=function(e){return this.ui&&this.ui.btnSubmit.off("click",$.proxy(this.handleOkButtonClick,this)),this.model.off("change",this.render),this.model.destroy(),this.undelegateEvents(),this.close(),this.$el.off("click"),this.$el.off("mouseover"),this.$el.off("mouseout"),this.__super__.prototype.destroy(e)},o});