define(["player/constants/errorconst","components/screennavigator/js/screen-navigator-item"],function(e,t){var n={STR_SHOW_NEXTBACK:"showNextBackButton",STR_SHOW_INDEX_BTNS:"showIndexButtons",STR_INDEX_BTNS:"indexButtons",NAV_TYPE_SCREEN:"screen",NAV_TYPE_ACTIVITY:"activity",STR_SCREEN_ID:"screenId",STR_SCREEN_INDEX:"screenIndex",STR_SCREEN_NAME:"screenName",STR_SCREEN_LABEL:"screenLabel",STR_SCREEN_TYPE:"type",STR_SCREEN_VISITED:"visited",STR_SCREEN_SELECTED:"selected",STR_CLASS_NAME:"className",selectedIndex:0,currentIndex:0,init:function(n,s){if(!s)throw new Error(e.REQUIRED_DATA_MISSING);if(!this.prepareData(n,s))throw new Error(e.UNEXPECTED_ERROR);n.itemViewContainer="#screenNavContainer",n.itemViewOptions={parent:n},n.itemView=t},setSelectedIndex:function(e,t,n){this.selectedIndex=this.currentIndex=t,this.updateNextBackButton(e),n&&void 0!==n||e.children.call("changeActiveIndex",this.selectedIndex)},updateLayout:function(e){e.ui.nextBtn.addClass(e.model.get("nextBtnClass")),e.ui.backBtn.addClass(e.model.get("backBtnClass")),e.ui.indexBtns.addClass(e.model.get("indexBtnContainerClass")),e.enableBackButton(!1),this.updateNextBackButton(e),e.children.call("changeActiveIndex",this.selectedIndex)},moveScreenBy:function(e,t){var n=e.model.get("totalScreen");this.validateIndex(t)?(this.currentIndex+=t,this.currentIndex>=0&&this.currentIndex<n&&(this.selectedIndex=this.currentIndex),this.updateNextBackButton(e),e.children.call("changeActiveIndex",this.selectedIndex)):console.error("Wrong move by index has been provided!")},updateNextBackButton:function(e){var t=!1,n=!1,s=e.model.get("totalScreen");t=0===this.selectedIndex?!1:!0,n=this.selectedIndex>=s-1?!1:!0,e.isFirstScreen=!t,e.isLastScreen=!n,e.enableBackButton(t),e.enableNextButton(n),e.children.call("updateActiveIndex",this.selectedIndex)},showHideNextBackBtn:function(e){var t;t=e.model.get(this.STR_SHOW_NEXTBACK),t?e.ui.nextBtn.show():e.ui.nextBtn.hide(),t?e.ui.backBtn.show():e.ui.backBtn.hide()},showHideIndexBtns:function(e){var t;t=e.model.get(this.STR_SHOW_INDEX_BTNS),t?e.ui.indexBtns.show():e.ui.indexBtns.hide()},prepareData:function(e,t){var n,s,a,i,d,c=!1;n=Backbone.Model.extend({defaults:{screenId:-1,screenIndex:-1,screenName:"screen",screenType:"screen",screenLabel:"0",visited:!1,selected:!1}}),s=Backbone.Collection.extend({model:n}),a=Backbone.Model.extend({defaults:{showNextBackButton:!0,showIndexButtons:!0,nextBtnClass:"btnNext",backBtnClass:"btnBack",nextBtnLbl:"",backbtnLbl:"",indexBtnContainerClass:"screenBtnContainer",totalScreen:0}}),i=new s;var r=this;return t.hasOwnProperty(this.STR_INDEX_BTNS)&&t[this.STR_INDEX_BTNS].length>0&&($.each(t[this.STR_INDEX_BTNS],function(e,t){d=new n,d.set(r.STR_SCREEN_ID,t.id),d.set(r.STR_SCREEN_INDEX,e),d.set(r.STR_SCREEN_NAME,t.name),d.set(r.STR_SCREEN_LABEL,t.label),d.set(r.STR_SCREEN_TYPE,t.type),d.set(r.STR_SCREEN_VISITED,!1),d.set(r.STR_SCREEN_SELECTED,!1),d.set(r.STR_CLASS_NAME,t.className),i.add(d)}),e.collection=i,c=!0),e.model=new a,t.hasOwnProperty(this.STR_SHOW_NEXTBACK)&&e.model.set(this.STR_SHOW_NEXTBACK,t[this.STR_SHOW_NEXTBACK]),t.hasOwnProperty(this.STR_SHOW_INDEX_BTNS)&&e.model.set(this.STR_SHOW_INDEX_BTNS,t[this.STR_SHOW_INDEX_BTNS]),t.hasOwnProperty("nextBtnClass")&&e.model.set("nextBtnClass",t.nextBtnClass),t.hasOwnProperty("backBtnClass")&&e.model.set("backBtnClass",t.backBtnClass),t.hasOwnProperty("nextBtnLbl")&&e.model.set("nextBtnLbl",t.nextBtnLbl),t.hasOwnProperty("backBtnLbl")&&e.model.set("backBtnLbl",t.backBtnLbl),t.hasOwnProperty("indexBtnContainerClass")&&e.model.set("indexBtnContainerClass",t.indexBtnContainerClass),e.model.set("totalScreen",t[this.STR_INDEX_BTNS].length),c},validateIndex:function(e){var t=!0;return e=+e,(isNaN(e)||e!==Math.floor(e))&&(t=!1),t}};return n});